if(typeof jQuery!=="undefined"){MobileFrontend.references=(function(f){var d=function(){},h,b={},c;h=window.location.hash.substr(1).match(/refspeed:([0-9]*)/);b.animationSpeed=h?parseInt(h[1],10):500;h=window.location.hash.substr(1).match(/refanimation:([a-z]*)/);b.animation=h?h[1]:null;function e(){var i={};f("ol.references li").each(function(j,k){i[f(k).attr("id")]={html:f(k).html()}});return i}function a(){var i=navigator.userAgent;return i.match(/AppleWebKit\/(53[4-9]|5[4-9]\d?|[6-9])\d?\d?/)?true:false}if(!a()){d=function(){var i=f("#mf-references").outerHeight();f("#mf-references").css({top:(window.innerHeight+window.pageYOffset)-i,bottom:"auto",position:"absolute"})};f(document).scroll(d)}function g(o){var j,r,n,l,m,i,q=e();f("#mf-references").remove();j=f('<div id="mf-references"><div></div></div>').hide().appendTo(document.body)[0];function k(s){s.stopPropagation()}j.ontouchstart=k;r=function(){var s;n=null;if(b.animation==="none"){f("#mf-references").hide()}else{if(b.animation==="slide"){s=window.innerHeight+window.pageYOffset;if(!a()){f("#mf-references").show().animate({top:s},{duration:b.animationSpeed,complete:function(){f("#mf-references").hide()}})}else{f("#mf-references").slideUp()}}else{f("#mf-references").fadeOut(b.animationSpeed)}}};f("<button>close</button>").click(r).appendTo("#mf-references");f(".mw-cite-backlink a").click(r);function p(s){var u,t;i=f(this).attr("href");l=i&&i.charAt(0)==="#"?q[i.substr(1,i.length)]:null;if(!f("#mf-references").is(":visible")||n!==i){n=i;if(l){m="<h3>"+f(this).text()+"</h3>"+l.html}else{m=f("<a />").text(f(this).text()).attr("href",i).appendTo("<div />").parent().html()}f("#mf-references div").html(m);f("#mf-references div sup a").click(p);d();if(b.animation==="none"){f("#mf-references").show()}else{if(b.animation==="slide"){if(!a()){u=window.innerHeight+window.pageYOffset;t=f("#mf-references").outerHeight();f("#mf-references").show().css({top:u}).animate({top:u-t},b.animationSpeed)}else{f("#mf-references").slideDown()}}else{f("#mf-references").fadeIn(b.animationSpeed)}}}else{r()}s.preventDefault();k(s)}f("sup a").unbind("click").click(p).each(function(s,t){t.ontouchstart=k});if(o){f(document.body).bind("click",r);f(document.body).bind("touchstart",function(){f("#mf-references").hide()})}}g(true);return{init:g}}(jQuery))};