if(typeof jQuery!=="undefined"){MobileFrontend.references=(function(f){var d=function(){},c;function e(){var h={};f("ol.references li").each(function(j,k){h[f(k).attr("id")]={html:f(k).html()}});return h}function a(){var h=navigator.userAgent;return h.match(/AppleWebKit\/(53[4-9]|5[4-9]\d?|[6-9])\d?\d?/)?true:false}if(!a()){d=function(){var i=f("#mf-references").outerHeight();f("#mf-references").css({top:(window.innerHeight+window.pageYOffset)-i,bottom:"auto",position:"absolute"})};f(document).scroll(d)}function b(h){var i;h=h||{};if(!h.animationSpeed){i=window.location.hash.substr(1).match(/refspeed:([0-9]*)/);h.animationSpeed=i?parseInt(i[1],10):500}if(!h.animation){i=window.location.hash.substr(1).match(/refanimation:([a-z]*)/);h.animation=i?i[1]:null}return h}function g(i,o,s){var j,r,n,l,m,h,q=e();s=b(s);i=i||f("#content")[0];o=typeof(o)==="undefined"?true:o;f("#mf-references").remove();j=f('<div id="mf-references"><div></div></div>').hide().appendTo(document.body)[0];function k(t){t.stopPropagation()}j.ontouchstart=k;r=function(){if(!f("#mf-references").is(":visible")){return}var t;n=null;if(s.animation==="none"){f("#mf-references").hide()}else{if(s.animation==="fade"){f("#mf-references").fadeOut(s.animationSpeed)}else{t=window.innerHeight+window.pageYOffset;if(!a()){f("#mf-references").show().animate({top:t},{duration:s.animationSpeed,complete:function(){f("#mf-references").hide()}})}else{f("#mf-references").slideUp()}}}};f("<button>close</button>").click(r).appendTo("#mf-references");f(".mw-cite-backlink a").click(r);function p(t){var v,u;h=f(this).attr("href");l=h&&h.charAt(0)==="#"?q[h.substr(1,h.length)]:null;if(!f("#mf-references").is(":visible")||n!==h){n=h;if(l){m="<h3>"+f(this).text()+"</h3>"+l.html}else{m=f("<a />").text(f(this).text()).attr("href",h).appendTo("<div />").parent().html()}f("#mf-references div").html(m);f("#mf-references div sup a").click(p);d();if(s.animation==="none"){f("#mf-references").show()}else{if(s.animation==="fade"){f("#mf-references").fadeIn(s.animationSpeed)}else{if(!a()){v=window.innerHeight+window.pageYOffset;u=f("#mf-references").outerHeight();f("#mf-references").show().css({top:v}).animate({top:v-u},s.animationSpeed)}else{f("#mf-references").slideDown()}}}}else{r()}t.preventDefault();k(t)}f("sup a",i).unbind("click").click(p).each(function(t,u){u.ontouchstart=k});if(o){f(document.body).bind("click",r);f(document.body).bind("touchstart",function(){f("#mf-references").hide()})}}MobileFrontend.registerModule("references");return{init:g}}(jQuery))};