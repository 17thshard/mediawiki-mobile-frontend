(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/mobile.startup/Anchor.js":function(t,e,i){var s=i("./src/mobile.startup/View.js");function n(){s.apply(this,arguments)}i("./src/mobile.startup/mfExtend.js")(n,s,{isTemplateMode:!0,defaults:{progressive:void 0,destructive:void 0,additionalClassNames:"",href:void 0,label:void 0},template:mw.template.get("mobile.startup","anchor.hogan")}),t.exports=n},"./src/mobile.startup/Browser.js":function(t,e,i){var s,n=i("./src/mobile.startup/util.js");function o(t){var e=function(){var i=this["__cache"+e.cacheId]||(this["__cache"+e.cacheId]={}),s=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,s)?i[s]:i[s]=t.apply(this,arguments)};return e.cacheId=Date.now().toString()+Math.random().toString(),e}function r(t,e){this.userAgent=t,this.$el=e,this._fixIosLandscapeBug()}r.prototype={_fixIosLandscapeBug:function(){var t=this;this.$el.find('meta[name="viewport"]')[0]&&(this.isIos(4)||this.isIos(5))&&(this.lockViewport(),document.addEventListener("gesturestart",function(){t.lockViewport()},!1))},isIos:o(function(t){var e=this.userAgent,i=/ipad|iphone|ipod/i.test(e);if(!i||!t)return i;switch(t){case 8:return/OS 8_/.test(e)||/Version\/8/.test(e);case 4:return/OS 4_/.test(e);case 5:return/OS 5_/.test(e);default:return!1}}),lockViewport:function(){this.$el&&this.$el.find('meta[name="viewport"]').attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},isWideScreen:o(function(){var t=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=t||window.innerHeight>=t}),supportsAnimations:o(function(){var t=document.createElement("foo").style;function e(e){return e in t||"webkit"+e[0].toUpperCase()+e.slice(1)in t}return e("animationName")&&e("transform")&&e("transition")}),supportsTouchEvents:o(function(){return"ontouchstart"in window}),supportsGeoLocation:o(function(){return"geolocation"in window.navigator})},r.getSingleton=function(){var t;return s||(t=n.getDocument(),s=new r(window.navigator.userAgent,t)),s},t.exports=r},"./src/mobile.startup/Button.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/View.js");function o(t){t.href&&(t.tagName="a"),n.call(this,t)}s(o,n,{isTemplateMode:!0,defaults:{tagName:"a",block:void 0,progressive:void 0,destructive:void 0,quiet:void 0,additionalClassNames:"",href:void 0,label:void 0},template:mw.template.get("mobile.startup","button.hogan")}),t.exports=o},"./src/mobile.startup/CtaDrawer.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/Drawer.js"),o=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/Button.js"),a=i("./src/mobile.startup/Anchor.js");function l(t){n.call(this,o.extend({},n.prototype.defaults,{progressiveButton:new r({progressive:!0,label:mw.msg("mobile-frontend-watchlist-cta-button-login")}).options,actionAnchor:new a({progressive:!0,label:mw.msg("mobile-frontend-watchlist-cta-button-signup")}).options},t))}function c(t,e){return o.extend({returnto:e||mw.config.get("wgPageName")},t)}function u(){return[].push.call(arguments,{type:"signup"}),o.extend.apply(o,arguments)}s(l,n,{templatePartials:o.extend({},n.prototype.templatePartials,{button:r.prototype.template,anchor:a.prototype.template}),template:mw.template.get("mobile.startup","CtaDrawer.hogan"),preRender:function(){var t=c(this.options.queryParams,this.options.returnTo);this.options.progressiveButton.href||(this.options.progressiveButton.href=mw.util.getUrl("Special:UserLogin",t)),this.options.actionAnchor.href||(this.options.actionAnchor.href=mw.util.getUrl("Special:UserLogin",u(t,this.options.signupQueryParams)))}}),l.prototype.test={redirectParams:c,signUpParams:u},t.exports=l},"./src/mobile.startup/Drawer.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/Panel.js"),o=i("./src/mobile.startup/util.js"),r=i("./src/mobile.startup/Icon.js");function a(t){n.call(this,o.extend({className:"drawer position-fixed"},t))}s(a,n,{defaults:o.extend({},n.prototype.defaults,{collapseIcon:new r({name:"arrow",additionalClassNames:"cancel"}).options}),templatePartials:o.extend({},n.prototype.templatePartials,{icon:r.prototype.template}),appendToElement:"body",closeOnScroll:!0,events:o.extend({},n.prototype.events,{click:"stopPropagation"}),postRender:function(){var t=this;o.docReady(function(){t.appendTo(t.appendToElement),t.$el.parent().addClass("has-drawer")}),this.on("show",this.onShowDrawer.bind(this)),this.on("hide",this.onHideDrawer.bind(this))},stopPropagation:function(t){t.stopPropagation()},onShowDrawer:function(){var t=this;this.$el.parent().addClass("drawer-visible"),setTimeout(function(){var e=o.getWindow();e.one("click.drawer",t.hide.bind(t)),t.closeOnScroll&&e.one("scroll.drawer",t.hide.bind(t))},t.minHideDelay)},onHideDrawer:function(){this.$el.parent().removeClass("drawer-visible"),o.getWindow().off(".drawer")}}),t.exports=a},"./src/mobile.startup/Icon.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/View.js");function o(t){t.hasText&&(t.modifier="mw-ui-icon-before"),t.href&&(t.tagName="a"),n.call(this,t)}s(o,n,{preRender:function(){this.setRotationClass()},setRotationClass:function(){var t=this.options;if(t.rotation)switch(t.rotation){case-180:case 180:t._rotationClass="mf-mw-ui-icon-rotate-flip";break;case-90:t._rotationClass="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:t._rotationClass="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}},isTemplateMode:!0,defaults:{rotation:0,hasText:!1,href:void 0,glyphPrefix:"mf",tagName:"div",isSmall:!1,base:"mw-ui-icon",name:"",modifier:"mw-ui-icon-element",title:""},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.base+"-"+this.options.glyphPrefix+"-"+this.options.name},toHtmlString:function(){return this.parseHTML("<div>").append(this.$el).html()},template:mw.template.get("mobile.startup","icon.hogan")}),t.exports=o},"./src/mobile.startup/Overlay.js":function(t,e,i){var s=i("./src/mobile.startup/View.js"),n=i("./src/mobile.startup/Icon.js"),o=i("./src/mobile.startup/Button.js"),r=i("./src/mobile.startup/Anchor.js"),a=i("./src/mobile.startup/icons.js"),l=i("./src/mobile.startup/util.js"),c=i("./src/mobile.startup/Browser.js").getSingleton();function u(t){this.isIos=c.isIos(),this.useVirtualKeyboardHack=c.isIos(4)||c.isIos(5),this.hasLoadError=!1,s.call(this,l.extend({className:"overlay"},t))}i("./src/mobile.startup/mfExtend.js")(u,s,{hasFixedHeader:!0,fullScreen:!0,hideOnExitClick:!0,templatePartials:{header:mw.template.get("mobile.startup","header.hogan"),anchor:r.prototype.template,button:o.prototype.template},template:mw.template.get("mobile.startup","Overlay.hogan"),defaults:{saveMsg:mw.msg("mobile-frontend-editor-save"),cancelButton:a.cancel().toHtmlString(),backButton:new n({tagName:"button",name:"back",additionalClassNames:"back",label:mw.msg("mobile-frontend-overlay-close")}).toHtmlString(),headerButtonsListClassName:"",headerChrome:!1,spinner:a.spinner().toHtmlString()},events:{"click .cancel, .confirm, .initial-header .back":"onExitClick",click:"stopPropagation"},closeOnContentTap:!1,showSpinner:function(){this.$spinner.removeClass("hidden")},hideSpinner:function(){this.$spinner.addClass("hidden")},postRender:function(){this.$overlayContent=this.$(".overlay-content"),this.$spinner=this.$(".spinner"),this.isIos&&this.$el.addClass("overlay-ios"),this.$(".overlay-header h2 span").addClass("truncated-text"),this.setupEmulatedIosOverlayScrolling()},setupEmulatedIosOverlayScrolling:function(){var t=this;this.isIos&&this.hasFixedHeader&&(this.$(".overlay-content").on("touchstart",this.onTouchStart.bind(this)).on("touchmove",this.onTouchMove.bind(this)),setTimeout(function(){t._fixIosHeader(t.$("textarea, input"))},0))},onExitClick:function(t){t.preventDefault(),t.stopPropagation(),this.hideOnExitClick&&this.hide(),this.emit(u.EVENT_EXIT)},onTouchStart:function(t){this.startY=t.originalEvent.touches[0].pageY},onTouchMove:function(t){var e=t.originalEvent.touches[0].pageY,i=this.$overlayContent.outerHeight(),s=this.$overlayContent.prop("scrollHeight")-i;t.stopPropagation(),(0===this.$overlayContent.scrollTop()&&this.startY<e||this.$overlayContent.scrollTop()===s&&this.startY>e)&&t.preventDefault()},stopPropagation:function(t){t.stopPropagation()},show:function(){var t=this,e=l.getDocument(),i=l.getWindow();this.scrollTop=window.pageYOffset,this.fullScreen&&(e.addClass("overlay-enabled"),window.scrollTo(0,1)),this.closeOnContentTap&&e.find("#mw-mf-page-center").one("click",this.hide.bind(this)),this.isIos&&this.hasFixedHeader&&i.on("touchmove.ios",function(t){t.preventDefault()}).on("resize.ios",function(){t._resizeContent(i.height())}),this.$el.addClass("visible")},hide:function(){var t=l.getWindow(),e=l.getDocument();return this.fullScreen&&(e.removeClass("overlay-enabled"),window.scrollTo(window.pageXOffset,this.scrollTop)),this.$el.detach(),this.isIos&&t.off(".ios"),this.emit("hide"),!0},_resizeContent:function(t){this.$overlayContent.height(t-this.$(".overlay-header-container").outerHeight()-this.$(".overlay-footer-container").outerHeight())},_fixIosHeader:function(t){var e=this,i=l.getWindow();this.isIos&&(this._resizeContent(i.height()),t.on("focus",function(){setTimeout(function(){var t=0;e.useVirtualKeyboardHack&&(i.scrollTop(999),t=i.scrollTop(),i.scrollTop(0)),i.height()>t&&e._resizeContent(i.height()-t)},0)}).on("blur",function(){e._resizeContent(i.height()),i.scrollTop(0)}))},showHidden:function(t){this.$(".hideable").addClass("hidden"),this.$(t).removeClass("hidden")}}),u.EVENT_EXIT="Overlay-exit",t.exports=u},"./src/mobile.startup/Page.js":function(t,e,i){var s=mw.html,n=i("./src/mobile.startup/mfExtend.js"),o=i("./src/mobile.startup/time.js"),r=i("./src/mobile.startup/util.js"),a=i("./src/mobile.startup/Section.js"),l=i("./src/mobile.startup/Thumbnail.js"),c=i("./src/mobile.startup/View.js"),u=mw.config.get("wgMFMobileFormatterHeadings",["h1","h2","h3","h4","h5"]).join(","),h=["noviewer","metadata"];function p(t){r.extend(this,{options:t,title:t.title,displayTitle:t.displayTitle,url:t.url||mw.util.getUrl(t.title),id:t.id,wikidataDescription:t.wikidataDescription,thumbnail:!!Object.prototype.hasOwnProperty.call(t,"thumbnail")&&t.thumbnail,isMissing:void 0!==t.isMissing?t.isMissing:0===t.id}),this.options.isBorderBox=!1,this.options.languageUrl=mw.util.getUrl("Special:MobileLanguages/"+this.title),c.call(this,this.options),this.displayTitle||(this.displayTitle=this.getDisplayTitle()),this.thumbnail&&this.thumbnail.width&&(this.thumbnail.isLandscape=this.thumbnail.width>this.thumbnail.height)}n(p,c,{defaults:{id:0,title:"",displayTitle:"",namespaceNumber:0,protection:{edit:["*"]},sections:[],isMissing:!1,isMainPage:!1,url:void 0,thumbnail:{isLandscape:void 0,source:void 0,width:void 0,height:void 0}},getDisplayTitle:function(){return this.options.displayTitle||s.escape(this.options.title)},inNamespace:function(t){return this.options.namespaceNumber===mw.config.get("wgNamespaceIds")[t]},findSectionHeadingByIndex:function(t){return t<1?this.$():this.$(u).filter('.mw-parser-output > *, [class^="mf-section-"] > *').eq(t-1)},findChildInSectionLead:function(t,e){var i,s,n,o,r=u;function a(t){return t.find(e).addBack()}return 0===t?(o=this.getLeadSectionElement())&&o.length?a(o.children(e)):(i=this.findSectionHeadingByIndex(1)).length?a(i.prevAll(e)):this.$(e):(i=this.findSectionHeadingByIndex(t)).hasClass("section-heading")?(s=(n=i.next()).find(r).eq(0)).length?a(s.prevAll(e)):a(n.children(e)):(s=i.eq(0).nextAll(r).eq(0),i.nextUntil(s,e))},getLeadSectionElement:function(){return this.$(".mf-section-0").length?this.$(".mf-section-0"):null},isWikiText:function(){return"wikitext"===mw.config.get("wgPageContentModel")},isMainPage:function(){return this.options.isMainPage},isWatched:function(){return this.options.isWatched},getRevisionId:function(){return this.options.revId},getTitle:function(){return this.options.title},getId:function(){return this.options.id},getNamespaceId:function(){var t=this.options.title.split(":");return t[1]&&mw.config.get("wgNamespaceIds")[t[0].toLowerCase().replace(" ","_")]||0},isTalkPage:function(){var t=this.getNamespaceId();return t>0&&t%2==1},preRender:function(){this.sections=[],this._sectionLookup={},this.title=this.options.title,this.options.sections.forEach(function(t){var e=new a(t);this.sections.push(e),this._sectionLookup[e.id]=e}.bind(this))},getThumbnails:function(){var t=this.$el,e="."+h.join(",."),i=[];return this._thumbs||(t.find("a.image, a.thumbimage").not(e).each(function(){var s=t.find(this),n=s.find(".lazy-image-placeholder"),o=0===s.parents(e).length&&0===s.find(e).length,r=s.attr("href").match(/title=([^/&]+)/),a=s.attr("href").match(/[^/]+$/);n.length&&o&&(o=!new RegExp("\\b("+h.join("|")+")\\b").test(n.data("class"))),o&&(r||a)&&i.push(new l({el:s,filename:decodeURIComponent(r?r[1]:a[0])}))}),this._thumbs=i),this._thumbs},getSection:function(t){return this._sectionLookup[t]},getSections:function(){return this.sections},getRedLinks:function(){return this.$(".new")}}),p.newFromJSON=function(t){var e,i,n=t.thumbnail,a=t.pageprops||{displaytitle:s.escape(t.title)},l=t.terms;return(a||l)&&(i=l&&l.label?s.escape(l.label[0]):a.displaytitle),t.wikidataDescription=t.description||void 0,n&&(t.thumbnail.isLandscape=n.width>n.height),t.revisions&&t.revisions[0]&&(e=t.revisions[0],t.lastModified=o.getLastModifiedMessage(new Date(e.timestamp).getTime()/1e3,e.user)),new p(r.extend(t,{id:t.pageid,isMissing:!!t.missing,url:mw.util.getUrl(t.title),displayTitle:i}))},p.HEADING_SELECTOR=u,t.exports=p},"./src/mobile.startup/PageList.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/View.js"),o=i("./src/mobile.startup/Browser.js").getSingleton();function r(){n.apply(this,arguments)}s(r,n,{defaults:{pages:[]},renderPageImages:function(){var t=this;setTimeout(function(){t.$(".list-thumb").each(function(){var e=t.$(this).data("style");t.$(this).attr("style",e)})},o.isWideScreen()?0:1e3)},postRender:function(){this.renderPageImages()},template:mw.template.get("mobile.startup","PageList.hogan"),templatePartials:{item:mw.template.get("mobile.startup","PageListItem.hogan")}}),t.exports=r},"./src/mobile.startup/Panel.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/util.js"),o=i("./src/mobile.startup/View.js");function r(t){var e=n.extend({},{className:"panel"},t);o.call(this,e)}s(r,o,{minHideDelay:10,events:{"click .cancel":"onCancel"},onCancel:function(t){t.preventDefault(),this.hide()},show:function(){var t=this;t.isVisible()||setTimeout(function(){t.$el.addClass("visible animated"),t.emit("show")},t.minHideDelay)},hide:function(){var t=this;setTimeout(function(){t.$el.removeClass("visible"),t.emit("hide")},t.minHideDelay)},isVisible:function(){return this.$el.hasClass("visible")},toggle:function(){this.isVisible()?this.hide():this.show()}}),t.exports=r},"./src/mobile.startup/ScrollEndEventEmitter.js":function(t,e,i){var s=i("./src/mobile.startup/util.js"),n=i("./src/mobile.startup/mfExtend.js");function o(t,e){this.threshold=e||100,this.eventBus=t,this.enable(),OO.EventEmitter.call(this)}OO.mixinClass(o,OO.EventEmitter),o.EVENT_SCROLL_END="ScrollEndEventEmitter-scrollEnd",n(o,{_bindScroll:function(){this._scrollHandler||(this._scrollHandler=this._onScroll.bind(this),this.eventBus.on("scroll:throttled",this._scrollHandler))},_unbindScroll:function(){this._scrollHandler&&(this.eventBus.off("scroll:throttled",this._scrollHandler),this._scrollHandler=null)},_onScroll:function(){this.$el&&this.enabled&&this.scrollNearEnd()&&(this.disable(),this.emit(o.EVENT_SCROLL_END))},scrollNearEnd:function(){var t=s.getWindow(),e=t.scrollTop()+t.height(),i=this.$el.offset().top+this.$el.outerHeight();return e+this.threshold>i},enable:function(){this.enabled=!0,this._bindScroll()},disable:function(){this.enabled=!1,this._unbindScroll()},setElement:function(t){this.$el=t}}),t.exports=o},"./src/mobile.startup/Section.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/icons.js"),o=i("./src/mobile.startup/View.js");function r(t){var e=this;t.tag="h"+t.level,this.line=t.line,this.text=t.text,this.hasReferences=t.hasReferences||!1,this.id=t.id||null,this.anchor=t.anchor,this.subsections=[],(t.subsections||[]).forEach(function(t){e.subsections.push(new r(t))}),o.call(this,t)}s(r,o,{template:mw.template.get("mobile.startup","Section.hogan"),defaults:{line:void 0,text:"",spinner:n.spinner().toHtmlString()}}),t.exports=r},"./src/mobile.startup/Thumbnail.js":function(t,e,i){var s=i("./src/mobile.startup/mfExtend.js"),n=i("./src/mobile.startup/util.js"),o=i("./src/mobile.startup/View.js");function r(t){o.call(this,n.extend({isBorderBox:!1},t))}s(r,o,{defaults:{filename:void 0},postRender:function(){this.options.description=this.$el.siblings(".thumbcaption").text()},getDescription:function(){return this.options.description},getFileName:function(){return this.options.filename}}),t.exports=r},"./src/mobile.startup/View.js":function(t,e,i){var s=i("./src/mobile.startup/util.js"),n=i("./src/mobile.startup/mfExtend.js"),o=["events"],r=/^(\S+)\s*(.*)$/,a=0;function l(){var t=this;o.forEach(function(e){void 0!==t[e]&&mw.log.deprecate(t,e,t[e],"Setting `"+e+"` on the View is deprecated. Please use options.")}),this.initialize.apply(this,arguments)}OO.mixinClass(l,OO.EventEmitter),n(l,{tagName:"div",isTemplateMode:!1,template:void 0,templatePartials:{},defaults:{},initialize:function(t){var e=this;OO.EventEmitter.call(this),t=s.extend({},this.defaults,t),this.options=t,this.cid=function(t){var e=(++a).toString();return t?t+e:e}("view"),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),t.el?this.$el=$(t.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize(t):s.docReady(function(){e.$el=$(t.el),e._postInitialize(t)})},_postInitialize:function(t){var e=t.className;this.$el.addClass(e),!1!==t.isBorderBox&&this.$el.addClass("view-border-box"),this.render({})},preRender:function(){},postRender:function(){},render:function(t){var e,i;return s.extend(this.options,t),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(i=this.template.render(this.options,this.templatePartials),this.isTemplateMode?(e=$(i),this.$el.replaceWith(e),this.$el=e):this.$el.html(i)),this.postRender(),this.delegateEvents(),this},$:function(t){return this.$el.find(t)},delegateEvents:function(t){var e,i,s;if(t=t||this.options.events||this.events)for(i in this.undelegateEvents(),t)"function"!=typeof(s=t[i])&&(s=this[t[i]]),s&&(e=i.match(r),this.delegate(e[1],e[2],s.bind(this)))},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},parseHTML:s.parseHTML}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(t){l.prototype[t]=function(){return this.$el[t].apply(this.$el,arguments),this}}),t.exports=l},"./src/mobile.startup/actionParams.js":function(t,e,i){var s=i("./src/mobile.startup/util.js"),n={action:"query",formatversion:2};t.exports=function(t){var e=mw.config.get("wgMFContentProviderScriptPath");return s.extend({},n,{origin:e?"*":void 0},t)}},"./src/mobile.startup/eventBusSingleton.js":function(t,e){t.exports=new OO.EventEmitter},"./src/mobile.startup/extendSearchParams.js":function(t,e,i){var s=i("./src/mobile.startup/util.js"),n=i("./src/mobile.startup/actionParams.js");t.exports=function(t){var e,i,o=mw.config.get("wgMFDisplayWikibaseDescriptions",{}),r=mw.config.get("wgMFContentProviderScriptPath");if(!Object.prototype.hasOwnProperty.call(o,t))throw new Error('"'+t+"\" isn't a feature that shows Wikibase descriptions.");return(e=Array.prototype.slice.call(arguments,1)).unshift({prop:[]}),e.push(mw.config.get("wgMFSearchAPIParams")),(i=s.extend.apply({},e)).prop=i.prop.concat(mw.config.get("wgMFQueryPropModules")),o[t]&&-1===i.prop.indexOf("description")&&i.prop.push("description"),r&&(i.origin="*"),n(i)}},"./src/mobile.startup/icons.js":function(t,e,i){var s=i("./src/mobile.startup/Icon.js"),n=i("./src/mobile.startup/util.js");t.exports={CANCEL_GLYPH:"overlay-close",Icon:s,cancel:function(t){var e=t?"overlay-close-"+t:"overlay-close";return new this.Icon({tagName:"button",name:e,additionalClassNames:"cancel",label:mw.msg("mobile-frontend-overlay-close")})},spinner:function(t){return t=t||{},new this.Icon(n.extend(t,{name:"spinner",label:mw.msg("mobile-frontend-loading-message"),additionalClassNames:"spinner loading"}))},watchIcon:function(){return new this.Icon({name:"watch",additionalClassNames:"watch-this-article"})},watchedIcon:function(){return new this.Icon({name:"watched",additionalClassNames:"watch-this-article watched"})}}},"./src/mobile.startup/mfExtend.js":function(t,e){t.exports=function(t,e,i){var s;for(s in i?OO.inheritClass(t,e):(OO.initClass(t),i=e),i)t.prototype[s]=i[s]}},"./src/mobile.startup/moduleLoader.js":function(t,e){function i(){this._register={}}i.prototype={require:function(t){var e,i,s=this._register;function n(){if(!Object.hasOwnProperty.call(s,t))throw new Error("MobileFrontend Module not found: "+t);return s[t]}i=t.split("/");try{return(e=mw.loader.require(i[0]))[i[1]]?e[i[1]]:n()}catch(t){return n()}},define:function(t,e){var i=this;if(Object.hasOwnProperty.call(this._register,t))throw new Error("Module already exists: "+t);return this._register[t]=e,{deprecate:function(s){i.deprecate(s,e,t)}}},deprecate:function(t,e,i){var s;i&&(s="Use "+i+" instead."),mw.log.deprecate(this._register,t,e,s)}},t.exports=i},"./src/mobile.startup/moduleLoaderSingleton.js":function(t,e,i){var s=i("./src/mobile.startup/moduleLoader.js");t.exports=new s},"./src/mobile.startup/time.js":function(t,e,i){var s=["seconds","minutes","hours","days","months","years"],n=i("./src/mobile.startup/util.js"),o=[1,60,3600,86400,2592e3,31536e3];function r(t){for(var e=0;e<o.length&&t>o[e+1];)++e;return{value:Math.round(t/o[e]),unit:s[e]}}function a(t){return r(Math.round((new Date).getTime()/1e3)-t)}function l(t){return"seconds"===t.unit&&t.value<10}t.exports={getLastModifiedMessage:function(t,e,i,s){var o,r,c=[];return i=i||"unknown",l(o=a(t))?c.push("mobile-frontend-last-modified-with-user-just-now",i,e):c.push({seconds:"mobile-frontend-last-modified-with-user-seconds",minutes:"mobile-frontend-last-modified-with-user-minutes",hours:"mobile-frontend-last-modified-with-user-hours",days:"mobile-frontend-last-modified-with-user-days",months:"mobile-frontend-last-modified-with-user-months",years:"mobile-frontend-last-modified-with-user-years"}[o.unit],i,e,mw.language.convertNumber(o.value)),c.push(s||"#",mw.language.convertNumber(e?1:0),e?mw.util.getUrl("User:"+e):""),r=mw.message.apply(this,c).parse(),s?r:n.parseHTML("<div>").html(r).text()},getRegistrationMessage:function(t,e){var i,s=[];return e=e||"unknown",l(i=a(parseInt(t,10)))?s.push("mobile-frontend-joined-just-now",e):s.push({seconds:"mobile-frontend-joined-seconds",minutes:"mobile-frontend-joined-minutes",hours:"mobile-frontend-joined-hours",days:"mobile-frontend-joined-days",months:"mobile-frontend-joined-months",years:"mobile-frontend-joined-years"}[i.unit],e,mw.language.convertNumber(i.value)),mw.message.apply(this,s).parse()},timeAgo:r,getTimeAgoDelta:a,isNow:l,isRecent:function(t){return["seconds","minutes","hours"].indexOf(t.unit)>-1}}},"./src/mobile.startup/toast.js":function(t,e,i){var s=i("./src/mobile.startup/util.js"),n="mobileFrontend/toast";function o(){mw.requestIdleCallback(this._showPending.bind(this))}o.prototype.show=function(t,e){"string"==typeof e&&(mw.log.warn("The use of the cssClass parameter of Toast.show is deprecated, please convert it to an options object."),e={type:e}),e=s.extend({tag:"toast"},e),this.notification=mw.notify(t,e)},o.prototype.hide=function(){void 0!==this.notification&&this.notification.then(function(t){t.close()})},o.prototype.showOnPageReload=function(t,e){mw.storage.get(n)?mw.log.warn("A pending toast message already exits. The page should have been reloaded by now."):mw.storage.set(n,JSON.stringify({content:t,className:e}))},o.prototype._showPending=function(){var t=mw.storage.get(n);t&&(t=JSON.parse(t),this.show(t.content,t.className),mw.storage.remove(n))},t.exports=new o},"./src/mobile.startup/util.js":function(t,e){t.exports={escapeSelector:function(t){return $.escapeSelector(t)},grep:function(){return $.grep.apply($,arguments)},docReady:function(t){return $(t)},when:function(){return $.when.apply($,arguments)},Deferred:function(){var t=$.Deferred(),e="Use Promise compatible methods `then` and `catch` instead.";return mw.log.deprecate(t,"fail",t.fail,e),mw.log.deprecate(t,"always",t.always,e),mw.log.deprecate(t,"done",t.done,e),t},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(t,e){return $($.parseHTML(t,e))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(t){return t.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey},repeatEvent:function(t,e,i,s){return t.on(i,function(t){return e.emit(i,t)},s)}}},"./src/mobile.startup/watchstar/Watchstar.js":function(t,e,i){var s=i("./src/mobile.startup/View.js"),n=i("./src/mobile.startup/watchstar/WatchstarGateway.js"),o=i("./src/mobile.startup/icons.js"),r=i("./src/mobile.startup/util.js"),a=i("./src/mobile.startup/mfExtend.js"),l=i("./src/mobile.startup/toast.js"),c=i("./src/mobile.startup/CtaDrawer.js");function u(t){s.call(this,r.extend({className:o.watchIcon().getClassName()},t))}a(u,s,{events:{"click a":"onLinksClick",click:"onStatusToggle"},defaults:{page:void 0,funnel:"unknown"},ctaDrawerOptions:{content:mw.msg("mobile-frontend-watchlist-cta"),queryParams:{warning:"mobile-frontend-watchlist-purpose",campaign:"mobile_watchPageActionCta",returntoquery:"article_action=watch"},signupQueryParams:{warning:"mobile-frontend-watchlist-signup-action"}},template:mw.template.compile('<a role="button">{{tooltip}}</a>',"hogan"),initialize:function(t){var e=s.prototype.initialize;this._watched=t.isWatched,this.gateway=new n(t.api),e.call(this,t)},preRender:function(){this.options.tooltip=this._watched?mw.msg("unwatchthispage"):mw.msg("watchthispage")},postRender:function(){var t=o.watchIcon().getGlyphClassName(),e=o.watchedIcon().getGlyphClassName()+" watched";this.$el.attr("title",this.options.tooltip),!mw.user.isAnon()&&this._watched?this.$el.addClass(e).removeClass(t):this.$el.addClass(t).removeClass(e),this.$el.removeClass("hidden")},onLinksClick:function(t){t.preventDefault()},onStatusToggleAnon:function(){this.drawer||(this.drawer=new c(this.ctaDrawerOptions)),this.drawer.show()},onStatusToggleUser:function(){var t,e=this,i=this.gateway,s=this.options.page,n=!this._watched;function o(){clearInterval(t)}t=setInterval(function(){l.show(mw.msg("mobile-frontend-watchlist-please-wait"))},1e3),i.postStatusesByTitle([s.getTitle()],n).then(function(){o(),e._watched=n,n?(e.render(),e.emit("watch"),l.show(mw.msg("mobile-frontend-watchlist-add",s.title))):(e.emit("unwatch"),e.render(),l.show(mw.msg("mobile-frontend-watchlist-removed",s.title)))},function(){o(),l.show(mw.msg("mobile-frontend-watchlist-error"),"error")})},onStatusToggle:function(){mw.user.isAnon()?this.onStatusToggleAnon.apply(this,arguments):this.onStatusToggleUser.apply(this,arguments)}}),t.exports=u},"./src/mobile.startup/watchstar/WatchstarGateway.js":function(t,e,i){var s=i("./src/mobile.startup/util.js"),n=i("./src/mobile.startup/actionParams.js");function o(t){this.api=t}o.prototype={getStatuses:function(t,e){return s.when(this.getStatusesByID(t),this.getStatusesByTitle(e)).then(function(){return s.extend.apply(s,arguments)})},getStatusesByID:function(t){var e=this;return t.length?this.api.get({formatversion:2,action:"query",prop:"info",inprop:"watched",pageids:t}).then(function(t){return e._unmarshalGetResponse(t)}):s.Deferred().resolve({})},getStatusesByTitle:function(t){var e=this;return t.length?this.api.get(n({prop:"info",inprop:"watched",titles:t})).then(function(t){return e._unmarshalGetResponse(t)}):s.Deferred().resolve({})},postStatusesByTitle:function(t,e){var i={action:"watch",titles:t};return e||(i.unwatch=!e),this.api.postWithToken("watch",i)},_unmarshalGetResponse:function(t){return(t&&t.query&&t.query.pages||[]).reduce(function(t,e){return t[e.title]=e.watched,t},{})}},t.exports=o},"./src/mobile.startup/watchstar/WatchstarPageList.js":function(t,e,i){var s=i("./src/mobile.startup/PageList.js"),n=i("./src/mobile.startup/watchstar/Watchstar.js"),o=mw.user,r=i("./src/mobile.startup/util.js"),a=i("./src/mobile.startup/Page.js"),l=i("./src/mobile.startup/mfExtend.js"),c=i("./src/mobile.startup/watchstar/WatchstarGateway.js");function u(t){this.wsGateway=new c(t.api),s.apply(this,arguments)}l(u,s,{postRender:function(){var t,e,i=this,n=[],o=[];return s.prototype.postRender.apply(this),t=this.queryUnitializedItems(),e=this.parsePagesFromItems(t),Object.keys(e).forEach(function(t){var i=e[t];i&&"0"!==i?n.push(i):o.push(t)}),this.getPages(n,o).then(function(e){i.renderItems(t,e)})},queryUnitializedItems:function(){return this.$("li:not(.with-watchstar)")},getPages:function(t,e){return o.isAnon()?r.Deferred().resolve({}):this.wsGateway.getStatuses(t,e)},parsePagesFromItems:function(t){var e=this,i={};return t.each(function(t,s){var n=e.$(s);i[n.attr("title")]=n.data("id")}),i},renderItems:function(t,e){var i=this;o.isAnon()||t.each(function(t,s){var n=i.$(s),o=new a({sections:[],title:n.attr("title"),id:n.data("id")}),r=i.parseHTML("<div>").appendTo(n),l=e[o.getTitle()];i._appendWatchstar(r,o,l),n.addClass("with-watchstar")})},_appendWatchstar:function(t,e,i){var s=new n({api:this.options.api,funnel:this.options.funnel,isAnon:o.isAnon(),isWatched:i,page:e,el:t});return r.repeatEvent(s,this,"watch"),r.repeatEvent(s,this,"unwatch"),s}}),t.exports=u}}]);
//# sourceMappingURL=mobile.common.js.map.json