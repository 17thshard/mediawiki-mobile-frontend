(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/mobile.startup/Anchor.js":function(t,e,i){var n=i("./src/mobile.startup/View.js");function s(){n.apply(this,arguments)}i("./src/mobile.startup/mfExtend.js")(s,n,{isTemplateMode:!0,defaults:{progressive:void 0,destructive:void 0,additionalClassNames:"",href:void 0,label:void 0},template:mw.template.get("mobile.startup","anchor.hogan")}),t.exports=s},"./src/mobile.startup/Browser.js":function(t,e,i){var n,s=i("./src/mobile.startup/util.js");function o(t){var e=function(){var i=this["__cache"+e.cacheId]||(this["__cache"+e.cacheId]={}),n=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,n)?i[n]:i[n]=t.apply(this,arguments)};return e.cacheId=Date.now().toString()+Math.random().toString(),e}function a(t,e){this.userAgent=t,this.$el=e,this._fixIosLandscapeBug()}a.prototype={_fixIosLandscapeBug:function(){var t=this;this.$el.find('meta[name="viewport"]')[0]&&(this.isIos(4)||this.isIos(5))&&(this.lockViewport(),document.addEventListener("gesturestart",function(){t.lockViewport()},!1))},isIos:o(function(t){var e=this.userAgent,i=/ipad|iphone|ipod/i.test(e);if(!i||!t)return i;switch(t){case 8:return/OS 8_/.test(e)||/Version\/8/.test(e);case 4:return/OS 4_/.test(e);case 5:return/OS 5_/.test(e);default:return!1}}),lockViewport:function(){this.$el&&this.$el.find('meta[name="viewport"]').attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},isWideScreen:o(function(){var t=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=t||window.innerHeight>=t}),supportsAnimations:o(function(){var t=document.createElement("foo").style;function e(e){return e in t||"webkit"+e[0].toUpperCase()+e.slice(1)in t}return e("animationName")&&e("transform")&&e("transition")}),supportsTouchEvents:o(function(){return"ontouchstart"in window}),supportsGeoLocation:o(function(){return"geolocation"in window.navigator})},a.getSingleton=function(){var t;return n||(t=s.getDocument(),n=new a(window.navigator.userAgent,t)),n},t.exports=a},"./src/mobile.startup/Button.js":function(t,e,i){var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/View.js");function o(t){t.href&&(t.tagName="a"),s.call(this,t)}n(o,s,{isTemplateMode:!0,defaults:{tagName:"a",block:void 0,progressive:void 0,destructive:void 0,quiet:void 0,additionalClassNames:"",href:void 0,label:void 0},template:mw.template.get("mobile.startup","button.hogan")}),t.exports=o},"./src/mobile.startup/Icon.js":function(t,e,i){var n=i("./src/mobile.startup/mfExtend.js"),s=i("./src/mobile.startup/View.js");function o(t){t.hasText&&(t.modifier="mw-ui-icon-before"),t.href&&(t.tagName="a"),s.call(this,t)}n(o,s,{preRender:function(){this.setRotationClass()},setRotationClass:function(){var t=this.options;if(t.rotation)switch(t.rotation){case-180:case 180:t._rotationClass="mf-mw-ui-icon-rotate-flip";break;case-90:t._rotationClass="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:t._rotationClass="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}},isTemplateMode:!0,defaults:{rotation:0,hasText:!1,href:void 0,glyphPrefix:"mf",tagName:"div",isSmall:!1,base:"mw-ui-icon",name:"",modifier:"mw-ui-icon-element",title:""},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.base+"-"+this.options.glyphPrefix+"-"+this.options.name},toHtmlString:function(){return this.parseHTML("<div>").append(this.$el).html()},template:mw.template.get("mobile.startup","icon.hogan")}),t.exports=o},"./src/mobile.startup/Overlay.js":function(t,e,i){var n=i("./src/mobile.startup/View.js"),s=i("./src/mobile.startup/Icon.js"),o=i("./src/mobile.startup/Button.js"),a=i("./src/mobile.startup/Anchor.js"),r=i("./src/mobile.startup/icons.js"),l=i("./src/mobile.startup/util.js"),c=i("./src/mobile.startup/Browser.js").getSingleton();function u(t){this.isIos=c.isIos(),this.useVirtualKeyboardHack=c.isIos(4)||c.isIos(5),this.hasLoadError=!1,n.call(this,l.extend({className:"overlay"},t))}i("./src/mobile.startup/mfExtend.js")(u,n,{hasFixedHeader:!0,fullScreen:!0,hideOnExitClick:!0,templatePartials:{header:mw.template.get("mobile.startup","header.hogan"),anchor:a.prototype.template,button:o.prototype.template},template:mw.template.get("mobile.startup","Overlay.hogan"),defaults:{saveMsg:mw.msg("mobile-frontend-editor-save"),cancelButton:r.cancel().toHtmlString(),backButton:new s({tagName:"button",name:"back",additionalClassNames:"back",label:mw.msg("mobile-frontend-overlay-close")}).toHtmlString(),headerButtonsListClassName:"",headerChrome:!1,spinner:r.spinner().toHtmlString()},events:{"click .cancel, .confirm, .initial-header .back":"onExitClick",click:"stopPropagation"},closeOnContentTap:!1,showSpinner:function(){this.$spinner.removeClass("hidden")},hideSpinner:function(){this.$spinner.addClass("hidden")},postRender:function(){this.$overlayContent=this.$(".overlay-content"),this.$spinner=this.$(".spinner"),this.isIos&&this.$el.addClass("overlay-ios"),this.$(".overlay-header h2 span").addClass("truncated-text"),this.setupEmulatedIosOverlayScrolling()},setupEmulatedIosOverlayScrolling:function(){var t=this;this.isIos&&this.hasFixedHeader&&(this.$(".overlay-content").on("touchstart",this.onTouchStart.bind(this)).on("touchmove",this.onTouchMove.bind(this)),setTimeout(function(){t._fixIosHeader(t.$("textarea, input"))},0))},onExitClick:function(t){t.preventDefault(),t.stopPropagation(),this.hideOnExitClick&&this.hide(),this.emit(u.EVENT_EXIT)},onTouchStart:function(t){this.startY=t.originalEvent.touches[0].pageY},onTouchMove:function(t){var e=t.originalEvent.touches[0].pageY,i=this.$overlayContent.outerHeight(),n=this.$overlayContent.prop("scrollHeight")-i;t.stopPropagation(),(0===this.$overlayContent.scrollTop()&&this.startY<e||this.$overlayContent.scrollTop()===n&&this.startY>e)&&t.preventDefault()},stopPropagation:function(t){t.stopPropagation()},show:function(){var t=this,e=l.getDocument(),i=l.getWindow();this.scrollTop=window.pageYOffset,this.fullScreen&&(e.addClass("overlay-enabled"),window.scrollTo(0,1)),this.closeOnContentTap&&e.find("#mw-mf-page-center").one("click",this.hide.bind(this)),this.isIos&&this.hasFixedHeader&&i.on("touchmove.ios",function(t){t.preventDefault()}).on("resize.ios",function(){t._resizeContent(i.height())}),this.$el.addClass("visible")},hide:function(){var t=l.getWindow(),e=l.getDocument();return this.fullScreen&&(e.removeClass("overlay-enabled"),window.scrollTo(window.pageXOffset,this.scrollTop)),this.$el.detach(),this.isIos&&t.off(".ios"),this.emit("hide"),!0},_resizeContent:function(t){this.$overlayContent.height(t-this.$(".overlay-header-container").outerHeight()-this.$(".overlay-footer-container").outerHeight())},_fixIosHeader:function(t){var e=this,i=l.getWindow();this.isIos&&(this._resizeContent(i.height()),t.on("focus",function(){setTimeout(function(){var t=0;e.useVirtualKeyboardHack&&(i.scrollTop(999),t=i.scrollTop(),i.scrollTop(0)),i.height()>t&&e._resizeContent(i.height()-t)},0)}).on("blur",function(){e._resizeContent(i.height()),i.scrollTop(0)}))},showHidden:function(t){this.$(".hideable").addClass("hidden"),this.$(t).removeClass("hidden")}}),u.EVENT_EXIT="Overlay-exit",t.exports=u},"./src/mobile.startup/View.js":function(t,e,i){var n=i("./src/mobile.startup/util.js"),s=i("./src/mobile.startup/mfExtend.js"),o=["events"],a=/^(\S+)\s*(.*)$/,r=0;function l(){var t=this;o.forEach(function(e){void 0!==t[e]&&mw.log.deprecate(t,e,t[e],"Setting `"+e+"` on the View is deprecated. Please use options.")}),this.initialize.apply(this,arguments)}OO.mixinClass(l,OO.EventEmitter),s(l,{tagName:"div",isTemplateMode:!1,template:void 0,templatePartials:{},defaults:{},initialize:function(t){var e=this;OO.EventEmitter.call(this),t=n.extend({},this.defaults,t),this.options=t,this.cid=function(t){var e=(++r).toString();return t?t+e:e}("view"),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),t.el?this.$el=$(t.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize(t):n.docReady(function(){e.$el=$(t.el),e._postInitialize(t)})},_postInitialize:function(t){var e=t.className;this.$el.addClass(e),!1!==t.isBorderBox&&this.$el.addClass("view-border-box"),this.render({})},preRender:function(){},postRender:function(){},render:function(t){var e,i;return n.extend(this.options,t),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(i=this.template.render(this.options,this.templatePartials),this.isTemplateMode?(e=$(i),this.$el.replaceWith(e),this.$el=e):this.$el.html(i)),this.postRender(),this.delegateEvents(),this},$:function(t){return this.$el.find(t)},delegateEvents:function(t){var e,i,n;if(t=t||this.options.events||this.events)for(i in this.undelegateEvents(),t)"function"!=typeof(n=t[i])&&(n=this[t[i]]),n&&(e=i.match(a),this.delegate(e[1],e[2],n.bind(this)))},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},parseHTML:n.parseHTML}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(t){l.prototype[t]=function(){return this.$el[t].apply(this.$el,arguments),this}}),t.exports=l},"./src/mobile.startup/icons.js":function(t,e,i){var n=i("./src/mobile.startup/Icon.js"),s=i("./src/mobile.startup/util.js");t.exports={CANCEL_GLYPH:"overlay-close",Icon:n,cancel:function(t){var e=t?"overlay-close-"+t:"overlay-close";return new this.Icon({tagName:"button",name:e,additionalClassNames:"cancel",label:mw.msg("mobile-frontend-overlay-close")})},spinner:function(t){return t=t||{},new this.Icon(s.extend(t,{name:"spinner",label:mw.msg("mobile-frontend-loading-message"),additionalClassNames:"spinner loading"}))},watchIcon:function(){return new this.Icon({name:"watch",additionalClassNames:"watch-this-article"})},watchedIcon:function(){return new this.Icon({name:"watched",additionalClassNames:"watch-this-article watched"})}}},"./src/mobile.startup/mfExtend.js":function(t,e){t.exports=function(t,e,i){var n;for(n in i?OO.inheritClass(t,e):(OO.initClass(t),i=e),i)t.prototype[n]=i[n]}},"./src/mobile.startup/util.js":function(t,e){t.exports={escapeSelector:function(t){return $.escapeSelector(t)},grep:function(){return $.grep.apply($,arguments)},docReady:function(t){return $(t)},when:function(){return $.when.apply($,arguments)},Deferred:function(){var t=$.Deferred(),e="Use Promise compatible methods `then` and `catch` instead.";return mw.log.deprecate(t,"fail",t.fail,e),mw.log.deprecate(t,"always",t.always,e),mw.log.deprecate(t,"done",t.done,e),t},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(t,e){return $($.parseHTML(t,e))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(t){return t.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey},repeatEvent:function(t,e,i,n){return t.on(i,function(t){return e.emit(i,t)},n)}}}}]);
//# sourceMappingURL=mobile.common.js.map.json