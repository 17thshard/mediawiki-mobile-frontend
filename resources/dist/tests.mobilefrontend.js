this.mfModules=this.mfModules||{},this.mfModules["tests.mobilefrontend"]=(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e){t.exports=function(t,e,i){var n;for(n in i?OO.inheritClass(t,e):(OO.initClass(t),i=e),i)t.prototype[n]=i[n]}},function(t,e){t.exports={escapeSelector:function(t){return $.escapeSelector(t)},grep:function(){return $.grep.apply($,arguments)},docReady:function(t){return $(t)},when:function(){return $.when.apply($,arguments)},Deferred:function(){var t=$.Deferred(),e="Use Promise compatible methods `then` and `catch` instead.";return mw.log.deprecate(t,"fail",t.fail,e),mw.log.deprecate(t,"always",t.always,e),mw.log.deprecate(t,"done",t.done,e),t},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(t,e){return $($.parseHTML(t,e))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(t){return t.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey},repeatEvent:function(t,e,i,n){return t.on(i,function(t){return e.emit(i,t)},n)}}},function(t,e,i){var n=i(1),o=i(0),a=/^(\S+)\s*(.*)$/,s=0;function r(){this.initialize.apply(this,arguments)}OO.mixinClass(r,OO.EventEmitter),o(r,{className:void 0,tagName:"div",isTemplateMode:!1,isBorderBox:!0,template:void 0,templatePartials:{},defaults:{},events:null,initialize:function(t){var e=this;OO.EventEmitter.call(this),t=n.extend({},this.defaults,t),this.options=t,this.cid=function(t){var e=(++s).toString();return t?t+e:e}("view"),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),t.el?this.$el=$(t.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize():n.docReady(function(){e.$el=$(t.el),e._postInitialize()})},_postInitialize:function(){this.$el.addClass(this.className),this.isBorderBox&&this.$el.addClass("view-border-box"),this.render(this.options)},preRender:function(){},postRender:function(){},render:function(t){var e;return n.extend(this.options,t),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(e=this.template.render(this.options,this.templatePartials),this.isTemplateMode?this.$el=$(e):this.$el.html(e)),this.postRender(),this.delegateEvents(),this},$:function(t){return this.$el.find(t)},delegateEvents:function(t){var e,i,n;if(t=t||this.events)for(i in this.undelegateEvents(),t)"function"!=typeof(n=t[i])&&(n=this[t[i]]),n&&(e=i.match(a),this.delegate(e[1],e[2],n.bind(this)))},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},parseHTML:n.parseHTML}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(t){r.prototype[t]=function(){return this.$el[t].apply(this.$el,arguments),this}}),t.exports=r},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){!function(){t.exports=this.sinon}()},function(t,e,i){var n="object"!=typeof window;t.exports={setUp:function(t,e){n&&(e.OO=e.OO||void 0,t.stub(e,"OO",i(24)))}}},function(t,e,i){var n=["seconds","minutes","hours","days","months","years"],o=i(1),a=[1,60,3600,86400,2592e3,31536e3];function s(t){for(var e=0;e<a.length&&t>a[e+1];)++e;return{value:Math.round(t/a[e]),unit:n[e]}}function r(t){return s(Math.round((new Date).getTime()/1e3)-t)}function l(t){return"seconds"===t.unit&&t.value<10}t.exports={getLastModifiedMessage:function(t,e,i,n){var a,s,c=[];return i=i||"unknown",l(a=r(t))?c.push("mobile-frontend-last-modified-with-user-just-now",i,e):c.push({seconds:"mobile-frontend-last-modified-with-user-seconds",minutes:"mobile-frontend-last-modified-with-user-minutes",hours:"mobile-frontend-last-modified-with-user-hours",days:"mobile-frontend-last-modified-with-user-days",months:"mobile-frontend-last-modified-with-user-months",years:"mobile-frontend-last-modified-with-user-years"}[a.unit],i,e,mw.language.convertNumber(a.value)),c.push(n||"#",mw.language.convertNumber(e?1:0),e?mw.util.getUrl("User:"+e):""),s=mw.message.apply(this,c).parse(),n?s:o.parseHTML("<div>").html(s).text()},getRegistrationMessage:function(t,e){var i,n=[];return e=e||"unknown",l(i=r(parseInt(t,10)))?n.push("mobile-frontend-joined-just-now",e):n.push({seconds:"mobile-frontend-joined-seconds",minutes:"mobile-frontend-joined-minutes",hours:"mobile-frontend-joined-hours",days:"mobile-frontend-joined-days",months:"mobile-frontend-joined-months",years:"mobile-frontend-joined-years"}[i.unit],e,mw.language.convertNumber(i.value)),mw.message.apply(this,n).parse()},timeAgo:s,getTimeAgoDelta:r,isNow:l,isRecent:function(t){return["seconds","minutes","hours"].indexOf(t.unit)>-1}}},function(t,e,i){var n="object"!=typeof window;t.exports={setUp:function(t,e){n&&(e.$=e.$||void 0,t.stub(e,"$",i(17)))},tearDown:function(){n&&delete i.c[17]}}},function(t,e,i){var n=i(0),o=i(9),a=i(2);function s(t){var e=this;t.tag="h"+t.level,this.line=t.line,this.text=t.text,this.hasReferences=t.hasReferences||!1,this.id=t.id||null,this.anchor=t.anchor,this.children=[],(t.children||[]).forEach(function(t){e.children.push(new s(t))}),a.call(this,t)}n(s,a,{template:mw.template.get("mobile.startup","Section.hogan"),defaults:{line:void 0,text:"",spinner:o.spinner().toHtmlString()}}),t.exports=s},function(t,e,i){var n=i(10),o=i(1);t.exports={spinner:function(t){return t=t||{},new n(o.extend(t,{name:"spinner",label:mw.msg("mobile-frontend-loading-message"),additionalClassNames:"spinner loading"}))}}},function(t,e,i){var n=i(0),o=i(2);function a(t){t.hasText&&(t.modifier="mw-ui-icon-before"),t.href&&(t.tagName="a"),o.call(this,t)}n(a,o,{preRender:function(){this.setRotationClass()},setRotationClass:function(){var t=this.options;if(t.rotation)switch(t.rotation){case-180:case 180:t._rotationClass="mf-mw-ui-icon-rotate-flip";break;case-90:t._rotationClass="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:t._rotationClass="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}},isTemplateMode:!0,defaults:{rotation:0,hasText:!1,href:void 0,glyphPrefix:"mf",tagName:"div",isSmall:!1,base:"mw-ui-icon",name:"",modifier:"mw-ui-icon-element",title:""},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.base+"-"+this.options.glyphPrefix+"-"+this.options.name},toHtmlString:function(){return this.parseHTML("<div>").append(this.$el).html()},template:mw.template.get("mobile.startup","icon.hogan")}),t.exports=a},function(t,e,i){var n=i(0),o=i(2);function a(){o.apply(this,arguments)}n(a,o,{defaults:{filename:void 0},isBorderBox:!1,postRender:function(){this.options.description=this.$el.siblings(".thumbcaption").text()},getDescription:function(){return this.options.description},getFileName:function(){return this.options.filename}}),t.exports=a},function(t,e,i){var n,o=i(1);function a(t){var e=function(){var i=this["__cache"+e.cacheId]||(this["__cache"+e.cacheId]={}),n=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,n)?i[n]:i[n]=t.apply(this,arguments)};return e.cacheId=Date.now().toString()+Math.random().toString(),e}function s(t,e){this.userAgent=t,this.$el=e,this._fixIosLandscapeBug()}s.prototype={_fixIosLandscapeBug:function(){var t=this;this.$el.find('meta[name="viewport"]')[0]&&(this.isIos(4)||this.isIos(5))&&(this.lockViewport(),document.addEventListener("gesturestart",function(){t.lockViewport()},!1))},isIos:a(function(t){var e=this.userAgent,i=/ipad|iphone|ipod/i.test(e);if(!i||!t)return i;switch(t){case 8:return/OS 8_/.test(e)||/Version\/8/.test(e);case 4:return/OS 4_/.test(e);case 5:return/OS 5_/.test(e);default:return!1}}),lockViewport:function(){this.$el&&this.$el.find('meta[name="viewport"]').attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},isWideScreen:a(function(){var t=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=t||window.innerHeight>=t}),supportsAnimations:a(function(){var t=document.createElement("foo").style;function e(e){return e in t||"webkit"+e[0].toUpperCase()+e.slice(1)in t}return e("animationName")&&e("transform")&&e("transition")}),supportsTouchEvents:a(function(){return"ontouchstart"in window}),supportsGeoLocation:a(function(){return"geolocation"in navigator})},s.getSingleton=function(){var t;return n||(t=o.getDocument(),n=new s(window.navigator.userAgent,t)),n},t.exports=s},function(t,e){function i(){this._cache={}}function n(){}i.prototype.get=function(t){return this._cache[t]},i.prototype.set=function(t,e){this._cache[t]=e},n.prototype.get=function(){},n.prototype.set=function(){},t.exports={MemoryCache:i,NoCache:n}},function(t,e){function i(){this._register={},OO.EventEmitter.call(this)}i.prototype={require:function(t){var e,i,n=this._register;function o(){if(!Object.hasOwnProperty.call(n,t))throw new Error("MobileFrontend Module not found: "+t);return n[t]}i=t.split("/");try{return(e=mw.loader.require(i[0]))[i[1]]?e[i[1]]:o()}catch(t){return o()}},define:function(t,e){var i=this;if(Object.hasOwnProperty.call(this._register,t))throw new Error("Module already exists: "+t);return this._register[t]=e,{deprecate:function(n){i.deprecate(n,e,t)}}},deprecate:function(t,e,i){var n;i&&(n="Use "+i+" instead."),mw.log.deprecate(this._register,t,e,n)}},OO.mixinClass(i,OO.EventEmitter),t.exports=i},function(t,e,i){var n=mw.html,o=i(0),a=i(6),s=i(1),r=i(8),l=i(11),c=i(2),u=mw.config.get("wgMFMobileFormatterHeadings").join(","),p=["noviewer","metadata"];function d(t){var e;void 0===t.thumbnail&&(t.thumbnail=!1),this.options=t,t.languageUrl=mw.util.getUrl("Special:MobileLanguages/"+t.title),c.call(this,t),t.displayTitle=this.getDisplayTitle(),this.title=t.title,this.displayTitle=t.displayTitle,this.thumbnail=t.thumbnail,this.url=t.url||mw.util.getUrl(t.title),this.id=t.id,this.isMissing=void 0!==t.isMissing?t.isMissing:0===t.id,(e=this.thumbnail)&&e.width&&(this.thumbnail.isLandscape=e.width>e.height),this.wikidataDescription=t.wikidataDescription}o(d,c,{defaults:{id:0,title:"",displayTitle:"",namespaceNumber:0,protection:{edit:["*"]},sections:[],isMissing:!1,isMainPage:!1,url:void 0,thumbnail:{isLandscape:void 0,source:void 0,width:void 0,height:void 0}},isBorderBox:!1,getDisplayTitle:function(){return this.options.displayTitle||n.escape(this.options.title)},inNamespace:function(t){return this.options.namespaceNumber===mw.config.get("wgNamespaceIds")[t]},findSectionHeadingByIndex:function(t){return t<1?this.$():this.$(u).filter('.mw-parser-output > *, [class^="mf-section-"] > *').eq(t-1)},findChildInSectionLead:function(t,e){var i,n,o,a,s=u;function r(t){return t.find(e).addBack()}return 0===t?(a=this.getLeadSectionElement())&&a.length?r(a.children(e)):(i=this.findSectionHeadingByIndex(1)).length?r(i.prevAll(e)):this.$(e):(i=this.findSectionHeadingByIndex(t)).hasClass("section-heading")?(n=(o=i.next()).find(s).eq(0)).length?r(n.prevAll(e)):r(o.children(e)):(n=i.eq(0).nextAll(s).eq(0),i.nextUntil(n,e))},getLeadSectionElement:function(){return this.$(".mf-section-0").length?this.$(".mf-section-0"):null},isWikiText:function(){return"wikitext"===mw.config.get("wgPageContentModel")},isMainPage:function(){return this.options.isMainPage},isWatched:function(){return this.options.isWatched},getRevisionId:function(){return this.options.revId},getTitle:function(){return this.options.title},getId:function(){return this.options.id},getNamespaceId:function(){var t=this.options.title.split(":");return t[1]&&mw.config.get("wgNamespaceIds")[t[0].toLowerCase().replace(" ","_")]||0},isTalkPage:function(){var t=this.getNamespaceId();return t>0&&t%2==1},preRender:function(){this.sections=[],this._sectionLookup={},this.title=this.options.title,this.options.sections.forEach(function(t){var e=new r(t);this.sections.push(e),this._sectionLookup[e.id]=e}.bind(this))},getThumbnails:function(){var t=this.$el,e="."+p.join(",."),i=[];return this._thumbs||(t.find("a.image, a.thumbimage").not(e).each(function(){var n=t.find(this),o=n.find(".lazy-image-placeholder"),a=0===n.parents(e).length&&0===n.find(e).length,s=n.attr("href").match(/title=([^/&]+)/),r=n.attr("href").match(/[^/]+$/);o.length&&a&&(a=!new RegExp("\\b("+p.join("|")+")\\b").test(o.data("class"))),a&&(s||r)&&i.push(new l({el:n,filename:decodeURIComponent(s?s[1]:r[0])}))}),this._thumbs=i),this._thumbs},getSection:function(t){return this._sectionLookup[t]},getSections:function(){return this.sections},getRedLinks:function(){return this.$(".new")}}),d.newFromJSON=function(t){var e,i,o=t.thumbnail,r=t.pageprops||{displaytitle:n.escape(t.title)},l=t.terms;return(r||l)&&(i=l&&l.label?n.escape(l.label[0]):r.displaytitle),t.wikidataDescription=t.description||void 0,o&&(t.thumbnail.isLandscape=o.width>o.height),t.revisions&&t.revisions[0]&&(e=t.revisions[0],t.lastModified=a.getLastModifiedMessage(new Date(e.timestamp).getTime()/1e3,e.user)),new d(s.extend(t,{id:t.pageid,isMissing:!!t.missing,url:mw.util.getUrl(t.title),displayTitle:i}))},d.HEADING_SELECTOR=u,t.exports=d},function(t,e,i){var n="object"!=typeof window,o=n&&i(21);t.exports={setUp:function(t,e){n&&(e.window=e.window||void 0,e.document=e.document||void 0,t.stub(e,"window",(new o.JSDOM).window),t.stub(e,"document",window.document))}}},function(t,e){!function(){t.exports=this.jquery}()},function(t,e,i){var n="object"!=typeof window,o=i(27);t.exports={setUp:function(t,e){n&&(e.mw=e.mw||void 0,t.stub(e,"mw",o()))}}},function(t,e,i){i(20),i(22),i(23),i(25),i(26),i(28),i(29),t.exports=i(30)},function(t,e,i){(function(t){var e,n,o=i(12),a=i(16),s=i(7),r=i(4);QUnit.module("MobileFrontend Browser.js",{beforeEach:function(){n=r.sandbox.create(),a.setUp(n,t),s.setUp(n,t),e=$("<html>")},afterEach:function(){n.restore()}}),QUnit.test("isIos()",function(t){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",e),n=new o("Mozilla/5.0 (iPad; CPU OS 4_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",e),a=new o("Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",e),s=new o("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",e);t.strictEqual(i.isIos(),!0),t.strictEqual(i.isIos(8),!1),t.strictEqual(i.isIos(4),!1),t.strictEqual(i.isIos(5),!1),t.strictEqual(s.isIos(),!0),t.strictEqual(s.isIos(8),!0),t.strictEqual(n.isIos(4),!0),t.strictEqual(a.isIos(5),!0)}),QUnit.test("Methods are cached",function(t){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",e),n=new o("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",e),a=new o("Android 2",e);function s(t,e){return t["__cache"+t[e].cacheId]}t.strictEqual(i.isIos(),!0),t.strictEqual(i.isIos(8),!1),t.strictEqual(a.isIos(8),!1),t.strictEqual(n.isIos(),!0),t.strictEqual(n.isIos(8),!0),t.strictEqual(Object.keys(s(i,"isIos")).length,2,"isIos on ipad cached as expected"),t.strictEqual(Object.keys(s(a,"isIos")).length,1,"isIos on android cached as expected"),t.strictEqual(Object.keys(s(n,"isIos")).length,2,"isIos on iphone cached as expected")})}).call(this,i(3))},function(t,e){!function(){t.exports=this.jsdom}()},function(t,e,i){var n=new(0,i(13).MemoryCache);QUnit.module("MobileFrontend cache.js"),QUnit.test("cache set() and get()",function(t){n.set("key","value"),t.strictEqual(n.get("key"),"value")})},function(t,e,i){(function(t){var e,n,o=i(4),a=i(5);QUnit.module("MobileFrontend mfExtend.test.js",{beforeEach:function(){n=o.sandbox.create(),a.setUp(n,t),e=i(0)},afterEach:function(){n.restore()}}),QUnit.test("mfExtend() - extending from constructor",function(t){function i(){}function n(){}e(i,n,{}),t.strictEqual(i.prototype instanceof n,!0)}),QUnit.test("mfExtend() - extending from object",function(t){var i,n=new function(){this.protoMethod=function(){return!0}};function o(){}e(o,n),i=new o,t.strictEqual(i.protoMethod(),!0)}),QUnit.test("mfExtend() - extending from constructor with overrides",function(t){var i;function n(){}e(n,function(){this.protoMethod=function(){return!0}},{protoMethod:function(){return!1}}),i=new n,t.strictEqual(i.protoMethod(),!1)})}).call(this,i(3))},function(t,e){!function(){t.exports=this.oojs}()},function(t,e,i){(function(t){var e,n,o=i(5),a=i(4);QUnit.module("MobileFrontend ModuleLoader",{beforeEach:function(){n=a.sandbox.create(),o.setUp(n,t),e=i(14),this.loader=new e},afterEach:function(){n.restore()}}),QUnit.test("#require",function(t){this.loader.define("foo",1),this.loader.define("bar",5),t.strictEqual(this.loader.require("foo"),1,"Returns appropriate module"),t.strictEqual(this.loader.require("bar"),5,"Returns appropriate module"),t.throws(function(){this.loader.require("undefinedmodule")},"Cannot require an undefined module."),t.throws(function(){this.loader.require("mobile.modules/Foo")},"Cannot require an undefined export on a known module.")}),QUnit.test("#define",function(t){var e=this.loader;e.define("foo",1),e.define("bar",5),t.throws(function(){e.define("bar",50)},"Cannot define two modules with the same name"),t.strictEqual(this.loader.require("bar"),5,"Returns first definition of module.")})}).call(this,i(3))},function(t,e,i){(function(t){var e,n,o,a,s,r,l=i(7),c=i(18),u=i(5),p=i(4),d='<div class="mw-parser-output">';QUnit.module("MobileFrontend Page",{beforeEach:function(){var h=function(t){return'<div class="ambox">'+t+"</div>"},f=function(t){return'<h2 class="section-heading">'+t+"</h2>"},m=function(t,e){var i=e||"h3";return"<"+i+">"+t+"</"+i+">"},g=function(t,e){return'<div class="mf-section-'+t+'">'+e+"</div>"};n=p.sandbox.create(),c.setUp(n,t),t.mw.config.set("wgMFMobileFormatterHeadings",["h1","h2","h3","h4","h5","h6"]),l.setUp(n,t),u.setUp(n,t),e=i(15),o=new e({el:$(d).html("<p>lead</p>"+h("a0"))}),a=new e({el:$(d).html(g(0,h("a0")+'<p>lead</p><div class="toc-mobile view-border-box"><h2></h2><div></div></div>')+f("1")+g(1,h("a1")+m("1.1")+h("a1.1")))}),s=new e({el:$(d).html("<p>lead</p>"+h("a0")+m("1","h2")+h("a1")+m("1.1")+h("a1.1"))}),r=new e({el:$(d).html(g(0,"<p>lead</p>"+h("a0"))+f("1")+g(1,h("a1")+m("1.1")+h("a1.1")+m("1.1.1","h4")+h("a1.1.1")+m("1.1.2","h4")+h("a1.1.2")+m("1.2")+h("a1.1"))+f("2")+g(6,h("a2"))+f("3")+g(7,h("a3"))+f("Section with nested Ambox")+g(8,h("<p>nested-ambox-parent,</p>"+h("nested-ambox-1,")+h("nested-ambox-2")))+f("Sub-section with nested Ambox")+g(9,h("<p>nested-ambox-parent,</p>"+h("nested-ambox-1,")+h("nested-ambox-2"))+m("subsection heading")+m("Another subsection heading")))})},afterEach:function(){n.restore()}}),QUnit.test("#findInSectionLead",function(t){[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[3,"","h4","selector does not match",".foo"],[111,"","Non-existent section"]].forEach(function(e,i){var n=e[0],o=e[1],a=e[2],r=e[3]||".ambox";t.strictEqual(s.findChildInSectionLead(n,r).text(),o,"Found correct text in desktop test "+i+" case: "+a)}),[[0,"a0","lead section"],[3,"","h4","selector does not match",".foo"],[111,"","Non-existent section"]].forEach(function(e){t.strictEqual(o.findChildInSectionLead(e[0],e[3]||".ambox").text(),e[1],"Stub: Found correct text in desktop test case:"+e[2])}),[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[3,"a1.1.1","h4"],[3,"","h4","selector does not match",".foo"],[7,"a3","h2 later"],[111,"","Non-existent section"]].forEach(function(e){t.strictEqual(r.findChildInSectionLead(e[0],e[3]||".ambox").text(),e[1],"Mobile: Found correct text in test case:"+e[2])}),[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[111,"","Non-existent section"]].forEach(function(e){t.strictEqual(a.findChildInSectionLead(e[0],e[3]||".ambox").text(),e[1],"Mobile with table of contents: Found correct text in test case:"+e[2])}),[[8,".ambox","nested-ambox-parent,nested-ambox-1,nested-ambox-2","Nested elements in section"],[9,".ambox","nested-ambox-parent,nested-ambox-1,nested-ambox-2","Nested elements in subsection"]].forEach(function(e){var i=r.findChildInSectionLead(e[0],e[1]);t.strictEqual(i.not(i.children()).text(),e[2],"Mobile: Found correct text in test case:"+e[3])})}),QUnit.test("#isMainPage",function(t){var i=new e({title:"Main Page",isMainPage:!0}),n=new e({title:"Foo"});t.strictEqual(i.isMainPage(),!0,"check main page flag is updated"),t.strictEqual(n.isMainPage(),!1,"check not marked as main page")}),QUnit.test("#getThumbnails",function(t){var i,n,o,a,s,r,l,c,u,p;i=new e({el:$('<div><a href="/wiki/File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),n=new e({el:$("<div>")}),o=new e({el:$('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),a=i.getThumbnails(),s=new e({el:$('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box noviewer"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),r=new e({el:$('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" class="metadata" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),p=new e({el:$('<div class="noviewer"><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),l=new e({el:$('<div><a href="/wiki/File:Design_portal_logo.jpg" class="image"><noscript><img alt="icon" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" width="28" height="28" class="noviewer" data-file-width="151" data-file-height="151"></noscript><span class="lazy-image-placeholder" style="width: 28px;height: 28px;" data-src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" data-alt="icon" data-width="28" data-height="28" data-class="noviewer">&nbsp;</span></a></div>')}),u=new e({el:$('<div><a href="/wiki/File:Design_portal_logo.jpg" class="image"><noscript><img alt="icon" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" width="28" height="28" class="noviewer" data-file-width="151" data-file-height="151"></noscript><span class="lazy-image-placeholder" style="width: 28px;height: 28px;" data-src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" data-alt="icon" data-width="28" data-height="28" data-class="wot noviewerz bar">&nbsp;</span></a></div>')}),c=new e({el:$('<div><table class="plainlinks metadata ambox ambox-content ambox-Unreferenced" role="presentation"><tr><td class="mbox-image"><div style="width:52px"><a href="/wiki/File:Question_book-new.svg" class="image"><noscript><img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" width="50" height="39" data-file-width="262" data-file-height="204"></noscript><span class="lazy-image-placeholder" style="width: 50px;height: 39px;" data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" data-alt="" data-width="50" data-height="39" data-srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/75px-Question_book-new.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/100px-Question_book-new.svg.png 2x"> </span></a></div></td></tr></table>')}),t.strictEqual(a.length,1,"Found expected number of thumbnails."),t.strictEqual(a[0].getFileName(),"File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg","Found expected filename."),a=n.getThumbnails(),t.strictEqual(a.length,0,"This page has no thumbnails."),a=o.getThumbnails(),t.strictEqual(a.length,1,"Found expected number of thumbnails."),t.strictEqual(a[0].getFileName(),"File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg","Found expected filename."),a=s.getThumbnails(),t.strictEqual(a.length,0,"This page has no thumbnails."),a=r.getThumbnails(),t.strictEqual(a.length,0,"This page has no thumbnails."),a=p.getThumbnails(),t.strictEqual(a.length,0,"Images inside a container with the class are not included. Images inside tables for example."),a=l.getThumbnails(),t.strictEqual(a.length,0,"Consider whether the class is on an image which has not been lazy loaded."),a=c.getThumbnails(),t.strictEqual(a.length,0,"Consider whether the lazy loaded image is inside a .metadata container."),a=u.getThumbnails(),t.strictEqual(a.length,1,"Thumbnail found if there is a typo.")}),QUnit.test("#getNamespaceId",function(t){[["Main Page",0],["San Francisco",0],["San Francisco: Talk:2",0],["San Francisco: The Sequel",0],["Talk:Foo",1],["Project:Bar",4],["User talk:Jon",3],["Special:Nearby",-1]].forEach(function(i){var n=new e({title:i[0]});t.strictEqual(n.getNamespaceId(),i[1],"Check namespace is as expected")})}),QUnit.test("#isTalkPage",function(t){[["Main Page",!1],["San Francisco",!1],["San Francisco: Talk:2",!1],["San Francisco: The Sequel",!1],["Talk:Foo",!0],["Project talk:Bar",!0],["User talk:Jon",!0],["Special:Nearby",!1]].forEach(function(i){var n=new e({title:i[0]});t.strictEqual(n.isTalkPage(),i[1],"Check test is as expected")})}),QUnit.test("#isMissing",function(t){var i,n;i=[new e({title:"Hello",id:0}),new e({title:"Hello",id:5,isMissing:!0}),new e({title:"Hello",isMissing:!0})],n=[new e({title:"Hello",id:4}),new e({title:"Hello",id:4,isMissing:!1}),new e({title:"Hello",isMissing:!1}),new e({title:"Hello",id:0,isMissing:!1})],i.forEach(function(e,i){t.strictEqual(e.isMissing,!0,"page "+i+" is missing")}),n.forEach(function(e,i){t.strictEqual(e.isMissing,!1,"page "+i+" is not missing")})}),QUnit.test("#allowsXSS",function(t){var i=new e({title:'<script>alert("oops, XSS possible!");<\/script>'});t.strictEqual(i.getDisplayTitle(),"&lt;script&gt;alert(&quot;oops, XSS possible!&quot;);&lt;/script&gt;","Check against XSS in Page.js constructor displaytitle (when title set)"),[{thumbnail:!1,title:'<script>alert("oops, XSS possible!");<\/script>',terms:!1,testDesc:"Check against XSS in Page.newFromJSON displaytitle (when title set)"},{thumbnail:!1,pageprops:[],terms:{label:['<script>alert("oops, XSS possible!");<\/script>']},testDesc:"Check against XSS in Page.newFromJSON displaytitle (when Wikibase label set)"}].forEach(function(n){i=e.newFromJSON(n),t.strictEqual(i.getDisplayTitle(),"&lt;script&gt;alert(&quot;oops, XSS possible!&quot;);&lt;/script&gt;",n.testDesc)})})}).call(this,i(3))},function(t,e){var i={special:-1,talk:1,user_talk:3,project:4,project_talk:5};t.exports=function(){var t={wgNamespaceIds:i};return{config:{get:function(e){return t[e]},set:function(e,i){t[e]=i}},html:{escape:function(t){return t.replace(/['"<>&]/g,function(t){switch(t){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}})}},log:{deprecate:function(){}},msg:function(t){return t},now:Date.now.bind(Date),template:{get:function(){}},user:{},util:{getUrl:function(t){return t}}}}},function(t,e,i){var n=i(6);QUnit.module("MobileFrontend time.js"),QUnit.test("timeAgo()",function(t){t.deepEqual(n.timeAgo(40),{value:40,unit:"seconds"}),t.deepEqual(n.timeAgo(149),{value:2,unit:"minutes"}),t.deepEqual(n.timeAgo(150),{value:3,unit:"minutes"}),t.deepEqual(n.timeAgo(7500),{value:2,unit:"hours"}),t.deepEqual(n.timeAgo(9e4),{value:1,unit:"days"}),t.deepEqual(n.timeAgo(9e6),{value:3,unit:"months"}),t.deepEqual(n.timeAgo(32e6),{value:1,unit:"years"}),t.deepEqual(n.timeAgo(102e6),{value:3,unit:"years"})})},function(t,e,i){(function(t){var e,n,o=i(16),a=i(18),s=i(7),r=i(5),l=i(4);QUnit.module("MobileFrontend util.js",{beforeEach:function(){n=l.sandbox.create(),o.setUp(n,t),a.setUp(n,t),s.setUp(n,t),r.setUp(n,t),e=i(1)},afterEach:function(){s.tearDown(),n.restore()}}),QUnit.test("escapeSelector()",function(t){t.strictEqual(e.escapeSelector("#selector-starts-with-hash"),"\\#selector-starts-with-hash")}),QUnit.test("grep()",function(t){t.deepEqual(e.grep([1,2],function(t){return t>1}),[2])}),QUnit.test("docReady()",function(t){var i=e.docReady();t.strictEqual(i instanceof $,!0)}),QUnit.test("when()",function(t){return e.when({resolved:!0}).then(function(e){t.strictEqual(e.resolved,!0)})}),QUnit.test("Deferred() - resolve",function(t){var i=new e.Deferred;return i.resolve("response"),i.then(function(e){t.strictEqual(e,"response")})}),QUnit.test("Deferred() - reject",function(t){var i=new e.Deferred;return i.reject("response"),i.catch(function(e){t.strictEqual(e,"response")})}),QUnit.test("getDocument()",function(t){t.strictEqual(e.getDocument().length,1)}),QUnit.test("getWindow()",function(t){t.strictEqual(e.getWindow().length,1)}),QUnit.test("parseHTML()",function(t){var i=e.parseHTML("<p>element content</p>",document);t.strictEqual("object"==typeof i,!0),t.strictEqual(i[0].innerHTML,"element content")}),QUnit.test("parseHTML()",function(t){var i=e.parseHTML("<p>element content</p>",document);t.strictEqual("object"==typeof i,!0),t.strictEqual(i[0].innerHTML,"element content")}),QUnit.test("isNumeric()",function(t){t.strictEqual(e.isNumeric(123),!0),t.strictEqual(e.isNumeric("123"),!0),t.strictEqual(e.isNumeric("The string 123 is true? I don't like it."),!1),t.strictEqual(e.isNumeric(NaN),!1)}),QUnit.test("extend()",function(t){var i={a:"apple"};e.extend(i,{b:"banana"}),t.strictEqual(JSON.stringify(i),'{"a":"apple","b":"banana"}')}),QUnit.test("escapeHash()",function(t){t.strictEqual(e.escapeHash("#escape:...hash"),"#escape\\:\\.\\.\\.hash")}),QUnit.test("isModifiedEvent() - true",function(t){var i=document.createElement("div");i.addEventListener("click",function(i){t.strictEqual(e.isModifiedEvent(i),!0)}),i.dispatchEvent(new window.MouseEvent("click",{ctrlKey:!0}))}),QUnit.test("isModifiedEvent() - false",function(t){var i=document.createElement("div");i.addEventListener("click",function(i){t.strictEqual(e.isModifiedEvent(i),!1)}),i.dispatchEvent(new window.MouseEvent("click"))}),QUnit.test("repeatEvent",function(t){var i=new OO.EventEmitter,n=new OO.EventEmitter;e.repeatEvent(n,i,"test"),i.on("test",function(e){t.strictEqual(e,"test data","proxy responds to source events correctly")}),n.emit("test","test data")})}).call(this,i(3))},function(t,e,i){(function(t){var e,n,o=i(31),a=i(7),s=i(0),r=i(5),l=i(4);QUnit.module("MobileFrontend mobile.startup/View",{beforeEach:function(){n=l.sandbox.create(),a.setUp(n,t),r.setUp(n,t),e=i(2)},afterEach:function(){n.restore()}}),QUnit.test("View",function(t){var i=new e({el:"body"});t.ok(i.$el instanceof $,"assign jQuery object to $el"),t.strictEqual(i.$el[0].tagName.toUpperCase(),"BODY","assign proper jQuery object to $el")}),QUnit.test("View, jQuery proxy functions",function(t){var i=new e({el:"body"});["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(e){var o=n.stub(i.$el,e);i[e]("test",1),t.ok(o.calledWith("test",1)),o.restore()})}),QUnit.test("View extended, with el property",function(t){var i,n;function o(){e.apply(this,arguments)}s(o,e,{firstHeading:function(){return this.$("h1").text()}}),i=$('<div id="testView"><h1>Test</h1></div>').appendTo("body"),n=new o({el:"#testView"}),t.strictEqual(n.firstHeading(),"Test","register additional functions"),i.remove()}),QUnit.test("View extended, with defined template",function(t){var i;function n(){e.apply(this,arguments)}s(n,e,{className:"my-class",template:o.compile("<h1>{{title}}</h1><p>{{content}}</p>"),title:function(){return this.$("h1").text()},content:function(){return this.$("p").text()}}),i=new n({title:"Test",content:"Some content"}),t.strictEqual(i.$el[0].tagName.toUpperCase(),"DIV","wrap template in <div>"),t.strictEqual(i.$el.hasClass("my-class"),!0,"set class for $el"),t.strictEqual(i.title(),"Test","fill template with data from options"),t.strictEqual(i.content(),"Some content","fill template with data from options")}),QUnit.test("View extended, with partials",function(t){var i;function n(){e.apply(this,arguments)}function a(){n.apply(this,arguments)}s(n,e,{template:o.compile("<h1>{{title}}</h1>{{>content}}")}),s(a,n,{templatePartials:{content:o.compile("<p>{{text}}</p>")}}),i=new a({title:"Test",text:"Some content"}),t.strictEqual(i.$("h1").text(),"Test","fill template with data from options"),t.strictEqual(i.$("p").text(),"Some content","fill partial with data from options")}),QUnit.test("View extended, extending partials",function(t){var i;function n(){e.apply(this,arguments)}function o(){n.apply(this,arguments)}s(n,e,{templatePartials:{a:1,b:2}}),s(o,n,{templatePartials:$.extend(n.prototype.templatePartials,{b:3,c:4})}),i=new o,t.deepEqual(i.templatePartials,{a:1,b:3,c:4})}),QUnit.test("View extended, extending defaults",function(t){var i;function n(){e.apply(this,arguments)}function o(){n.apply(this,arguments)}s(n,e,{defaults:{a:1,b:2}}),s(o,n,{defaults:$.extend(n.prototype.defaults,{b:3,c:4})}),i=new o({c:5}),t.deepEqual(i.options,{a:1,b:3,c:5})}),QUnit.test("View#preRender",function(t){var i;function n(){e.apply(this,arguments)}s(n,e,{template:o.compile("<p>{{text}}</p>"),preRender:function(){this.options.text="hello"}}),i=new n,t.strictEqual(i.$el.html(),"<p>hello</p>","manipulate template data")}),QUnit.test("View#postRender",function(t){var i=n.spy();function o(){e.apply(this,arguments)}s(o,e,{postRender:function(){i()}}),new o,t.strictEqual(i.callCount,1,"invoke postRender")}),QUnit.test("View#delegateEvents",function(t){var i;function n(){e.apply(this,arguments)}s(n,e,{template:o.compile("<p><span>test</span></p>"),events:{"click p span":function(e){e.preventDefault(),t.ok(!0,"Span was clicked and handled")},"click p":"onParagraphClick",click:"onClick"},onParagraphClick:function(e){e.preventDefault(),t.ok(!0,"Paragraph was clicked and handled")},onClick:function(e){e.preventDefault(),t.ok(!0,"View was clicked and handled")}}),(i=new n).appendTo("body"),i.$el.find("span").trigger("click"),i.$el.find("p").trigger("click"),i.$el.trigger("click"),i.undelegateEvents(),i.$el.find("span").trigger("click"),i.$el.find("p").trigger("click"),i.$el.trigger("click")}),QUnit.test("View#render (with isTemplateMode)",function(t){var i,n;function a(){e.apply(this,arguments)}function r(){e.apply(this,arguments)}s(a,e,{template:o.compile('<p class="foo"><span>test</span></p>'),isTemplateMode:!0}),s(r,e,{className:"bar",template:o.compile('<p class="foo"><span>test</span></p>')}),i=new a,n=new r,i.render(),n.render(),t.ok(i.$el.hasClass("foo")),t.ok(n.$el.hasClass("bar"))}),QUnit.test("View#render events (with isTemplateMode)",function(t){var i;function n(){e.apply(this,arguments)}s(n,e,{events:{"click span":"onClick"},onClick:function(){this.$el.empty().text("hello world")},template:o.compile('<p class="foo"><span>test</span></p>'),isTemplateMode:!0}),(i=new n).$("span").trigger("click"),t.strictEqual(i.$el.text(),"hello world","event was called"),t.strictEqual(i.$("span").length,0,"span disappeared"),(i=new n).render(),i.$("span").trigger("click"),t.strictEqual(i.$el.text(),"hello world","event was called"),t.strictEqual(i.$("span").length,0,"span disappeared")})}).call(this,i(3))},function(t,e,i){!function(t,e){t.Template=function(t,e,i,n){this.r=t||this.r,this.c=i,this.options=n,this.text=e||"",this.buf=""},t.Template.prototype={r:function(t,e,i){return""},v:function(t){return t=l(t),r.test(t)?t.replace(i,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(a,"&#39;").replace(s,"&quot;"):t},t:l,render:function(t,e,i){return this.ri([t],e||{},i)},ri:function(t,e,i){return this.r(t,e,i)},rp:function(t,e,i,n){var o=i[t];return o?(this.c&&"string"==typeof o&&(o=this.c.compile(o,this.options)),o.ri(e,i,n)):""},rs:function(t,e,i){var n=t[t.length-1];if(c(n))for(var o=0;o<n.length;o++)t.push(n[o]),i(t,e,this),t.pop();else i(t,e,this)},s:function(t,e,i,n,o,a,s){var r;return(!c(t)||0!==t.length)&&("function"==typeof t&&(t=this.ls(t,e,i,n,o,a,s)),r=""===t||!!t,!n&&r&&e&&e.push("object"==typeof t?t:e[e.length-1]),r)},d:function(t,e,i,n){var o=t.split("."),a=this.f(o[0],e,i,n),s=null;if("."===t&&c(e[e.length-2]))return e[e.length-1];for(var r=1;r<o.length;r++)a&&"object"==typeof a&&o[r]in a?(s=a,a=a[o[r]]):a="";return!(n&&!a)&&(n||"function"!=typeof a||(e.push(s),a=this.lv(a,e,i),e.pop()),a)},f:function(t,e,i,n){for(var o=!1,a=null,s=!1,r=e.length-1;r>=0;r--)if((a=e[r])&&"object"==typeof a&&t in a){o=a[t],s=!0;break}return s?(n||"function"!=typeof o||(o=this.lv(o,e,i)),o):!n&&""},ho:function(t,e,i,n,o){var a=this.c,s=this.options;return s.delimiters=o,n=null==(n=t.call(e,n))?String(n):n.toString(),this.b(a.compile(n,s).render(e,i)),!1},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,i,n,o,a,s){var r,l=e[e.length-1];if(!n&&this.c&&t.length>0)return this.ho(t,l,i,this.text.substring(o,a),s);if("function"==typeof(r=t.call(l))){if(n)return!0;if(this.c)return this.ho(r,l,i,this.text.substring(o,a),s)}return r},lv:function(t,e,i){var n=e[e.length-1],o=t.call(n);return"function"==typeof o&&(o=l(o.call(n)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(n,i):l(o)}};var i=/&/g,n=/</g,o=/>/g,a=/\'/g,s=/\"/g,r=/[&<>\"\']/;function l(t){return String(null===t||void 0===t?"":t)}var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(e),function(t){var e=/\S/,i=/\"/g,n=/\n/g,o=/\r/g,a=/\\/g,s={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};function r(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function l(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function c(t,e,i){if(e.charAt(i)!=t.charAt(0))return!1;for(var n=1,o=t.length;n<o;n++)if(e.charAt(i+n)!=t.charAt(n))return!1;return!0}function u(t,e){for(var i=0,n=e.length;i<n;i++)if(e[i].o==t.n)return t.tag="#",!0}function p(t,e,i){for(var n=0,o=i.length;n<o;n++)if(i[n].c==t&&i[n].o==e)return!0}function d(t){return t.replace(a,"\\\\").replace(i,'\\"').replace(n,"\\n").replace(o,"\\r")}function h(t){return~t.indexOf(".")?"d":"f"}function f(t){for(var e="",i=0,n=t.length;i<n;i++){var o=t[i].tag;"#"==o?e+=m(t[i].nodes,t[i].n,h(t[i].n),t[i].i,t[i].end,t[i].otag+" "+t[i].ctag):"^"==o?e+=g(t[i].nodes,t[i].n,h(t[i].n)):"<"==o||">"==o?e+=w(t[i]):"{"==o||"&"==o?e+=v(t[i].n,h(t[i].n)):"\n"==o?e+=y('"\\n"'+(t.length-1==i?"":" + i")):"_v"==o?e+=b(t[i].n,h(t[i].n)):void 0===o&&(e+=y('"'+d(t[i])+'"'))}return e}function m(t,e,i,n,o,a){return"if(_.s(_."+i+'("'+d(e)+'",c,p,1),c,p,0,'+n+","+o+',"'+a+'")){_.rs(c,p,function(c,p,_){'+f(t)+"});c.pop();}"}function g(t,e,i){return"if(!_.s(_."+i+'("'+d(e)+'",c,p,1),c,p,1,0,0,"")){'+f(t)+"};"}function w(t){return'_.b(_.rp("'+d(t.n)+'",c,p,"'+(t.indent||"")+'"));'}function v(t,e){return"_.b(_.t(_."+e+'("'+d(t)+'",c,p,0)));'}function b(t,e){return"_.b(_.v(_."+e+'("'+d(t)+'",c,p,0)));'}function y(t){return"_.b("+t+");"}t.scan=function(t,i){var n=t.length,o=0,a=null,u=null,p="",d=[],h=!1,f=0,m=0,g="{{",w="}}";function v(){p.length>0&&(d.push(new String(p)),p="")}function b(t,i){if(v(),t&&function(){for(var t=!0,i=m;i<d.length;i++)if(!(t=d[i].tag&&s[d[i].tag]<s._v||!d[i].tag&&null===d[i].match(e)))return!1;return t}())for(var n,o=m;o<d.length;o++)d[o].tag||((n=d[o+1])&&">"==n.tag&&(n.indent=d[o].toString()),d.splice(o,1));else i||d.push({tag:"\n"});h=!1,m=d.length}function y(t,e){var i="="+w,n=t.indexOf(i,e),o=l(t.substring(t.indexOf("=",e)+1,n)).split(" ");return g=o[0],w=o[1],n+i.length-1}for(i&&(i=i.split(" "),g=i[0],w=i[1]),f=0;f<n;f++)0==o?c(g,t,f)?(--f,v(),o=1):"\n"==t.charAt(f)?b(h):p+=t.charAt(f):1==o?(f+=g.length-1,"="==(a=(u=s[t.charAt(f+1)])?t.charAt(f+1):"_v")?(f=y(t,f),o=0):(u&&f++,o=2),h=f):c(w,t,f)?(d.push({tag:a,n:l(p),otag:g,ctag:w,i:"/"==a?h-w.length:f+g.length}),p="",f+=w.length-1,o=0,"{"==a&&("}}"==w?f++:r(d[d.length-1]))):p+=t.charAt(f);return b(h,!0),d},t.generate=function(e,i,n){var o='var _=this;_.b(i=i||"");'+f(e)+"return _.fl();";return n.asString?"function(c,p,i){"+o+";}":new t.Template(new Function("c","p","i",o),i,t,n)},t.parse=function(t,e,i){return function t(e,i,n,o){for(var a=[],s=null,r=null;e.length>0;)if("#"==(r=e.shift()).tag||"^"==r.tag||u(r,o))n.push(r),r.nodes=t(e,r.tag,n,o),a.push(r);else{if("/"==r.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+r.n);if(s=n.pop(),r.n!=s.n&&!p(r.n,s.n,o))throw new Error("Nesting error: "+s.n+" vs. "+r.n);return s.end=r.i,a}a.push(r)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return a}(t,0,[],(i=i||{}).sectionTags||[])},t.cache={},t.compile=function(t,e){var i=t+"||"+!!(e=e||{}).asString,n=this.cache[i];return n||(n=this.generate(this.parse(this.scan(t,e.delimiters),t,e),t,e),this.cache[i]=n)}}(e)}],[[19,0]]]);
//# sourceMappingURL=tests.mobilefrontend.js.map.json