this.mfModules=this.mfModules||{},this.mfModules["tests.mobilefrontend"]=(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(e,t){var n,i=mw.log;n={escapeSelector:function(e){return $.escapeSelector(e)},grep:function(){return $.grep.apply($,arguments)},docReady:function(e){return $(e)},when:function(){return $.when.apply($,arguments)},Deferred:function(){var e=$.Deferred(),t="Use Promise compatible methods `then` and `catch` instead.";return i.deprecate(e,"fail",e.fail,t),i.deprecate(e,"always",e.always,t),i.deprecate(e,"done",e.done,t),e},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(e,t){return $($.parseHTML(e,t))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(e){return e.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey},repeatEvent:function(e,t,n,i){return e.on(n,function(e){return t.emit(n,e)},i)}},e.exports=n},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){!function(){e.exports=this.sinon}()},function(e,t){e.exports=function(e,t,n){var i;for(i in n?OO.inheritClass(e,t):(OO.initClass(e),n=t),n)e.prototype[i]=n[i]}},function(e,t,n){var i="object"!=typeof window,o=n(16);e.exports={setUp:function(e,t){i&&(t.mw=t.mw||void 0,e.stub(t,"mw",o()))}}},function(e,t,n){var i,o=n(0).getDocument();function r(e){var t=function(){var n=this["__cache"+t.cacheId]||(this["__cache"+t.cacheId]={}),i=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e.apply(this,arguments)};return t.cacheId=Date.now().toString()+Math.random().toString(),t}function s(e,t){this.userAgent=e,this.$el=t,this._fixIosLandscapeBug()}s.prototype={_fixIosLandscapeBug:function(){var e=this;this.$el.find('meta[name="viewport"]')[0]&&(this.isIos(4)||this.isIos(5))&&(this.lockViewport(),document.addEventListener("gesturestart",function(){e.lockViewport()},!1))},isIos:r(function(e){var t=this.userAgent,n=/ipad|iphone|ipod/i.test(t);if(!n||!e)return n;switch(e){case 8:return/OS 8_/.test(t)||/Version\/8/.test(t);case 4:return/OS 4_/.test(t);case 5:return/OS 5_/.test(t);default:return!1}}),lockViewport:function(){this.$el&&this.$el.find('meta[name="viewport"]').attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},isWideScreen:r(function(){var e=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=e||window.innerHeight>=e}),supportsAnimations:r(function(){var e=document.createElement("foo").style;function t(t){return t in e||"webkit"+t[0].toUpperCase()+t.slice(1)in e}return t("animationName")&&t("transform")&&t("transition")}),supportsTouchEvents:r(function(){return"ontouchstart"in window}),supportsGeoLocation:r(function(){return"geolocation"in navigator})},s.getSingleton=function(){return i||(i=new s(window.navigator.userAgent,o)),i},e.exports=s},function(e,t){function n(){this._cache={}}function i(){}n.prototype.get=function(e){return this._cache[e]},n.prototype.set=function(e,t){this._cache[e]=t},i.prototype.get=function(){},i.prototype.set=function(){},e.exports={MemoryCache:n,NoCache:i}},function(e,t){function n(){this._register={},OO.EventEmitter.call(this)}n.prototype={require:function(e){var t,n,i=this._register;function o(){if(!Object.hasOwnProperty.call(i,e))throw new Error("MobileFrontend Module not found: "+e);return i[e]}n=e.split("/");try{return(t=mw.loader.require(n[0]))[n[1]]?t[n[1]]:o()}catch(e){return o()}},define:function(e,t){var n=this;if(Object.hasOwnProperty.call(this._register,e))throw new Error("Module already exists: "+e);return this._register[e]=t,{deprecate:function(i){n.deprecate(i,t,e)}}},deprecate:function(e,t,n){var i;n&&(i="Use "+n+" instead."),mw.log.deprecate(this._register,e,t,i)}},OO.mixinClass(n,OO.EventEmitter),e.exports=n},function(e,t,n){var i=["seconds","minutes","hours","days","months","years"],o=n(0),r=[1,60,3600,86400,2592e3,31536e3];function s(e){for(var t=0;t<r.length&&e>r[t+1];)++t;return{value:Math.round(e/r[t]),unit:i[t]}}function u(e){return s(Math.round((new Date).getTime()/1e3)-e)}function c(e){return"seconds"===e.unit&&e.value<10}e.exports={getLastModifiedMessage:function(e,t,n,i){var r,s,a=[];return n=n||"unknown",c(r=u(parseInt(e,10)))?a.push("mobile-frontend-last-modified-with-user-just-now",n,t):a.push({seconds:"mobile-frontend-last-modified-with-user-seconds",minutes:"mobile-frontend-last-modified-with-user-minutes",hours:"mobile-frontend-last-modified-with-user-hours",days:"mobile-frontend-last-modified-with-user-days",months:"mobile-frontend-last-modified-with-user-months",years:"mobile-frontend-last-modified-with-user-years"}[r.unit],n,t,mw.language.convertNumber(r.value)),a.push(i||"#",mw.language.convertNumber(t?1:0),t?mw.util.getUrl("User:"+t):""),s=mw.message.apply(this,a).parse(),i?s:o.parseHTML("<div>").html(s).text()},getRegistrationMessage:function(e,t){var n,i=[];return t=t||"unknown",c(n=u(parseInt(e,10)))?i.push("mobile-frontend-joined-just-now",t):i.push({seconds:"mobile-frontend-joined-seconds",minutes:"mobile-frontend-joined-minutes",hours:"mobile-frontend-joined-hours",days:"mobile-frontend-joined-days",months:"mobile-frontend-joined-months",years:"mobile-frontend-joined-years"}[n.unit],t,mw.language.convertNumber(n.value)),mw.message.apply(this,i).parse()},timeAgo:s,getTimeAgoDelta:u,isNow:c,isRecent:function(e){return["seconds","minutes","hours"].indexOf(e.unit)>-1}}},function(e,t,n){var i="object"!=typeof window,o=i&&n(15);e.exports={setUp:function(e,t){i&&(t.window=t.window||void 0,t.document=t.document||void 0,e.stub(t,"window",(new o.JSDOM).window),e.stub(t,"document",window.document))}}},function(e,t,n){var i="object"!=typeof window;e.exports={setUp:function(e,t){i&&(t.$=t.$||void 0,e.stub(t,"$",n(11)))},tearDown:function(){i&&delete n.c[11]}}},function(e,t){!function(){e.exports=this.jquery}()},function(e,t,n){var i="object"!=typeof window;e.exports={setUp:function(e,t){i&&(t.OO=t.OO||void 0,e.stub(t,"OO",n(19)))}}},function(e,t,n){n(14),n(17),n(18),n(20),n(21),e.exports=n(22)},function(e,t,n){(function(e){var t,i,o,r=n(9),s=n(4),u=n(10),c=n(2);QUnit.module("MobileFrontend Browser.js",{beforeEach:function(){o=c.sandbox.create(),r.setUp(o,e),s.setUp(o,e),u.setUp(o,e),t=n(5),i=$("<html>")},afterEach:function(){o.restore()}}),QUnit.test("isIos()",function(e){var n=new t("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",i),o=new t("Mozilla/5.0 (iPad; CPU OS 4_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",i),r=new t("Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",i),s=new t("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",i);e.strictEqual(n.isIos(),!0),e.strictEqual(n.isIos(8),!1),e.strictEqual(n.isIos(4),!1),e.strictEqual(n.isIos(5),!1),e.strictEqual(s.isIos(),!0),e.strictEqual(s.isIos(8),!0),e.strictEqual(o.isIos(4),!0),e.strictEqual(r.isIos(5),!0)}),QUnit.test("Methods are cached",function(e){var n=new t("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",i),o=new t("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",i),r=new t("Android 2",i);function s(e,t){return e["__cache"+e[t].cacheId]}e.strictEqual(n.isIos(),!0),e.strictEqual(n.isIos(8),!1),e.strictEqual(r.isIos(8),!1),e.strictEqual(o.isIos(),!0),e.strictEqual(o.isIos(8),!0),e.strictEqual(Object.keys(s(n,"isIos")).length,2,"isIos on ipad cached as expected"),e.strictEqual(Object.keys(s(r,"isIos")).length,1,"isIos on android cached as expected"),e.strictEqual(Object.keys(s(o,"isIos")).length,2,"isIos on iphone cached as expected")})}).call(this,n(1))},function(e,t){!function(){e.exports=this.jsdom}()},function(e,t){e.exports=function(){return{user:{},log:{deprecate:function(){}}}}},function(e,t,n){var i=new(0,n(6).MemoryCache);QUnit.module("MobileFrontend cache.js"),QUnit.test("cache set() and get()",function(e){i.set("key","value"),e.strictEqual(i.get("key"),"value")})},function(e,t,n){(function(e){var t,i,o=n(2),r=n(12);QUnit.module("MobileFrontend mfExtend.test.js",{beforeEach:function(){i=o.sandbox.create(),r.setUp(i,e),t=n(3)},afterEach:function(){i.restore()}}),QUnit.test("mfExtend() - extending from constructor",function(e){function n(){}function i(){}t(n,i,{}),e.strictEqual(n.prototype instanceof i,!0)}),QUnit.test("mfExtend() - extending from object",function(e){var n,i=new function(){this.protoMethod=function(){return!0}};function o(){}t(o,i),n=new o,e.strictEqual(n.protoMethod(),!0)}),QUnit.test("mfExtend() - extending from constructor with overrides",function(e){var n;function i(){}t(i,function(){this.protoMethod=function(){return!0}},{protoMethod:function(){return!1}}),n=new i,e.strictEqual(n.protoMethod(),!1)})}).call(this,n(1))},function(e,t){!function(){e.exports=this.oojs}()},function(e,t,n){(function(e){var t,i,o=n(12),r=n(2);QUnit.module("MobileFrontend ModuleLoader",{beforeEach:function(){i=r.sandbox.create(),o.setUp(i,e),t=n(7),this.loader=new t},afterEach:function(){i.restore()}}),QUnit.test("#require",function(e){this.loader.define("foo",1),this.loader.define("bar",5),e.strictEqual(this.loader.require("foo"),1,"Returns appropriate module"),e.strictEqual(this.loader.require("bar"),5,"Returns appropriate module"),e.throws(function(){this.loader.require("undefinedmodule")},"Cannot require an undefined module."),e.throws(function(){this.loader.require("mobile.modules/Foo")},"Cannot require an undefined export on a known module.")}),QUnit.test("#define",function(e){var t=this.loader;t.define("foo",1),t.define("bar",5),e.throws(function(){t.define("bar",50)},"Cannot define two modules with the same name"),e.strictEqual(this.loader.require("bar"),5,"Returns first definition of module.")})}).call(this,n(1))},function(e,t,n){(function(e){var t,i,o=n(4),r=n(2);QUnit.module("MobileFrontend time.js",{beforeEach:function(){i=r.sandbox.create(),o.setUp(i,e),t=n(8)},afterEach:function(){i.restore()}}),QUnit.test("timeAgo()",function(e){e.deepEqual(t.timeAgo(40),{value:40,unit:"seconds"}),e.deepEqual(t.timeAgo(149),{value:2,unit:"minutes"}),e.deepEqual(t.timeAgo(150),{value:3,unit:"minutes"}),e.deepEqual(t.timeAgo(7500),{value:2,unit:"hours"}),e.deepEqual(t.timeAgo(9e4),{value:1,unit:"days"}),e.deepEqual(t.timeAgo(9e6),{value:3,unit:"months"}),e.deepEqual(t.timeAgo(32e6),{value:1,unit:"years"}),e.deepEqual(t.timeAgo(102e6),{value:3,unit:"years"})})}).call(this,n(1))},function(e,t,n){(function(e){var t,i,o=n(9),r=n(4),s=n(10),u=n(2);QUnit.module("MobileFrontend util.js",{beforeEach:function(){i=u.sandbox.create(),o.setUp(i,e),r.setUp(i,e),s.setUp(i,e),t=n(0)},afterEach:function(){s.tearDown(),i.restore()}}),QUnit.test("escapeSelector()",function(e){e.strictEqual(t.escapeSelector("#selector-starts-with-hash"),"\\#selector-starts-with-hash")}),QUnit.test("grep()",function(e){e.deepEqual(t.grep([1,2],function(e){return e>1}),[2])}),QUnit.test("docReady()",function(e){var n=t.docReady();e.strictEqual(n instanceof $,!0)}),QUnit.test("when()",function(e){return t.when({resolved:!0}).then(function(t){e.strictEqual(t.resolved,!0)})}),QUnit.test("parseHTML()",function(e){var n=t.parseHTML("<p>element content</p>",document);e.strictEqual("object"==typeof n,!0),e.strictEqual(n[0].innerHTML,"element content")}),QUnit.test("isNumeric()",function(e){e.strictEqual(t.isNumeric(123),!0),e.strictEqual(t.isNumeric("123"),!0),e.strictEqual(t.isNumeric("The string 123 is true? I don't like it."),!1),e.strictEqual(t.isNumeric(NaN),!1)}),QUnit.test("escapeHash()",function(e){e.strictEqual(t.escapeHash("#escape:...hash"),"#escape\\:\\.\\.\\.hash")}),QUnit.test("isModifiedEvent() - true",function(e){var n=document.createElement("div");n.addEventListener("click",function(n){e.strictEqual(t.isModifiedEvent(n),!0)}),n.dispatchEvent(new window.MouseEvent("click",{ctrlKey:!0}))}),QUnit.test("isModifiedEvent() - false",function(e){var n=document.createElement("div");n.addEventListener("click",function(n){e.strictEqual(t.isModifiedEvent(n),!1)}),n.dispatchEvent(new window.MouseEvent("click"))})}).call(this,n(1))}],[[13,0]]]);
//# sourceMappingURL=tests.mobilefrontend.js.map.json