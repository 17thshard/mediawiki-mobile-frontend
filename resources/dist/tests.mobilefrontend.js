this.mfModules=this.mfModules||{},this.mfModules["tests.mobilefrontend"]=(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(e,t){e.exports=function(e,t,i){var n;for(n in i?OO.inheritClass(e,t):(OO.initClass(e),i=t),i)e.prototype[n]=i[n]}},function(e,t){e.exports={escapeSelector:function(e){return $.escapeSelector(e)},grep:function(){return $.grep.apply($,arguments)},docReady:function(e){return $(e)},when:function(){return $.when.apply($,arguments)},Deferred:function(){var e=$.Deferred(),t="Use Promise compatible methods `then` and `catch` instead.";return mw.log.deprecate(e,"fail",e.fail,t),mw.log.deprecate(e,"always",e.always,t),mw.log.deprecate(e,"done",e.done,t),e},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(e,t){return $($.parseHTML(e,t))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(e){return e.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey},repeatEvent:function(e,t,i,n){return e.on(i,function(e){return t.emit(i,e)},n)}}},function(e,t,i){var n=i(1),o=i(0),a=/^(\S+)\s*(.*)$/,s=0;function r(){this.initialize.apply(this,arguments)}OO.mixinClass(r,OO.EventEmitter),o(r,{className:void 0,tagName:"div",isTemplateMode:!1,isBorderBox:!0,template:void 0,templatePartials:{},defaults:{},events:null,initialize:function(e){var t=this;OO.EventEmitter.call(this),e=n.extend({},this.defaults,e),this.options=e,this.cid=function(e){var t=(++s).toString();return e?e+t:t}("view"),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),e.el?this.$el=$(e.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize():n.docReady(function(){t.$el=$(e.el),t._postInitialize()})},_postInitialize:function(){this.$el.addClass(this.className),this.isBorderBox&&this.$el.addClass("view-border-box"),this.render(this.options)},preRender:function(){},postRender:function(){},render:function(e){var t;return n.extend(this.options,e),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(t=this.template.render(this.options,this.templatePartials),this.isTemplateMode?this.$el=$(t):this.$el.html(t)),this.postRender(),this.delegateEvents(),this},$:function(e){return this.$el.find(e)},delegateEvents:function(e){var t,i,n;if(e=e||this.events)for(i in this.undelegateEvents(),e)"function"!=typeof(n=e[i])&&(n=this[e[i]]),n&&(t=i.match(a),this.delegate(t[1],t[2],n.bind(this)))},delegate:function(e,t,i){this.$el.on(e+".delegateEvents"+this.cid,t,i)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(e,t,i){this.$el.off(e+".delegateEvents"+this.cid,t,i)},parseHTML:n.parseHTML}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(e){r.prototype[e]=function(){return this.$el[e].apply(this.$el,arguments),this}}),e.exports=r},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){!function(){e.exports=this.sinon}()},function(e,t,i){var n="object"!=typeof window;e.exports={setUp:function(e,t){n&&(t.OO=t.OO||void 0,e.stub(t,"OO",i(25)))}}},function(e,t,i){var n=["seconds","minutes","hours","days","months","years"],o=i(1),a=[1,60,3600,86400,2592e3,31536e3];function s(e){for(var t=0;t<a.length&&e>a[t+1];)++t;return{value:Math.round(e/a[t]),unit:n[t]}}function r(e){return s(Math.round((new Date).getTime()/1e3)-e)}function l(e){return"seconds"===e.unit&&e.value<10}e.exports={getLastModifiedMessage:function(e,t,i,n){var a,s,c=[];return i=i||"unknown",l(a=r(e))?c.push("mobile-frontend-last-modified-with-user-just-now",i,t):c.push({seconds:"mobile-frontend-last-modified-with-user-seconds",minutes:"mobile-frontend-last-modified-with-user-minutes",hours:"mobile-frontend-last-modified-with-user-hours",days:"mobile-frontend-last-modified-with-user-days",months:"mobile-frontend-last-modified-with-user-months",years:"mobile-frontend-last-modified-with-user-years"}[a.unit],i,t,mw.language.convertNumber(a.value)),c.push(n||"#",mw.language.convertNumber(t?1:0),t?mw.util.getUrl("User:"+t):""),s=mw.message.apply(this,c).parse(),n?s:o.parseHTML("<div>").html(s).text()},getRegistrationMessage:function(e,t){var i,n=[];return t=t||"unknown",l(i=r(parseInt(e,10)))?n.push("mobile-frontend-joined-just-now",t):n.push({seconds:"mobile-frontend-joined-seconds",minutes:"mobile-frontend-joined-minutes",hours:"mobile-frontend-joined-hours",days:"mobile-frontend-joined-days",months:"mobile-frontend-joined-months",years:"mobile-frontend-joined-years"}[i.unit],t,mw.language.convertNumber(i.value)),mw.message.apply(this,n).parse()},timeAgo:s,getTimeAgoDelta:r,isNow:l,isRecent:function(e){return["seconds","minutes","hours"].indexOf(e.unit)>-1}}},function(e,t,i){var n="object"!=typeof window;e.exports={setUp:function(e,t){n&&(t.$=t.$||void 0,e.stub(t,"$",i(18)))},tearDown:function(){n&&delete i.c[18]}}},function(e,t,i){var n=i(0),o=i(9),a=i(2);function s(e){var t=this;e.tag="h"+e.level,this.line=e.line,this.text=e.text,this.hasReferences=e.hasReferences||!1,this.id=e.id||null,this.anchor=e.anchor,this.children=[],(e.children||[]).forEach(function(e){t.children.push(new s(e))}),a.call(this,e)}n(s,a,{template:mw.template.get("mobile.startup","Section.hogan"),defaults:{line:void 0,text:"",spinner:o.spinner().toHtmlString()}}),e.exports=s},function(e,t,i){var n=i(10),o=i(1);e.exports={spinner:function(e){return e=e||{},new n(o.extend(e,{name:"spinner",label:mw.msg("mobile-frontend-loading-message"),additionalClassNames:"spinner loading"}))}}},function(e,t,i){var n=i(0),o=i(2);function a(e){e.hasText&&(e.modifier="mw-ui-icon-before"),e.href&&(e.tagName="a"),o.call(this,e)}n(a,o,{preRender:function(){this.setRotationClass()},setRotationClass:function(){var e=this.options;if(e.rotation)switch(e.rotation){case-180:case 180:e._rotationClass="mf-mw-ui-icon-rotate-flip";break;case-90:e._rotationClass="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:e._rotationClass="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}},isTemplateMode:!0,defaults:{rotation:0,hasText:!1,href:void 0,glyphPrefix:"mf",tagName:"div",isSmall:!1,base:"mw-ui-icon",name:"",modifier:"mw-ui-icon-element",title:""},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.base+"-"+this.options.glyphPrefix+"-"+this.options.name},toHtmlString:function(){return this.parseHTML("<div>").append(this.$el).html()},template:mw.template.get("mobile.startup","icon.hogan")}),e.exports=a},function(e,t,i){var n=i(0),o=i(2);function a(){o.apply(this,arguments)}n(a,o,{defaults:{filename:void 0},isBorderBox:!1,postRender:function(){this.options.description=this.$el.siblings(".thumbcaption").text()},getDescription:function(){return this.options.description},getFileName:function(){return this.options.filename}}),e.exports=a},function(e,t,i){var n,o=i(1);function a(e){var t=function(){var i=this["__cache"+t.cacheId]||(this["__cache"+t.cacheId]={}),n=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,n)?i[n]:i[n]=e.apply(this,arguments)};return t.cacheId=Date.now().toString()+Math.random().toString(),t}function s(e,t){this.userAgent=e,this.$el=t,this._fixIosLandscapeBug()}s.prototype={_fixIosLandscapeBug:function(){var e=this;this.$el.find('meta[name="viewport"]')[0]&&(this.isIos(4)||this.isIos(5))&&(this.lockViewport(),document.addEventListener("gesturestart",function(){e.lockViewport()},!1))},isIos:a(function(e){var t=this.userAgent,i=/ipad|iphone|ipod/i.test(t);if(!i||!e)return i;switch(e){case 8:return/OS 8_/.test(t)||/Version\/8/.test(t);case 4:return/OS 4_/.test(t);case 5:return/OS 5_/.test(t);default:return!1}}),lockViewport:function(){this.$el&&this.$el.find('meta[name="viewport"]').attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},isWideScreen:a(function(){var e=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=e||window.innerHeight>=e}),supportsAnimations:a(function(){var e=document.createElement("foo").style;function t(t){return t in e||"webkit"+t[0].toUpperCase()+t.slice(1)in e}return t("animationName")&&t("transform")&&t("transition")}),supportsTouchEvents:a(function(){return"ontouchstart"in window}),supportsGeoLocation:a(function(){return"geolocation"in window.navigator})},s.getSingleton=function(){var e;return n||(e=o.getDocument(),n=new s(window.navigator.userAgent,e)),n},e.exports=s},function(e,t,i){var n="object"!=typeof window,o=i(22);e.exports={setUp:function(e,t){n&&(t.mw=t.mw||void 0,e.stub(t,"mw",o()))}}},function(e,t){function i(){this._cache={}}function n(){}i.prototype.get=function(e){return this._cache[e]},i.prototype.set=function(e,t){this._cache[e]=t},n.prototype.get=function(){},n.prototype.set=function(){},e.exports={MemoryCache:i,NoCache:n}},function(e,t){function i(){this._register={},OO.EventEmitter.call(this)}i.prototype={require:function(e){var t,i,n=this._register;function o(){if(!Object.hasOwnProperty.call(n,e))throw new Error("MobileFrontend Module not found: "+e);return n[e]}i=e.split("/");try{return(t=mw.loader.require(i[0]))[i[1]]?t[i[1]]:o()}catch(e){return o()}},define:function(e,t){var i=this;if(Object.hasOwnProperty.call(this._register,e))throw new Error("Module already exists: "+e);return this._register[e]=t,{deprecate:function(n){i.deprecate(n,t,e)}}},deprecate:function(e,t,i){var n;i&&(n="Use "+i+" instead."),mw.log.deprecate(this._register,e,t,n)}},OO.mixinClass(i,OO.EventEmitter),e.exports=i},function(e,t,i){var n=mw.html,o=i(0),a=i(6),s=i(1),r=i(8),l=i(11),c=i(2),u=mw.config.get("wgMFMobileFormatterHeadings").join(","),p=["noviewer","metadata"];function d(e){var t;void 0===e.thumbnail&&(e.thumbnail=!1),this.options=e,e.languageUrl=mw.util.getUrl("Special:MobileLanguages/"+e.title),c.call(this,e),e.displayTitle=this.getDisplayTitle(),this.title=e.title,this.displayTitle=e.displayTitle,this.thumbnail=e.thumbnail,this.url=e.url||mw.util.getUrl(e.title),this.id=e.id,this.isMissing=void 0!==e.isMissing?e.isMissing:0===e.id,(t=this.thumbnail)&&t.width&&(this.thumbnail.isLandscape=t.width>t.height),this.wikidataDescription=e.wikidataDescription}o(d,c,{defaults:{id:0,title:"",displayTitle:"",namespaceNumber:0,protection:{edit:["*"]},sections:[],isMissing:!1,isMainPage:!1,url:void 0,thumbnail:{isLandscape:void 0,source:void 0,width:void 0,height:void 0}},isBorderBox:!1,getDisplayTitle:function(){return this.options.displayTitle||n.escape(this.options.title)},inNamespace:function(e){return this.options.namespaceNumber===mw.config.get("wgNamespaceIds")[e]},findSectionHeadingByIndex:function(e){return e<1?this.$():this.$(u).filter('.mw-parser-output > *, [class^="mf-section-"] > *').eq(e-1)},findChildInSectionLead:function(e,t){var i,n,o,a,s=u;function r(e){return e.find(t).addBack()}return 0===e?(a=this.getLeadSectionElement())&&a.length?r(a.children(t)):(i=this.findSectionHeadingByIndex(1)).length?r(i.prevAll(t)):this.$(t):(i=this.findSectionHeadingByIndex(e)).hasClass("section-heading")?(n=(o=i.next()).find(s).eq(0)).length?r(n.prevAll(t)):r(o.children(t)):(n=i.eq(0).nextAll(s).eq(0),i.nextUntil(n,t))},getLeadSectionElement:function(){return this.$(".mf-section-0").length?this.$(".mf-section-0"):null},isWikiText:function(){return"wikitext"===mw.config.get("wgPageContentModel")},isMainPage:function(){return this.options.isMainPage},isWatched:function(){return this.options.isWatched},getRevisionId:function(){return this.options.revId},getTitle:function(){return this.options.title},getId:function(){return this.options.id},getNamespaceId:function(){var e=this.options.title.split(":");return e[1]&&mw.config.get("wgNamespaceIds")[e[0].toLowerCase().replace(" ","_")]||0},isTalkPage:function(){var e=this.getNamespaceId();return e>0&&e%2==1},preRender:function(){this.sections=[],this._sectionLookup={},this.title=this.options.title,this.options.sections.forEach(function(e){var t=new r(e);this.sections.push(t),this._sectionLookup[t.id]=t}.bind(this))},getThumbnails:function(){var e=this.$el,t="."+p.join(",."),i=[];return this._thumbs||(e.find("a.image, a.thumbimage").not(t).each(function(){var n=e.find(this),o=n.find(".lazy-image-placeholder"),a=0===n.parents(t).length&&0===n.find(t).length,s=n.attr("href").match(/title=([^/&]+)/),r=n.attr("href").match(/[^/]+$/);o.length&&a&&(a=!new RegExp("\\b("+p.join("|")+")\\b").test(o.data("class"))),a&&(s||r)&&i.push(new l({el:n,filename:decodeURIComponent(s?s[1]:r[0])}))}),this._thumbs=i),this._thumbs},getSection:function(e){return this._sectionLookup[e]},getSections:function(){return this.sections},getRedLinks:function(){return this.$(".new")}}),d.newFromJSON=function(e){var t,i,o=e.thumbnail,r=e.pageprops||{displaytitle:n.escape(e.title)},l=e.terms;return(r||l)&&(i=l&&l.label?n.escape(l.label[0]):r.displaytitle),e.wikidataDescription=e.description||void 0,o&&(e.thumbnail.isLandscape=o.width>o.height),e.revisions&&e.revisions[0]&&(t=e.revisions[0],e.lastModified=a.getLastModifiedMessage(new Date(t.timestamp).getTime()/1e3,t.user)),new d(s.extend(e,{id:e.pageid,isMissing:!!e.missing,url:mw.util.getUrl(e.title),displayTitle:i}))},d.HEADING_SELECTOR=u,e.exports=d},function(e,t,i){var n="object"!=typeof window,o=n&&i(21);e.exports={setUp:function(e,t){n&&(t.window=t.window||void 0,t.document=t.document||void 0,e.stub(t,"window",(new o.JSDOM).window),e.stub(t,"document",window.document))}}},function(e,t){!function(){e.exports=this.jquery}()},function(e,t,i){i(20),i(23),i(24),i(26),i(27),i(28),i(29),e.exports=i(30)},function(e,t,i){(function(e){var t,n,o=i(12),a=i(17),s=i(7),r=i(4),l=i(13);QUnit.module("MobileFrontend Browser.js",{beforeEach:function(){var i;n=r.sandbox.create(),a.setUp(n,e),s.setUp(n,e),l.setUp(n,e),i=window.document.implementation.createHTMLDocument("Test"),t=$(i)},afterEach:function(){n.restore()}}),QUnit.test("isIos()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),n=new o("Mozilla/5.0 (iPad; CPU OS 4_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),a=new o("Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),s=new o("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",t);e.strictEqual(i.isIos(),!0),e.strictEqual(i.isIos(8),!1),e.strictEqual(i.isIos(4),!1),e.strictEqual(i.isIos(5),!1),e.strictEqual(s.isIos(),!0),e.strictEqual(s.isIos(8),!0),e.strictEqual(n.isIos(4),!0),e.strictEqual(a.isIos(5),!0)}),QUnit.test("Methods are cached",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),n=new o("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",t),a=new o("Android 2",t);function s(e,t){return e["__cache"+e[t].cacheId]}e.strictEqual(i.isIos(),!0),e.strictEqual(i.isIos(8),!1),e.strictEqual(a.isIos(8),!1),e.strictEqual(n.isIos(),!0),e.strictEqual(n.isIos(8),!0),e.strictEqual(Object.keys(s(i,"isIos")).length,2,"isIos on ipad cached as expected"),e.strictEqual(Object.keys(s(a,"isIos")).length,1,"isIos on android cached as expected"),e.strictEqual(Object.keys(s(n,"isIos")).length,2,"isIos on iphone cached as expected")}),QUnit.test("lockViewport()",function(e){var i,n=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);n.$el.find("head").append('<meta name="viewport"/>'),n.lockViewport(),i=n.$el.find('meta[name="viewport"]').attr("content"),e.strictEqual(i,"initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}),QUnit.test("isWideScreen()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);n.stub(mw.config,"get",function(){return"720px"}),e.strictEqual(i.isWideScreen(),!0)}),QUnit.test("supportsAnimations() - true",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);n.stub(document,"createElement",function(){return{style:{animationName:"",transform:"",transition:""}}}),e.strictEqual(i.supportsAnimations(),!0)}),QUnit.test("supportsAnimations() - false",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);n.stub(document,"createElement",function(){return{style:{}}}),e.strictEqual(i.supportsAnimations(),!1)}),QUnit.test("supportsTouchEvents()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);window.ontouchstart=window.ontouchstart||void 0,e.strictEqual(i.supportsTouchEvents(),!0)}),QUnit.test("supportsGeoLocation()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);window.navigator.geolocation=window.navigator.geolocation||void 0,e.strictEqual(i.supportsGeoLocation(),!0)})}).call(this,i(3))},function(e,t){!function(){e.exports=this.jsdom}()},function(e,t){var i={special:-1,talk:1,user_talk:3,project:4,project_talk:5};e.exports=function(){var e={wgNamespaceIds:i};return{config:{get:function(t){return e[t]},set:function(t,i){e[t]=i}},html:{escape:function(e){return e.replace(/['"<>&]/g,function(e){switch(e){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}})}},log:{deprecate:function(){}},msg:function(e){return e},now:Date.now.bind(Date),template:{get:function(){}},user:{},util:{getUrl:function(e){return e}}}}},function(e,t,i){var n=new(0,i(14).MemoryCache);QUnit.module("MobileFrontend cache.js"),QUnit.test("cache set() and get()",function(e){n.set("key","value"),e.strictEqual(n.get("key"),"value")})},function(e,t,i){(function(e){var t,n,o=i(4),a=i(5);QUnit.module("MobileFrontend mfExtend.test.js",{beforeEach:function(){n=o.sandbox.create(),a.setUp(n,e),t=i(0)},afterEach:function(){n.restore()}}),QUnit.test("mfExtend() - extending from constructor",function(e){function i(){}function n(){}t(i,n,{}),e.strictEqual(i.prototype instanceof n,!0)}),QUnit.test("mfExtend() - extending from object",function(e){var i,n=new function(){this.protoMethod=function(){return!0}};function o(){}t(o,n),i=new o,e.strictEqual(i.protoMethod(),!0)}),QUnit.test("mfExtend() - extending from constructor with overrides",function(e){var i;function n(){}t(n,function(){this.protoMethod=function(){return!0}},{protoMethod:function(){return!1}}),i=new n,e.strictEqual(i.protoMethod(),!1)})}).call(this,i(3))},function(e,t){!function(){e.exports=this.oojs}()},function(e,t,i){(function(e){var t,n,o=i(5),a=i(4);QUnit.module("MobileFrontend ModuleLoader",{beforeEach:function(){n=a.sandbox.create(),o.setUp(n,e),t=i(15),this.loader=new t},afterEach:function(){n.restore()}}),QUnit.test("#require",function(e){this.loader.define("foo",1),this.loader.define("bar",5),e.strictEqual(this.loader.require("foo"),1,"Returns appropriate module"),e.strictEqual(this.loader.require("bar"),5,"Returns appropriate module"),e.throws(function(){this.loader.require("undefinedmodule")},"Cannot require an undefined module."),e.throws(function(){this.loader.require("mobile.modules/Foo")},"Cannot require an undefined export on a known module.")}),QUnit.test("#define",function(e){var t=this.loader;t.define("foo",1),t.define("bar",5),e.throws(function(){t.define("bar",50)},"Cannot define two modules with the same name"),e.strictEqual(this.loader.require("bar"),5,"Returns first definition of module.")})}).call(this,i(3))},function(e,t,i){(function(e){var t,n,o,a,s,r,l=i(7),c=i(13),u=i(5),p=i(4),d='<div class="mw-parser-output">';QUnit.module("MobileFrontend Page",{beforeEach:function(){var h=function(e){return'<div class="ambox">'+e+"</div>"},f=function(e){return'<h2 class="section-heading">'+e+"</h2>"},m=function(e,t){var i=t||"h3";return"<"+i+">"+e+"</"+i+">"},g=function(e,t){return'<div class="mf-section-'+e+'">'+t+"</div>"};n=p.sandbox.create(),c.setUp(n,e),e.mw.config.set("wgMFMobileFormatterHeadings",["h1","h2","h3","h4","h5","h6"]),l.setUp(n,e),u.setUp(n,e),t=i(16),o=new t({el:$(d).html("<p>lead</p>"+h("a0"))}),a=new t({el:$(d).html(g(0,h("a0")+'<p>lead</p><div class="toc-mobile view-border-box"><h2></h2><div></div></div>')+f("1")+g(1,h("a1")+m("1.1")+h("a1.1")))}),s=new t({el:$(d).html("<p>lead</p>"+h("a0")+m("1","h2")+h("a1")+m("1.1")+h("a1.1"))}),r=new t({el:$(d).html(g(0,"<p>lead</p>"+h("a0"))+f("1")+g(1,h("a1")+m("1.1")+h("a1.1")+m("1.1.1","h4")+h("a1.1.1")+m("1.1.2","h4")+h("a1.1.2")+m("1.2")+h("a1.1"))+f("2")+g(6,h("a2"))+f("3")+g(7,h("a3"))+f("Section with nested Ambox")+g(8,h("<p>nested-ambox-parent,</p>"+h("nested-ambox-1,")+h("nested-ambox-2")))+f("Sub-section with nested Ambox")+g(9,h("<p>nested-ambox-parent,</p>"+h("nested-ambox-1,")+h("nested-ambox-2"))+m("subsection heading")+m("Another subsection heading")))})},afterEach:function(){n.restore()}}),QUnit.test("#findInSectionLead",function(e){[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[3,"","h4","selector does not match",".foo"],[111,"","Non-existent section"]].forEach(function(t,i){var n=t[0],o=t[1],a=t[2],r=t[3]||".ambox";e.strictEqual(s.findChildInSectionLead(n,r).text(),o,"Found correct text in desktop test "+i+" case: "+a)}),[[0,"a0","lead section"],[3,"","h4","selector does not match",".foo"],[111,"","Non-existent section"]].forEach(function(t){e.strictEqual(o.findChildInSectionLead(t[0],t[3]||".ambox").text(),t[1],"Stub: Found correct text in desktop test case:"+t[2])}),[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[3,"a1.1.1","h4"],[3,"","h4","selector does not match",".foo"],[7,"a3","h2 later"],[111,"","Non-existent section"]].forEach(function(t){e.strictEqual(r.findChildInSectionLead(t[0],t[3]||".ambox").text(),t[1],"Mobile: Found correct text in test case:"+t[2])}),[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[111,"","Non-existent section"]].forEach(function(t){e.strictEqual(a.findChildInSectionLead(t[0],t[3]||".ambox").text(),t[1],"Mobile with table of contents: Found correct text in test case:"+t[2])}),[[8,".ambox","nested-ambox-parent,nested-ambox-1,nested-ambox-2","Nested elements in section"],[9,".ambox","nested-ambox-parent,nested-ambox-1,nested-ambox-2","Nested elements in subsection"]].forEach(function(t){var i=r.findChildInSectionLead(t[0],t[1]);e.strictEqual(i.not(i.children()).text(),t[2],"Mobile: Found correct text in test case:"+t[3])})}),QUnit.test("#isMainPage",function(e){var i=new t({title:"Main Page",isMainPage:!0}),n=new t({title:"Foo"});e.strictEqual(i.isMainPage(),!0,"check main page flag is updated"),e.strictEqual(n.isMainPage(),!1,"check not marked as main page")}),QUnit.test("#getThumbnails",function(e){var i,n,o,a,s,r,l,c,u,p;i=new t({el:$('<div><a href="/wiki/File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),n=new t({el:$("<div>")}),o=new t({el:$('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),a=i.getThumbnails(),s=new t({el:$('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box noviewer"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),r=new t({el:$('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" class="metadata" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),p=new t({el:$('<div class="noviewer"><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),l=new t({el:$('<div><a href="/wiki/File:Design_portal_logo.jpg" class="image"><noscript><img alt="icon" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" width="28" height="28" class="noviewer" data-file-width="151" data-file-height="151"></noscript><span class="lazy-image-placeholder" style="width: 28px;height: 28px;" data-src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" data-alt="icon" data-width="28" data-height="28" data-class="noviewer">&nbsp;</span></a></div>')}),u=new t({el:$('<div><a href="/wiki/File:Design_portal_logo.jpg" class="image"><noscript><img alt="icon" src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" width="28" height="28" class="noviewer" data-file-width="151" data-file-height="151"></noscript><span class="lazy-image-placeholder" style="width: 28px;height: 28px;" data-src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" data-alt="icon" data-width="28" data-height="28" data-class="wot noviewerz bar">&nbsp;</span></a></div>')}),c=new t({el:$('<div><table class="plainlinks metadata ambox ambox-content ambox-Unreferenced" role="presentation"><tr><td class="mbox-image"><div style="width:52px"><a href="/wiki/File:Question_book-new.svg" class="image"><noscript><img alt="" src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" width="50" height="39" data-file-width="262" data-file-height="204"></noscript><span class="lazy-image-placeholder" style="width: 50px;height: 39px;" data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" data-alt="" data-width="50" data-height="39" data-srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/75px-Question_book-new.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/100px-Question_book-new.svg.png 2x"> </span></a></div></td></tr></table>')}),e.strictEqual(a.length,1,"Found expected number of thumbnails."),e.strictEqual(a[0].getFileName(),"File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg","Found expected filename."),a=n.getThumbnails(),e.strictEqual(a.length,0,"This page has no thumbnails."),a=o.getThumbnails(),e.strictEqual(a.length,1,"Found expected number of thumbnails."),e.strictEqual(a[0].getFileName(),"File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg","Found expected filename."),a=s.getThumbnails(),e.strictEqual(a.length,0,"This page has no thumbnails."),a=r.getThumbnails(),e.strictEqual(a.length,0,"This page has no thumbnails."),a=p.getThumbnails(),e.strictEqual(a.length,0,"Images inside a container with the class are not included. Images inside tables for example."),a=l.getThumbnails(),e.strictEqual(a.length,0,"Consider whether the class is on an image which has not been lazy loaded."),a=c.getThumbnails(),e.strictEqual(a.length,0,"Consider whether the lazy loaded image is inside a .metadata container."),a=u.getThumbnails(),e.strictEqual(a.length,1,"Thumbnail found if there is a typo.")}),QUnit.test("#getNamespaceId",function(e){[["Main Page",0],["San Francisco",0],["San Francisco: Talk:2",0],["San Francisco: The Sequel",0],["Talk:Foo",1],["Project:Bar",4],["User talk:Jon",3],["Special:Nearby",-1]].forEach(function(i){var n=new t({title:i[0]});e.strictEqual(n.getNamespaceId(),i[1],"Check namespace is as expected")})}),QUnit.test("#isTalkPage",function(e){[["Main Page",!1],["San Francisco",!1],["San Francisco: Talk:2",!1],["San Francisco: The Sequel",!1],["Talk:Foo",!0],["Project talk:Bar",!0],["User talk:Jon",!0],["Special:Nearby",!1]].forEach(function(i){var n=new t({title:i[0]});e.strictEqual(n.isTalkPage(),i[1],"Check test is as expected")})}),QUnit.test("#isMissing",function(e){var i,n;i=[new t({title:"Hello",id:0}),new t({title:"Hello",id:5,isMissing:!0}),new t({title:"Hello",isMissing:!0})],n=[new t({title:"Hello",id:4}),new t({title:"Hello",id:4,isMissing:!1}),new t({title:"Hello",isMissing:!1}),new t({title:"Hello",id:0,isMissing:!1})],i.forEach(function(t,i){e.strictEqual(t.isMissing,!0,"page "+i+" is missing")}),n.forEach(function(t,i){e.strictEqual(t.isMissing,!1,"page "+i+" is not missing")})}),QUnit.test("#allowsXSS",function(e){var i=new t({title:'<script>alert("oops, XSS possible!");<\/script>'});e.strictEqual(i.getDisplayTitle(),"&lt;script&gt;alert(&quot;oops, XSS possible!&quot;);&lt;/script&gt;","Check against XSS in Page.js constructor displaytitle (when title set)"),[{thumbnail:!1,title:'<script>alert("oops, XSS possible!");<\/script>',terms:!1,testDesc:"Check against XSS in Page.newFromJSON displaytitle (when title set)"},{thumbnail:!1,pageprops:[],terms:{label:['<script>alert("oops, XSS possible!");<\/script>']},testDesc:"Check against XSS in Page.newFromJSON displaytitle (when Wikibase label set)"}].forEach(function(n){i=t.newFromJSON(n),e.strictEqual(i.getDisplayTitle(),"&lt;script&gt;alert(&quot;oops, XSS possible!&quot;);&lt;/script&gt;",n.testDesc)})})}).call(this,i(3))},function(e,t,i){var n=i(6);QUnit.module("MobileFrontend time.js"),QUnit.test("timeAgo()",function(e){e.deepEqual(n.timeAgo(40),{value:40,unit:"seconds"}),e.deepEqual(n.timeAgo(149),{value:2,unit:"minutes"}),e.deepEqual(n.timeAgo(150),{value:3,unit:"minutes"}),e.deepEqual(n.timeAgo(7500),{value:2,unit:"hours"}),e.deepEqual(n.timeAgo(9e4),{value:1,unit:"days"}),e.deepEqual(n.timeAgo(9e6),{value:3,unit:"months"}),e.deepEqual(n.timeAgo(32e6),{value:1,unit:"years"}),e.deepEqual(n.timeAgo(102e6),{value:3,unit:"years"})})},function(e,t,i){(function(e){var t,n,o=i(17),a=i(13),s=i(7),r=i(5),l=i(4);QUnit.module("MobileFrontend util.js",{beforeEach:function(){n=l.sandbox.create(),o.setUp(n,e),a.setUp(n,e),s.setUp(n,e),r.setUp(n,e),t=i(1)},afterEach:function(){s.tearDown(),n.restore()}}),QUnit.test("escapeSelector()",function(e){e.strictEqual(t.escapeSelector("#selector-starts-with-hash"),"\\#selector-starts-with-hash")}),QUnit.test("grep()",function(e){e.deepEqual(t.grep([1,2],function(e){return e>1}),[2])}),QUnit.test("docReady()",function(e){var i=t.docReady();e.strictEqual(i instanceof $,!0)}),QUnit.test("when()",function(e){return t.when({resolved:!0}).then(function(t){e.strictEqual(t.resolved,!0)})}),QUnit.test("Deferred() - resolve",function(e){var i=new t.Deferred;return i.resolve("response"),i.then(function(t){e.strictEqual(t,"response")})}),QUnit.test("Deferred() - reject",function(e){var i=new t.Deferred;return i.reject("response"),i.catch(function(t){e.strictEqual(t,"response")})}),QUnit.test("getDocument()",function(e){e.strictEqual(t.getDocument().length,1)}),QUnit.test("getWindow()",function(e){e.strictEqual(t.getWindow().length,1)}),QUnit.test("parseHTML()",function(e){var i=t.parseHTML("<p>element content</p>",document);e.strictEqual("object"==typeof i,!0),e.strictEqual(i[0].innerHTML,"element content")}),QUnit.test("parseHTML()",function(e){var i=t.parseHTML("<p>element content</p>",document);e.strictEqual("object"==typeof i,!0),e.strictEqual(i[0].innerHTML,"element content")}),QUnit.test("isNumeric()",function(e){e.strictEqual(t.isNumeric(123),!0),e.strictEqual(t.isNumeric("123"),!0),e.strictEqual(t.isNumeric("The string 123 is true? I don't like it."),!1),e.strictEqual(t.isNumeric(NaN),!1)}),QUnit.test("extend()",function(e){var i={a:"apple"};t.extend(i,{b:"banana"}),e.strictEqual(JSON.stringify(i),'{"a":"apple","b":"banana"}')}),QUnit.test("escapeHash()",function(e){e.strictEqual(t.escapeHash("#escape:...hash"),"#escape\\:\\.\\.\\.hash")}),QUnit.test("isModifiedEvent() - true",function(e){var i=document.createElement("div");i.addEventListener("click",function(i){e.strictEqual(t.isModifiedEvent(i),!0)}),i.dispatchEvent(new window.MouseEvent("click",{ctrlKey:!0}))}),QUnit.test("isModifiedEvent() - false",function(e){var i=document.createElement("div");i.addEventListener("click",function(i){e.strictEqual(t.isModifiedEvent(i),!1)}),i.dispatchEvent(new window.MouseEvent("click"))}),QUnit.test("repeatEvent",function(e){var i=new OO.EventEmitter,n=new OO.EventEmitter;t.repeatEvent(n,i,"test"),i.on("test",function(t){e.strictEqual(t,"test data","proxy responds to source events correctly")}),n.emit("test","test data")})}).call(this,i(3))},function(e,t,i){(function(e){var t,n,o=i(31),a=i(7),s=i(0),r=i(5),l=i(4);QUnit.module("MobileFrontend mobile.startup/View",{beforeEach:function(){n=l.sandbox.create(),a.setUp(n,e),r.setUp(n,e),t=i(2)},afterEach:function(){n.restore()}}),QUnit.test("View",function(e){var i=new t({el:"body"});e.ok(i.$el instanceof $,"assign jQuery object to $el"),e.strictEqual(i.$el[0].tagName.toUpperCase(),"BODY","assign proper jQuery object to $el")}),QUnit.test("View, jQuery proxy functions",function(e){var i=new t({el:"body"});["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(t){var o=n.stub(i.$el,t);i[t]("test",1),e.ok(o.calledWith("test",1)),o.restore()})}),QUnit.test("View#preRender",function(e){var i;function n(){t.apply(this,arguments)}s(n,t,{template:o.compile("<p>{{text}}</p>"),preRender:function(){this.options.text="hello"}}),i=new n,e.strictEqual(i.$el.html(),"<p>hello</p>","manipulate template data")}),QUnit.test("View#postRender",function(e){var i=n.spy();function o(){t.apply(this,arguments)}s(o,t,{postRender:function(){i()}}),new o,e.strictEqual(i.callCount,1,"invoke postRender")}),QUnit.test("View#delegateEvents",function(e){var i;function n(){t.apply(this,arguments)}s(n,t,{template:o.compile("<p><span>test</span></p>"),events:{"click p span":function(t){t.preventDefault(),e.ok(!0,"Span was clicked and handled")},"click p":"onParagraphClick",click:"onClick"},onParagraphClick:function(t){t.preventDefault(),e.ok(!0,"Paragraph was clicked and handled")},onClick:function(t){t.preventDefault(),e.ok(!0,"View was clicked and handled")}}),(i=new n).appendTo("body"),i.$el.find("span").trigger("click"),i.$el.find("p").trigger("click"),i.$el.trigger("click"),i.undelegateEvents(),i.$el.find("span").trigger("click"),i.$el.find("p").trigger("click"),i.$el.trigger("click")}),QUnit.test("View#render (with isTemplateMode)",function(e){var i,n;function a(){t.apply(this,arguments)}function r(){t.apply(this,arguments)}s(a,t,{template:o.compile('<p class="foo"><span>test</span></p>'),isTemplateMode:!0}),s(r,t,{className:"bar",template:o.compile('<p class="foo"><span>test</span></p>')}),i=new a,n=new r,i.render(),n.render(),e.ok(i.$el.hasClass("foo")),e.ok(n.$el.hasClass("bar"))}),QUnit.test("View#render events (with isTemplateMode)",function(e){var i;function n(){t.apply(this,arguments)}s(n,t,{events:{"click span":"onClick"},onClick:function(){this.$el.empty().text("hello world")},template:o.compile('<p class="foo"><span>test</span></p>'),isTemplateMode:!0}),(i=new n).$("span").trigger("click"),e.strictEqual(i.$el.text(),"hello world","event was called"),e.strictEqual(i.$("span").length,0,"span disappeared"),(i=new n).render(),i.$("span").trigger("click"),e.strictEqual(i.$el.text(),"hello world","event was called"),e.strictEqual(i.$("span").length,0,"span disappeared")})}).call(this,i(3))},function(e,t,i){!function(e,t){e.Template=function(e,t,i,n){this.r=e||this.r,this.c=i,this.options=n,this.text=t||"",this.buf=""},e.Template.prototype={r:function(e,t,i){return""},v:function(e){return e=l(e),r.test(e)?e.replace(i,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(a,"&#39;").replace(s,"&quot;"):e},t:l,render:function(e,t,i){return this.ri([e],t||{},i)},ri:function(e,t,i){return this.r(e,t,i)},rp:function(e,t,i,n){var o=i[e];return o?(this.c&&"string"==typeof o&&(o=this.c.compile(o,this.options)),o.ri(t,i,n)):""},rs:function(e,t,i){var n=e[e.length-1];if(c(n))for(var o=0;o<n.length;o++)e.push(n[o]),i(e,t,this),e.pop();else i(e,t,this)},s:function(e,t,i,n,o,a,s){var r;return(!c(e)||0!==e.length)&&("function"==typeof e&&(e=this.ls(e,t,i,n,o,a,s)),r=""===e||!!e,!n&&r&&t&&t.push("object"==typeof e?e:t[t.length-1]),r)},d:function(e,t,i,n){var o=e.split("."),a=this.f(o[0],t,i,n),s=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var r=1;r<o.length;r++)a&&"object"==typeof a&&o[r]in a?(s=a,a=a[o[r]]):a="";return!(n&&!a)&&(n||"function"!=typeof a||(t.push(s),a=this.lv(a,t,i),t.pop()),a)},f:function(e,t,i,n){for(var o=!1,a=null,s=!1,r=t.length-1;r>=0;r--)if((a=t[r])&&"object"==typeof a&&e in a){o=a[e],s=!0;break}return s?(n||"function"!=typeof o||(o=this.lv(o,t,i)),o):!n&&""},ho:function(e,t,i,n,o){var a=this.c,s=this.options;return s.delimiters=o,n=null==(n=e.call(t,n))?String(n):n.toString(),this.b(a.compile(n,s).render(t,i)),!1},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,i,n,o,a,s){var r,l=t[t.length-1];if(!n&&this.c&&e.length>0)return this.ho(e,l,i,this.text.substring(o,a),s);if("function"==typeof(r=e.call(l))){if(n)return!0;if(this.c)return this.ho(r,l,i,this.text.substring(o,a),s)}return r},lv:function(e,t,i){var n=t[t.length-1],o=e.call(n);return"function"==typeof o&&(o=l(o.call(n)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(n,i):l(o)}};var i=/&/g,n=/</g,o=/>/g,a=/\'/g,s=/\"/g,r=/[&<>\"\']/;function l(e){return String(null===e||void 0===e?"":e)}var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t),function(e){var t=/\S/,i=/\"/g,n=/\n/g,o=/\r/g,a=/\\/g,s={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};function r(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function l(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function c(e,t,i){if(t.charAt(i)!=e.charAt(0))return!1;for(var n=1,o=e.length;n<o;n++)if(t.charAt(i+n)!=e.charAt(n))return!1;return!0}function u(e,t){for(var i=0,n=t.length;i<n;i++)if(t[i].o==e.n)return e.tag="#",!0}function p(e,t,i){for(var n=0,o=i.length;n<o;n++)if(i[n].c==e&&i[n].o==t)return!0}function d(e){return e.replace(a,"\\\\").replace(i,'\\"').replace(n,"\\n").replace(o,"\\r")}function h(e){return~e.indexOf(".")?"d":"f"}function f(e){for(var t="",i=0,n=e.length;i<n;i++){var o=e[i].tag;"#"==o?t+=m(e[i].nodes,e[i].n,h(e[i].n),e[i].i,e[i].end,e[i].otag+" "+e[i].ctag):"^"==o?t+=g(e[i].nodes,e[i].n,h(e[i].n)):"<"==o||">"==o?t+=w(e[i]):"{"==o||"&"==o?t+=v(e[i].n,h(e[i].n)):"\n"==o?t+=k('"\\n"'+(e.length-1==i?"":" + i")):"_v"==o?t+=b(e[i].n,h(e[i].n)):void 0===o&&(t+=k('"'+d(e[i])+'"'))}return t}function m(e,t,i,n,o,a){return"if(_.s(_."+i+'("'+d(t)+'",c,p,1),c,p,0,'+n+","+o+',"'+a+'")){_.rs(c,p,function(c,p,_){'+f(e)+"});c.pop();}"}function g(e,t,i){return"if(!_.s(_."+i+'("'+d(t)+'",c,p,1),c,p,1,0,0,"")){'+f(e)+"};"}function w(e){return'_.b(_.rp("'+d(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function v(e,t){return"_.b(_.t(_."+t+'("'+d(e)+'",c,p,0)));'}function b(e,t){return"_.b(_.v(_."+t+'("'+d(e)+'",c,p,0)));'}function k(e){return"_.b("+e+");"}e.scan=function(e,i){var n=e.length,o=0,a=null,u=null,p="",d=[],h=!1,f=0,m=0,g="{{",w="}}";function v(){p.length>0&&(d.push(new String(p)),p="")}function b(e,i){if(v(),e&&function(){for(var e=!0,i=m;i<d.length;i++)if(!(e=d[i].tag&&s[d[i].tag]<s._v||!d[i].tag&&null===d[i].match(t)))return!1;return e}())for(var n,o=m;o<d.length;o++)d[o].tag||((n=d[o+1])&&">"==n.tag&&(n.indent=d[o].toString()),d.splice(o,1));else i||d.push({tag:"\n"});h=!1,m=d.length}function k(e,t){var i="="+w,n=e.indexOf(i,t),o=l(e.substring(e.indexOf("=",t)+1,n)).split(" ");return g=o[0],w=o[1],n+i.length-1}for(i&&(i=i.split(" "),g=i[0],w=i[1]),f=0;f<n;f++)0==o?c(g,e,f)?(--f,v(),o=1):"\n"==e.charAt(f)?b(h):p+=e.charAt(f):1==o?(f+=g.length-1,"="==(a=(u=s[e.charAt(f+1)])?e.charAt(f+1):"_v")?(f=k(e,f),o=0):(u&&f++,o=2),h=f):c(w,e,f)?(d.push({tag:a,n:l(p),otag:g,ctag:w,i:"/"==a?h-w.length:f+g.length}),p="",f+=w.length-1,o=0,"{"==a&&("}}"==w?f++:r(d[d.length-1]))):p+=e.charAt(f);return b(h,!0),d},e.generate=function(t,i,n){var o='var _=this;_.b(i=i||"");'+f(t)+"return _.fl();";return n.asString?"function(c,p,i){"+o+";}":new e.Template(new Function("c","p","i",o),i,e,n)},e.parse=function(e,t,i){return function e(t,i,n,o){for(var a=[],s=null,r=null;t.length>0;)if("#"==(r=t.shift()).tag||"^"==r.tag||u(r,o))n.push(r),r.nodes=e(t,r.tag,n,o),a.push(r);else{if("/"==r.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+r.n);if(s=n.pop(),r.n!=s.n&&!p(r.n,s.n,o))throw new Error("Nesting error: "+s.n+" vs. "+r.n);return s.end=r.i,a}a.push(r)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return a}(e,0,[],(i=i||{}).sectionTags||[])},e.cache={},e.compile=function(e,t){var i=e+"||"+!!(t=t||{}).asString,n=this.cache[i];return n||(n=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[i]=n)}}(t)}],[[19,0]]]);
//# sourceMappingURL=tests.mobilefrontend.js.map.json