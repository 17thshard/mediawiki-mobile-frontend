this[void 0]=(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(e,t){e.exports={escapeSelector:function(e){return $.escapeSelector(e)},grep:function(){return $.grep.apply($,arguments)},docReady:function(e){return $(e)},when:function(){return $.when.apply($,arguments)},Deferred:function(){var e=$.Deferred(),t="Use Promise compatible methods `then` and `catch` instead.";return mw.log.deprecate(e,"fail",e.fail,t),mw.log.deprecate(e,"always",e.always,t),mw.log.deprecate(e,"done",e.done,t),e},getDocument:function(){return $(document.documentElement)},getWindow:function(){return $(window)},parseHTML:function(e,t){return $($.parseHTML(e,t))},isNumeric:function(){return $.isNumeric.apply($,arguments)},extend:function(){return $.extend.apply($,arguments)},escapeHash:function(e){return e.replace(/(:|\.)/g,"\\$1")},isModifiedEvent:function(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey},repeatEvent:function(e,t,i,n){return e.on(i,function(e){return t.emit(i,e)},n)}}},function(e,t){e.exports=function(e,t,i){var n;for(n in i?OO.inheritClass(e,t):(OO.initClass(e),i=t),i)e.prototype[n]=i[n]}},function(e,t,i){var n=i(0),o=i(1),s=/^(\S+)\s*(.*)$/,a=0;function r(){this.initialize.apply(this,arguments)}OO.mixinClass(r,OO.EventEmitter),o(r,{className:void 0,tagName:"div",isTemplateMode:!1,isBorderBox:!0,template:void 0,templatePartials:{},defaults:{},events:null,initialize:function(e){var t=this;OO.EventEmitter.call(this),e=n.extend({},this.defaults,e),this.options=e,this.cid=function(e){var t=(++a).toString();return e?e+t:t}("view"),"string"==typeof this.template&&(this.template=mw.template.compile(this.template)),e.el?this.$el=$(e.el):this.$el=this.parseHTML("<"+this.tagName+">"),this.$el.length?this._postInitialize():n.docReady(function(){t.$el=$(e.el),t._postInitialize()})},_postInitialize:function(){this.$el.addClass(this.className),this.isBorderBox&&this.$el.addClass("view-border-box"),this.render(this.options)},preRender:function(){},postRender:function(){},render:function(e){var t;return n.extend(this.options,e),this.preRender(),this.undelegateEvents(),this.template&&!this.options.skipTemplateRender&&(t=this.template.render(this.options,this.templatePartials),this.isTemplateMode?this.$el=$(t):this.$el.html(t)),this.postRender(),this.delegateEvents(),this},$:function(e){return this.$el.find(e)},delegateEvents:function(e){var t,i,n;if(e=e||this.events)for(i in this.undelegateEvents(),e)"function"!=typeof(n=e[i])&&(n=this[e[i]]),n&&(t=i.match(s),this.delegate(t[1],t[2],n.bind(this)))},delegate:function(e,t,i){this.$el.on(e+".delegateEvents"+this.cid,t,i)},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid)},undelegate:function(e,t,i){this.$el.off(e+".delegateEvents"+this.cid,t,i)},parseHTML:n.parseHTML}),["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(e){r.prototype[e]=function(){return this.$el[e].apply(this.$el,arguments),this}}),e.exports=r},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){!function(){e.exports=this.sinon}()},function(e,t,i){var n,o=i(0);function s(e){var t=function(){var i=this["__cache"+t.cacheId]||(this["__cache"+t.cacheId]={}),n=[].join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,n)?i[n]:i[n]=e.apply(this,arguments)};return t.cacheId=Date.now().toString()+Math.random().toString(),t}function a(e,t){this.userAgent=e,this.$el=t,this._fixIosLandscapeBug()}a.prototype={_fixIosLandscapeBug:function(){var e=this;this.$el.find('meta[name="viewport"]')[0]&&(this.isIos(4)||this.isIos(5))&&(this.lockViewport(),document.addEventListener("gesturestart",function(){e.lockViewport()},!1))},isIos:s(function(e){var t=this.userAgent,i=/ipad|iphone|ipod/i.test(t);if(!i||!e)return i;switch(e){case 8:return/OS 8_/.test(t)||/Version\/8/.test(t);case 4:return/OS 4_/.test(t);case 5:return/OS 5_/.test(t);default:return!1}}),lockViewport:function(){this.$el&&this.$el.find('meta[name="viewport"]').attr("content","initial-scale=1.0, maximum-scale=1.0, user-scalable=no")},isWideScreen:s(function(){var e=parseInt(mw.config.get("wgMFDeviceWidthTablet"),10);return window.innerWidth>=e||window.innerHeight>=e}),supportsAnimations:s(function(){var e=document.createElement("foo").style;function t(t){return t in e||"webkit"+t[0].toUpperCase()+t.slice(1)in e}return t("animationName")&&t("transform")&&t("transition")}),supportsTouchEvents:s(function(){return"ontouchstart"in window}),supportsGeoLocation:s(function(){return"geolocation"in window.navigator})},a.getSingleton=function(){var e;return n||(e=o.getDocument(),n=new a(window.navigator.userAgent,e)),n},e.exports=a},function(e,t,i){var n="object"!=typeof window;e.exports={setUp:function(e,t){n&&(t.$=t.$||void 0,e.stub(t,"$",i(27)))},tearDown:function(){n&&delete i.c[27]}}},function(e,t,i){var n="object"!=typeof window;e.exports={setUp:function(e,t){n&&(t.OO=t.OO||void 0,e.stub(t,"OO",i(43)))}}},function(e,t,i){var n=i(12),o=i(0);e.exports={spinner:function(e){return e=e||{},new n(o.extend(e,{name:"spinner",label:mw.msg("mobile-frontend-loading-message"),additionalClassNames:"spinner loading"}))}}},function(e,t,i){var n="object"!=typeof window,o=n&&i(35);e.exports={setUp:function(e,t){n&&(t.window=t.window||void 0,t.document=t.document||void 0,e.stub(t,"window",(new o.JSDOM).window),e.stub(t,"document",window.document))}}},function(e,t,i){var n="object"!=typeof window,o=i(36);e.exports={setUp:function(e,t){n&&(t.mw=t.mw||void 0,e.stub(t,"mw",o()))}}},function(e,t,i){var n=mw.html,o=i(1),s=i(13),a=i(0),r=i(16),l=i(17),c=i(2),d=mw.config.get("wgMFMobileFormatterHeadings").join(","),u=["noviewer","metadata"];function p(e){var t;void 0===e.thumbnail&&(e.thumbnail=!1),this.options=e,e.languageUrl=mw.util.getUrl("Special:MobileLanguages/"+e.title),c.call(this,e),e.displayTitle=this.getDisplayTitle(),this.title=e.title,this.displayTitle=e.displayTitle,this.thumbnail=e.thumbnail,this.url=e.url||mw.util.getUrl(e.title),this.id=e.id,this.isMissing=void 0!==e.isMissing?e.isMissing:0===e.id,(t=this.thumbnail)&&t.width&&(this.thumbnail.isLandscape=t.width>t.height),this.wikidataDescription=e.wikidataDescription}o(p,c,{defaults:{id:0,title:"",displayTitle:"",namespaceNumber:0,protection:{edit:["*"]},sections:[],isMissing:!1,isMainPage:!1,url:void 0,thumbnail:{isLandscape:void 0,source:void 0,width:void 0,height:void 0}},isBorderBox:!1,getDisplayTitle:function(){return this.options.displayTitle||n.escape(this.options.title)},inNamespace:function(e){return this.options.namespaceNumber===mw.config.get("wgNamespaceIds")[e]},findSectionHeadingByIndex:function(e){return e<1?this.$():this.$(d).filter('.mw-parser-output > *, [class^="mf-section-"] > *').eq(e-1)},findChildInSectionLead:function(e,t){var i,n,o,s,a=d;function r(e){return e.find(t).addBack()}return 0===e?(s=this.getLeadSectionElement())&&s.length?r(s.children(t)):(i=this.findSectionHeadingByIndex(1)).length?r(i.prevAll(t)):this.$(t):(i=this.findSectionHeadingByIndex(e)).hasClass("section-heading")?(n=(o=i.next()).find(a).eq(0)).length?r(n.prevAll(t)):r(o.children(t)):(n=i.eq(0).nextAll(a).eq(0),i.nextUntil(n,t))},getLeadSectionElement:function(){return this.$(".mf-section-0").length?this.$(".mf-section-0"):null},isWikiText:function(){return"wikitext"===mw.config.get("wgPageContentModel")},isMainPage:function(){return this.options.isMainPage},isWatched:function(){return this.options.isWatched},getRevisionId:function(){return this.options.revId},getTitle:function(){return this.options.title},getId:function(){return this.options.id},getNamespaceId:function(){var e=this.options.title.split(":");return e[1]&&mw.config.get("wgNamespaceIds")[e[0].toLowerCase().replace(" ","_")]||0},isTalkPage:function(){var e=this.getNamespaceId();return e>0&&e%2==1},preRender:function(){this.sections=[],this._sectionLookup={},this.title=this.options.title,this.options.sections.forEach(function(e){var t=new r(e);this.sections.push(t),this._sectionLookup[t.id]=t}.bind(this))},getThumbnails:function(){var e=this.$el,t="."+u.join(",."),i=[];return this._thumbs||(e.find("a.image, a.thumbimage").not(t).each(function(){var n=e.find(this),o=n.find(".lazy-image-placeholder"),s=0===n.parents(t).length&&0===n.find(t).length,a=n.attr("href").match(/title=([^/&]+)/),r=n.attr("href").match(/[^/]+$/);o.length&&s&&(s=!new RegExp("\\b("+u.join("|")+")\\b").test(o.data("class"))),s&&(a||r)&&i.push(new l({el:n,filename:decodeURIComponent(a?a[1]:r[0])}))}),this._thumbs=i),this._thumbs},getSection:function(e){return this._sectionLookup[e]},getSections:function(){return this.sections},getRedLinks:function(){return this.$(".new")}}),p.newFromJSON=function(e){var t,i,o=e.thumbnail,r=e.pageprops||{displaytitle:n.escape(e.title)},l=e.terms;return(r||l)&&(i=l&&l.label?n.escape(l.label[0]):r.displaytitle),e.wikidataDescription=e.description||void 0,o&&(e.thumbnail.isLandscape=o.width>o.height),e.revisions&&e.revisions[0]&&(t=e.revisions[0],e.lastModified=s.getLastModifiedMessage(new Date(t.timestamp).getTime()/1e3,t.user)),new p(a.extend(e,{id:e.pageid,isMissing:!!e.missing,url:mw.util.getUrl(e.title),displayTitle:i}))},p.HEADING_SELECTOR=d,e.exports=p},function(e,t,i){var n=i(1),o=i(2);function s(e){e.hasText&&(e.modifier="mw-ui-icon-before"),e.href&&(e.tagName="a"),o.call(this,e)}n(s,o,{preRender:function(){this.setRotationClass()},setRotationClass:function(){var e=this.options;if(e.rotation)switch(e.rotation){case-180:case 180:e._rotationClass="mf-mw-ui-icon-rotate-flip";break;case-90:e._rotationClass="mf-mw-ui-icon-rotate-anti-clockwise";break;case 90:e._rotationClass="mf-mw-ui-icon-rotate-clockwise";break;case 0:break;default:throw new Error("Bad value for rotation given. Must be ±90, 0 or ±180.")}},isTemplateMode:!0,defaults:{rotation:0,hasText:!1,href:void 0,glyphPrefix:"mf",tagName:"div",isSmall:!1,base:"mw-ui-icon",name:"",modifier:"mw-ui-icon-element",title:""},getClassName:function(){return this.$el.attr("class")},getGlyphClassName:function(){return this.options.base+"-"+this.options.glyphPrefix+"-"+this.options.name},toHtmlString:function(){return this.parseHTML("<div>").append(this.$el).html()},template:mw.template.get("mobile.startup","icon.hogan")}),e.exports=s},function(e,t,i){var n=["seconds","minutes","hours","days","months","years"],o=i(0),s=[1,60,3600,86400,2592e3,31536e3];function a(e){for(var t=0;t<s.length&&e>s[t+1];)++t;return{value:Math.round(e/s[t]),unit:n[t]}}function r(e){return a(Math.round((new Date).getTime()/1e3)-e)}function l(e){return"seconds"===e.unit&&e.value<10}e.exports={getLastModifiedMessage:function(e,t,i,n){var s,a,c=[];return i=i||"unknown",l(s=r(e))?c.push("mobile-frontend-last-modified-with-user-just-now",i,t):c.push({seconds:"mobile-frontend-last-modified-with-user-seconds",minutes:"mobile-frontend-last-modified-with-user-minutes",hours:"mobile-frontend-last-modified-with-user-hours",days:"mobile-frontend-last-modified-with-user-days",months:"mobile-frontend-last-modified-with-user-months",years:"mobile-frontend-last-modified-with-user-years"}[s.unit],i,t,mw.language.convertNumber(s.value)),c.push(n||"#",mw.language.convertNumber(t?1:0),t?mw.util.getUrl("User:"+t):""),a=mw.message.apply(this,c).parse(),n?a:o.parseHTML("<div>").html(a).text()},getRegistrationMessage:function(e,t){var i,n=[];return t=t||"unknown",l(i=r(parseInt(e,10)))?n.push("mobile-frontend-joined-just-now",t):n.push({seconds:"mobile-frontend-joined-seconds",minutes:"mobile-frontend-joined-minutes",hours:"mobile-frontend-joined-hours",days:"mobile-frontend-joined-days",months:"mobile-frontend-joined-months",years:"mobile-frontend-joined-years"}[i.unit],t,mw.language.convertNumber(i.value)),mw.message.apply(this,n).parse()},timeAgo:a,getTimeAgoDelta:r,isNow:l,isRecent:function(e){return["seconds","minutes","hours"].indexOf(e.unit)>-1}}},function(e,t,i){var n=i(19);n.Template=i(20).Template,e.exports=n},function(e,t){function i(){this._register={},OO.EventEmitter.call(this)}i.prototype={require:function(e){var t,i,n=this._register;function o(){if(!Object.hasOwnProperty.call(n,e))throw new Error("MobileFrontend Module not found: "+e);return n[e]}i=e.split("/");try{return(t=mw.loader.require(i[0]))[i[1]]?t[i[1]]:o()}catch(e){return o()}},define:function(e,t){var i=this;if(Object.hasOwnProperty.call(this._register,e))throw new Error("Module already exists: "+e);return this._register[e]=t,{deprecate:function(n){i.deprecate(n,t,e)}}},deprecate:function(e,t,i){var n;i&&(n="Use "+i+" instead."),mw.log.deprecate(this._register,e,t,n)}},OO.mixinClass(i,OO.EventEmitter),e.exports=i},function(e,t,i){var n=i(1),o=i(8),s=i(2);function a(e){var t=this;e.tag="h"+e.level,this.line=e.line,this.text=e.text,this.hasReferences=e.hasReferences||!1,this.id=e.id||null,this.anchor=e.anchor,this.subsections=[],(e.subsections||[]).forEach(function(e){t.subsections.push(new a(e))}),s.call(this,e)}n(a,s,{template:mw.template.get("mobile.startup","Section.hogan"),defaults:{line:void 0,text:"",spinner:o.spinner().toHtmlString()}}),e.exports=a},function(e,t,i){var n=i(1),o=i(2);function s(){o.apply(this,arguments)}n(s,o,{defaults:{filename:void 0},isBorderBox:!1,postRender:function(){this.options.description=this.$el.siblings(".thumbcaption").text()},getDescription:function(){return this.options.description},getFileName:function(){return this.options.filename}}),e.exports=s},function(e,t,i){var n=i(15);e.exports=new n},function(e,t,i){!function(e){var t=/\S/,i=/\"/g,n=/\n/g,o=/\r/g,s=/\\/g,a={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};function r(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function l(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function c(e,t,i){if(t.charAt(i)!=e.charAt(0))return!1;for(var n=1,o=e.length;n<o;n++)if(t.charAt(i+n)!=e.charAt(n))return!1;return!0}function d(e,t){for(var i=0,n=t.length;i<n;i++)if(t[i].o==e.n)return e.tag="#",!0}function u(e,t,i){for(var n=0,o=i.length;n<o;n++)if(i[n].c==e&&i[n].o==t)return!0}function p(e){return e.replace(s,"\\\\").replace(i,'\\"').replace(n,"\\n").replace(o,"\\r")}function m(e){return~e.indexOf(".")?"d":"f"}function h(e){for(var t="",i=0,n=e.length;i<n;i++){var o=e[i].tag;"#"==o?t+=g(e[i].nodes,e[i].n,m(e[i].n),e[i].i,e[i].end,e[i].otag+" "+e[i].ctag):"^"==o?t+=f(e[i].nodes,e[i].n,m(e[i].n)):"<"==o||">"==o?t+=b(e[i]):"{"==o||"&"==o?t+=v(e[i].n,m(e[i].n)):"\n"==o?t+=y('"\\n"'+(e.length-1==i?"":" + i")):"_v"==o?t+=w(e[i].n,m(e[i].n)):void 0===o&&(t+=y('"'+p(e[i])+'"'))}return t}function g(e,t,i,n,o,s){return"if(_.s(_."+i+'("'+p(t)+'",c,p,1),c,p,0,'+n+","+o+',"'+s+'")){_.rs(c,p,function(c,p,_){'+h(e)+"});c.pop();}"}function f(e,t,i){return"if(!_.s(_."+i+'("'+p(t)+'",c,p,1),c,p,1,0,0,"")){'+h(e)+"};"}function b(e){return'_.b(_.rp("'+p(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function v(e,t){return"_.b(_.t(_."+t+'("'+p(e)+'",c,p,0)));'}function w(e,t){return"_.b(_.v(_."+t+'("'+p(e)+'",c,p,0)));'}function y(e){return"_.b("+e+");"}e.scan=function(e,i){var n=e.length,o=0,s=null,d=null,u="",p=[],m=!1,h=0,g=0,f="{{",b="}}";function v(){u.length>0&&(p.push(new String(u)),u="")}function w(e,i){if(v(),e&&function(){for(var e=!0,i=g;i<p.length;i++)if(!(e=p[i].tag&&a[p[i].tag]<a._v||!p[i].tag&&null===p[i].match(t)))return!1;return e}())for(var n,o=g;o<p.length;o++)p[o].tag||((n=p[o+1])&&">"==n.tag&&(n.indent=p[o].toString()),p.splice(o,1));else i||p.push({tag:"\n"});m=!1,g=p.length}function y(e,t){var i="="+b,n=e.indexOf(i,t),o=l(e.substring(e.indexOf("=",t)+1,n)).split(" ");return f=o[0],b=o[1],n+i.length-1}for(i&&(i=i.split(" "),f=i[0],b=i[1]),h=0;h<n;h++)0==o?c(f,e,h)?(--h,v(),o=1):"\n"==e.charAt(h)?w(m):u+=e.charAt(h):1==o?(h+=f.length-1,"="==(s=(d=a[e.charAt(h+1)])?e.charAt(h+1):"_v")?(h=y(e,h),o=0):(d&&h++,o=2),m=h):c(b,e,h)?(p.push({tag:s,n:l(u),otag:f,ctag:b,i:"/"==s?m-b.length:h+f.length}),u="",h+=b.length-1,o=0,"{"==s&&("}}"==b?h++:r(p[p.length-1]))):u+=e.charAt(h);return w(m,!0),p},e.generate=function(t,i,n){var o='var _=this;_.b(i=i||"");'+h(t)+"return _.fl();";return n.asString?"function(c,p,i){"+o+";}":new e.Template(new Function("c","p","i",o),i,e,n)},e.parse=function(e,t,i){return function e(t,i,n,o){for(var s=[],a=null,r=null;t.length>0;)if("#"==(r=t.shift()).tag||"^"==r.tag||d(r,o))n.push(r),r.nodes=e(t,r.tag,n,o),s.push(r);else{if("/"==r.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+r.n);if(a=n.pop(),r.n!=a.n&&!u(r.n,a.n,o))throw new Error("Nesting error: "+a.n+" vs. "+r.n);return a.end=r.i,s}s.push(r)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return s}(e,0,[],(i=i||{}).sectionTags||[])},e.cache={},e.compile=function(e,t){var i=e+"||"+!!(t=t||{}).asString,n=this.cache[i];return n||(n=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[i]=n)}}(t)},function(e,t,i){!function(e,t){e.Template=function(e,t,i,n){this.r=e||this.r,this.c=i,this.options=n,this.text=t||"",this.buf=""},e.Template.prototype={r:function(e,t,i){return""},v:function(e){return e=l(e),r.test(e)?e.replace(i,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(s,"&#39;").replace(a,"&quot;"):e},t:l,render:function(e,t,i){return this.ri([e],t||{},i)},ri:function(e,t,i){return this.r(e,t,i)},rp:function(e,t,i,n){var o=i[e];return o?(this.c&&"string"==typeof o&&(o=this.c.compile(o,this.options)),o.ri(t,i,n)):""},rs:function(e,t,i){var n=e[e.length-1];if(c(n))for(var o=0;o<n.length;o++)e.push(n[o]),i(e,t,this),e.pop();else i(e,t,this)},s:function(e,t,i,n,o,s,a){var r;return(!c(e)||0!==e.length)&&("function"==typeof e&&(e=this.ls(e,t,i,n,o,s,a)),r=""===e||!!e,!n&&r&&t&&t.push("object"==typeof e?e:t[t.length-1]),r)},d:function(e,t,i,n){var o=e.split("."),s=this.f(o[0],t,i,n),a=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var r=1;r<o.length;r++)s&&"object"==typeof s&&o[r]in s?(a=s,s=s[o[r]]):s="";return!(n&&!s)&&(n||"function"!=typeof s||(t.push(a),s=this.lv(s,t,i),t.pop()),s)},f:function(e,t,i,n){for(var o=!1,s=null,a=!1,r=t.length-1;r>=0;r--)if((s=t[r])&&"object"==typeof s&&e in s){o=s[e],a=!0;break}return a?(n||"function"!=typeof o||(o=this.lv(o,t,i)),o):!n&&""},ho:function(e,t,i,n,o){var s=this.c,a=this.options;return a.delimiters=o,n=null==(n=e.call(t,n))?String(n):n.toString(),this.b(s.compile(n,a).render(t,i)),!1},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,i,n,o,s,a){var r,l=t[t.length-1];if(!n&&this.c&&e.length>0)return this.ho(e,l,i,this.text.substring(o,s),a);if("function"==typeof(r=e.call(l))){if(n)return!0;if(this.c)return this.ho(r,l,i,this.text.substring(o,s),a)}return r},lv:function(e,t,i){var n=t[t.length-1],o=e.call(n);return"function"==typeof o&&(o=l(o.call(n)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(n,i):l(o)}};var i=/&/g,n=/</g,o=/>/g,s=/\'/g,a=/\"/g,r=/[&<>\"\']/;function l(e){return String(null===e||void 0===e?"":e)}var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)},function(e,t){function i(){this._cache={}}function n(){}i.prototype.get=function(e){return this._cache[e]},i.prototype.set=function(e,t){this._cache[e]=t},n.prototype.get=function(){},n.prototype.set=function(){},e.exports={MemoryCache:i,NoCache:n}},function(e,t,i){var n=i(0);function o(e){e.on("route",this._checkRoute.bind(this)),this.router=e,this.entries={},this.stack=[],this.hideCurrent=!0}i(1)(o,{_onHideOverlay:function(){this.hideCurrent=!1,this.router.back()},_showOverlay:function(e){e.once("_om_hide",this._onHideOverlay.bind(this)),e.show()},_hideOverlay:function(e){var t;return e.off("_om_hide"),(t=e.hide(this.stack.length>1))||e.once("_om_hide",this._onHideOverlay.bind(this)),t},_processMatch:function(e){var t,i=this;function n(e){e.on("hide",function(){e.emit("_om_hide")})}e&&(e.overlay?i._showOverlay(e.overlay):"function"==typeof(t=e.factoryResult).promise?t.then(function(t){e.overlay=t,n(t),i._showOverlay(t)}):(e.overlay=t,n(e.overlay),i._showOverlay(t)))},_checkRoute:function(e){var t,i=this.stack[0];i||(this.scrollTop=window.pageYOffset),t=Object.keys(this.entries).reduce(function(t,i){return t||this._matchRoute(e.path,this.entries[i])}.bind(this),null),i&&void 0!==i.overlay&&this.hideCurrent&&!this._hideOverlay(i.overlay)?e.preventDefault():t||(this.stack=[],window.scrollTo(window.pageXOffset,this.scrollTop)),this.hideCurrent=!0,this._processMatch(t)},_matchRoute:function(e,t){var i,n=e.match(t.route),o=this.stack[1],s=this;function a(){return{path:e,factoryResult:t.factory.apply(s,n.slice(1))}}return n?o&&o.path===e?o.overlay&&o.overlay.hasLoadError?(s.stack.shift(),s.stack[0]=a(),s.stack[0]):(s.stack.shift(),o):(i=a(),this.stack[0]&&i.path===this.stack[0].path?s.stack[0]=i:s.stack.unshift(i),i):null},add:function(e,t){var i=this,o={route:e,factory:t};this.entries[e]=o,n.docReady(function(){i._processMatch(i._matchRoute(i.router.getPath(),o))})},replaceCurrent:function(e){if(0===this.stack.length)throw new Error("Trying to replace OverlayManager's current overlay, but stack is empty");this._hideOverlay(this.stack[0].overlay),this.stack[0].overlay=e,this._showOverlay(e)}}),e.exports=o},function(e,t,i){var n=mw.template.get("mobile.startup","Section.hogan"),o=i(0),s={};function a(e){var t,i=e.map(function(e){return e.level}).filter(function(e){return!!e}),o=Math.min.apply(this,i).toString(),s=[];return e.forEach(function(e){void 0!==e.line&&(e.line=e.line.replace(/<\/?a\b[^>]*>/g,"")),e.subsections=[],!t||!e.level||e.level===o||t.subsections.length&&t.subsections[0].level>e.level||t.level&&t.level>=e.level?(s.push(e),t=e):(!function e(t,i){var n;0===t.length?t.push(i):(n=t[t.length-1],parseInt(n.level,10)===parseInt(i.level,10)?t.push(i):e(n.subsections,i))}(t.subsections,e),t.text+=n.render(e))}),s}function r(e){this.api=e}r.prototype={getPage:function(e,t,i){var n,r=o.Deferred(),l=t?{url:t,dataType:"jsonp"}:{},c={edit:["*"]};return s[e]||(s[e]=this.api.get({action:"mobileview",page:e,variant:mw.config.get("wgPageContentLanguage"),redirect:"yes",prop:"id|sections|text|lastmodified|lastmodifiedby|languagecount|hasvariants|protection|displaytitle|revision",noheadings:"yes",sectionprop:"level|line|anchor",sections:i?0:"all"},l).then(function(t){var i,s,l,d;return t.error?r.reject(t.error):t.mobileview.sections?(i=a((d=t.mobileview).sections),n=new Date(d.lastmodified).getTime()/1e3,s=d.lastmodifiedby,c=Array.isArray(d.protection)?c:o.extend(c,d.protection),l={title:e,id:d.id,revId:d.revId,protection:c,lead:i[0].text,sections:i.slice(1),isMainPage:void 0!==d.mainpage,historyUrl:mw.util.getUrl(e,{action:"history"}),lastModifiedTimestamp:n,languageCount:d.languagecount,hasVariants:void 0!==d.hasvariants,displayTitle:d.displaytitle},s&&o.extend(l,{lastModifiedUserName:s.name,lastModifiedUserGender:s.gender}),l):r.reject("No sections")},function(e){return r.reject(e)})),s[e]},invalidatePage:function(e){delete s[e]},_getLanguageVariantsFromApiResponse:function(e,t){var i=t.query.general,n=i.variantarticlepath,o=[];return!!i.variants&&(Object.keys(i.variants).forEach(function(t){var s=i.variants[t],a={autonym:s.name,lang:s.code};a.url=n?n.replace("$1",e).replace("$2",s.code):mw.util.getUrl(e,{variant:s.code}),o.push(a)}),o)},getPageLanguages:function(e,t){var i=this,n={action:"query",meta:"siteinfo",siprop:"general",prop:"langlinks",lllimit:"max",titles:e,formatversion:2};return t?(n.llprop="url|autonym|langname",n.llinlanguagecode=t):n.llprop="url|autonym",this.api.get(n).then(function(t){return{languages:t.query.pages[0].langlinks||[],variants:i._getLanguageVariantsFromApiResponse(e,t)}},function(){return o.Deferred().reject()})},_getAPIResponseFromHTML:function(e){var t=[];return e.find("h1,h2,h3,h4,h5,h6").each(function(){var i=this.tagName.substr(1),n=e.find(this).find(".mw-headline");n.length&&t.push({level:i,line:n.html(),anchor:n.attr("id")||"",text:""})}),t},getSectionsFromHTML:function(e){return a(this._getAPIResponseFromHTML(e))}},e.exports=r},function(e,t,i){var n=i(5).getSingleton(),o=i(2),s=i(0),a=i(11),r=s.Deferred,l=s.when,c=i(8),d=mw.viewport,u=c.spinner(),p=i(1),m=i(18);function h(e){var t,i=a.HEADING_SELECTOR,n=e.parent(),o=e.prevAll(i).eq(0);return o.length&&(t=o.find(".mw-headline").attr("id"))?t:n.length?h(n):null}function g(e){var t=this;this.page=e.page,this.name=e.name,e.mainMenu&&(this.mainMenu=e.mainMenu,mw.log.warn("Skin: Use of mainMenu is deprecated.")),o.call(this,e),this.referencesGateway=e.referencesGateway,mw.config.get("wgMFLazyLoadImages")&&s.docReady(function(){t.setupImageLoading()}),mw.config.get("wgMFLazyLoadReferences")&&m.on("before-section-toggled",this.lazyLoadReferences.bind(this))}p(g,o,{isBorderBox:!1,defaults:{page:void 0},events:{},postRender:function(){var e=this.$el;n.supportsAnimations()&&e.addClass("animations"),n.supportsTouchEvents()&&e.addClass("touch-events"),s.parseHTML('<div class="transparent-shield cloaked-element">').appendTo(e.find("#mw-mf-page-center")),this.emit("changed"),this.$("#mw-mf-page-center").on("click",this.emit.bind(this,"click"))},getUnloadedImages:function(e){return(e=e||this.$("#content")).find(".lazy-image-placeholder").toArray()},setupImageLoading:function(e){var t=this,i=1.5*s.getWindow().height(),n=this.loadImagesList.bind(this),o=this.getUnloadedImages(e);function a(){var e=[];return(o=s.grep(o,function(n){var o=t.$(n);return!o.length||!function(e){return d.isElementCloseToViewport(e[0],i)&&(e.is(":visible")||0===e.height())}(o)||(e.push(n),!1)})).length||(m.off("scroll:throttled",a),m.off("resize:throttled",a),m.off("section-toggled",a),t.off("changed",a)),n(e)}return m.on("scroll:throttled",a),m.on("resize:throttled",a),m.on("section-toggled",a),this.on("changed",a),a()},loadImagesList:function(e){var t,i=this.$.bind(this),n=this.loadImage.bind(this);return t=(e=e||this.getUnloadedImages()).map(function(e){return n(i(e))}),l.apply(null,t)},loadImage:function(e){var t=r(),i=e.attr("data-width"),n=e.attr("data-height"),o=s.parseHTML("<img>",this.$el[0].ownerDocument);return o.on("load",function(){o.addClass("image-lazy-loaded"),e.replaceWith(o),t.resolve()}),o.on("error",function(){t.reject()}),o.attr({class:e.attr("data-class"),width:i,height:n,src:e.attr("data-src"),alt:e.attr("data-alt"),style:e.attr("style"),srcset:e.attr("data-srcset")}),t},lazyLoadReferences:function(e){var t,i,n=this.referencesGateway,o=this.getUnloadedImages.bind(this),s=this.loadImagesList.bind(this),a=this;if(!e.wasExpanded&&e.isReferenceSection)return(t=e.$heading.next()).data("are-references-loaded")?r().reject().promise():(t.children().addClass("hidden"),i=u.$el.prependTo(t),n.getReferencesLists(e.page).then(function(){var o;t.find(".mf-lazy-references-placeholder").each(function(){var i=0,s=t.find(this),a=h(s);o!==a?(i=0,o=a):i++,a&&n.getReferencesList(e.page,a).then(function(e){e&&e[i]&&s.replaceWith(e[i])})}),i.remove(),t.children().removeClass("hidden"),a.emit("references-loaded",a.page),l()},function(){i.remove(),t.children().removeClass("hidden"),l()}));function l(){s(o(t)),t.data("are-references-loaded",1)}},getLicenseMsg:function(){var e,t=mw.config.get("wgMFLicense"),i=mw.language.convertNumber(t.plural);return t.link&&(e=this.$("#footer-places-terms-use").length>0?mw.msg("mobile-frontend-editor-licensing-with-terms",mw.message("mobile-frontend-editor-terms-link",this.$("#footer-places-terms-use a").attr("href")).parse(),t.link,i):mw.msg("mobile-frontend-editor-licensing",t.link,i)),e}}),g.getSectionId=h,e.exports=g},,,function(e,t){!function(){e.exports=this.jquery}()},function(e,t){var i,n,o;i='<div>\n\t<h1><span class="mw-headline" id="1.0">A1</span></h1>\n\t<h2><span class="mw-headline">A2.1</span></h2>\n\t<h2><span class="mw-headline">A2.2</span></h2>\n\t<h1><span class="mw-headline">A2</span></h1>\n\t<h2><span class="mw-headline">A2.1</span><span>[<a href="#">edit</a>]</span></h2>\n\t<h1>Not to be shown in the TOC<span class="placeholder"></span></h1>\n</div>',n='<div>\n<h2><span class="mw-headline" id="1.0">A1</span></h2>\n<h3><span class="mw-headline">A2.1</span></h3>\n<h2><span class="mw-headline">A2.2</span></h2>\n<h1><span class="mw-headline">A2</span></h1>\n<h2><span class="mw-headline">A2.1</span></h2>\n</div>',o='<div id="mw-content-text">\n\t<h2 class="section-heading collapsible-heading open-block">\n\t\t<span class="mw-headline" id="Notes_and_references">Notes and references</span>\n\t</h2>\n\t<div class="mf-section-2 collapsible-block open-block" data-is-reference-section="1">\n\t\t<p>Text</p>\n\t\t<a class="mf-lazy-references-placeholder"></a>\n\t\t<h3><span class="mw-headline" id="Notes">Notes</span></h3>\n\t\t<a class="mf-lazy-references-placeholder"></a>\n\t\t<h4 class="in-block"><span class="mw-headline" id="Refs">Refs</span></h4>\n\t\t<a class="mf-lazy-references-placeholder"></a>\n\t\t<p>no forget</p>\n\t\t<h5 class="in-block"><span class="mw-headline" id="More_refs">More refs</span></h5>\n\t\t<p>1</p>\n\t\t<a class="mf-lazy-references-placeholder"></a>\n\t\t<p>2</p>\n\t\t<a class="mf-lazy-references-placeholder"></a>\n\t\t<p>3</p>\n\t</div>\n</div>',e.exports={skinPage:o,page:i,page2:n}},,,,,function(e,t,i){i(34),i(41),i(42),i(44),i(45),i(46),i(47),i(49),i(50),i(51),e.exports=i(52)},function(e,t,i){(function(e){var t,n,o=i(5),s=i(9),a=i(6),r=i(4),l=i(10);QUnit.module("MobileFrontend Browser.js",{beforeEach:function(){var i;n=r.sandbox.create(),s.setUp(n,e),a.setUp(n,e),l.setUp(n,e),i=window.document.implementation.createHTMLDocument("Test"),t=$(i)},afterEach:function(){n.restore()}}),QUnit.test("isIos()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),n=new o("Mozilla/5.0 (iPad; CPU OS 4_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),s=new o("Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),a=new o("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",t);e.strictEqual(i.isIos(),!0),e.strictEqual(i.isIos(8),!1),e.strictEqual(i.isIos(4),!1),e.strictEqual(i.isIos(5),!1),e.strictEqual(a.isIos(),!0),e.strictEqual(a.isIos(8),!0),e.strictEqual(n.isIos(4),!0),e.strictEqual(s.isIos(5),!0)}),QUnit.test("Methods are cached",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),n=new o("Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/8.0 Mobile/11A465 Safari/9537.53",t),s=new o("Android 2",t);function a(e,t){return e["__cache"+e[t].cacheId]}e.strictEqual(i.isIos(),!0),e.strictEqual(i.isIos(8),!1),e.strictEqual(s.isIos(8),!1),e.strictEqual(n.isIos(),!0),e.strictEqual(n.isIos(8),!0),e.strictEqual(Object.keys(a(i,"isIos")).length,2,"isIos on ipad cached as expected"),e.strictEqual(Object.keys(a(s,"isIos")).length,1,"isIos on android cached as expected"),e.strictEqual(Object.keys(a(n,"isIos")).length,2,"isIos on iphone cached as expected")}),QUnit.test("lockViewport()",function(e){var i,n=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);n.$el.find("head").append('<meta name="viewport"/>'),n.lockViewport(),i=n.$el.find('meta[name="viewport"]').attr("content"),e.strictEqual(i,"initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}),QUnit.test("isWideScreen()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);n.stub(mw.config,"get",function(){return"720px"}),e.strictEqual(i.isWideScreen(),!0)}),QUnit.test("supportsAnimations() - true",function(e){var i,s=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),a=n.stub(document,"createElement",function(){return{style:{animationName:"",transform:"",transition:""}}});i=s.supportsAnimations(),a.restore(),e.strictEqual(i,!0)}),QUnit.test("supportsAnimations() - false",function(e){var i,s=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t),a=n.stub(document,"createElement",function(){return{style:{}}});i=s.supportsAnimations(),a.restore(),e.strictEqual(i,!1)}),QUnit.test("supportsTouchEvents()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);window.ontouchstart=window.ontouchstart||void 0,e.strictEqual(i.supportsTouchEvents(),!0)}),QUnit.test("supportsGeoLocation()",function(e){var i=new o("Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko)",t);window.navigator.geolocation=window.navigator.geolocation||void 0,e.strictEqual(i.supportsGeoLocation(),!0)})}).call(this,i(3))},function(e,t){!function(){e.exports=this.jsdom}()},function(e,t,i){var n={special:-1,talk:1,user_talk:3,project:4,project_talk:5},o=i(37),s=i(40).ResourceModules;e.exports=function(){var e={wgNamespaceIds:n};return{Api:function(){return{get:function(){}}},config:{get:function(t){return e[t]},set:function(t,i){e[t]=i}},html:{escape:function(e){return e.replace(/['"<>&]/g,function(e){switch(e){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}})}},log:{deprecate:function(){}},msg:function(e){return e},now:Date.now.bind(Date),template:{get:function(e,t){var i=s[e].templates[t];return o.get(i)}},user:{},util:{getUrl:function(e){return e}},loader:{using:function(){}}}}},function(e,t,i){(function(t){var n,o="object"!=typeof window,s=i(14),a=i(38),r=i(39);n={html:function(e){return{render:function(){return e}}},hogan:function(e){return s.compile(e)}},e.exports={get:function(e){var i,s,l,c,d,u;if(!o)return s=(i=e.split("/"))[i.length-2],l=i[i.length-1],mw.template.get(s,l);if(d=a.extname(e).split(".").pop(),!n[d])throw new Error("Template compiler not found for extension '"+d+"'. Please add one to templateReader.js");return c=a.resolve(t,"../../../"),u=r.readFileSync(a.join(c,e),"utf8"),n[d](u)}}}).call(this,"/")},function(e,t){!function(){e.exports=this.path}()},function(e,t){!function(){e.exports=this.fs}()},function(e){e.exports={name:"MobileFrontend",version:"2.1.0",author:["Patrick Reilly","Max Semenik","Jon Robson","Arthur Richards","Brion Vibber","Juliusz Gonera","Ryan Kaldari","Florian Schmidt","Rob Moen","Sam Smith"],url:"https://www.mediawiki.org/wiki/Extension:MobileFrontend",descriptionmsg:"mobile-frontend-desc","license-name":"GPL-2.0-or-later",type:"other",requires:{MediaWiki:">= 1.32.0"},ConfigRegistry:{mobilefrontend:"GlobalVarConfig::newInstance"},SpecialPages:{History:"SpecialMobileHistory",MobileCite:"SpecialMobileCite",MobileDiff:"SpecialMobileDiff",MobileOptions:"SpecialMobileOptions",MobileMenu:"SpecialMobileMenu",MobileLanguages:"SpecialMobileLanguages",Uploads:"SpecialUploads"},APIModules:{mobileview:"ApiMobileView","webapp-manifest":"ApiWebappManifest"},MessagesDirs:{MobileFrontend:["i18n"]},ExtensionMessagesFiles:{MobileFrontendAlias:"MobileFrontend.alias.php"},AutoloadNamespaces:{"MobileFrontend\\ContentProviders\\":"includes/content-providers/","MobileFrontend\\Devices\\":"includes/devices/","MobileFrontend\\Transforms\\":"includes/transforms/","MobileFrontend\\Features\\":"includes/features/","MobileFrontend\\ResourceLoaderModules\\":"includes/modules/"},AutoloadClasses:{ExtMobileFrontend:"includes/MobileFrontend.body.php",MobileFrontendHooks:"includes/MobileFrontend.hooks.php",MobileFrontendSkinHooks:"includes/MobileFrontend.skin.hooks.php","MobileFrontend\\BaseDomainExtractorInterface":"includes/BaseDomainExtractorInterface.php","MobileFrontend\\WMFBaseDomainExtractor":"includes/WMFBaseDomainExtractor.php",MobileContext:"includes/MobileContext.php",MobileFormatter:"includes/MobileFormatter.php",MobileCollection:"includes/models/MobileCollection.php",MobilePage:"includes/models/MobilePage.php",MobileUI:"includes/MobileUI.php",ApiMobileView:"includes/api/ApiMobileView.php",ApiParseExtender:"includes/api/ApiParseExtender.php",ApiWebappManifest:"includes/api/ApiWebappManifest.php",InlineDiffFormatter:"includes/diff/InlineDiffFormatter.php",InlineDifferenceEngine:"includes/diff/InlineDifferenceEngine.php",SpecialUploads:"includes/specials/SpecialUploads.php",SpecialMobileHistory:"includes/specials/SpecialMobileHistory.php",SpecialMobileDiff:"includes/specials/SpecialMobileDiff.php",SpecialMobileOptions:"includes/specials/SpecialMobileOptions.php",SpecialMobileMenu:"includes/specials/SpecialMobileMenu.php",SpecialMobileWatchlist:"includes/specials/SpecialMobileWatchlist.php",SpecialMobileEditWatchlist:"includes/specials/SpecialMobileEditWatchlist.php",SpecialMobileContributions:"includes/specials/SpecialMobileContributions.php",SpecialNearby:"includes/specials/SpecialNearby.php",SpecialMobileLanguages:"includes/specials/SpecialMobileLanguages.php",SpecialMobileCite:"includes/specials/SpecialMobileCite.php",MobileSpecialPage:"includes/specials/MobileSpecialPage.php",MobileSpecialPageFeed:"includes/specials/MobileSpecialPageFeed.php"},ResourceModules:{"mobile.pagelist.styles":{targets:["mobile","desktop"],styles:["resources/mobile.pagelist.styles/pagelist.less"]},"mobile.pagesummary.styles":{targets:["mobile","desktop"],styles:["resources/mobile.pagesummary.styles/pagesummary.less"]},"mobile.startup.images.variants":{selectorWithoutVariant:".mw-ui-icon-mf-{name}:before",selectorWithVariant:".mw-ui-icon-mf-{name}-{variant}:before",class:"ResourceLoaderImageModule",variants:{gray:{color:"#a2a9b1",global:!0},invert:{color:"#fff",global:!0}},images:{alert:"resources/mobile.startup.images.variants/alert.svg",arrow:"resources/mobile.startup.images.variants/arrow.svg",back:{file:{ltr:"resources/mobile.startup.images.variants/back-ltr.svg",rtl:"resources/mobile.startup.images.variants/back-rtl.svg"}},"overlay-close":"resources/mobile.startup.images.variants/close.svg"}},"mobile.toc.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{toc:"resources/mobile.toc.images/contents-ltr.svg"}},"mobile.references.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{citation:"resources/mobile.references.images/cite.svg"}},"mobile.messageBox.styles":{targets:["mobile","desktop"],styles:["resources/mobile.messageBox.styles/messageBox.less"]},"mobile.userpage.icons":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before, mw-ui-icon-{name}:before",images:{userpage:"resources/mobile.userpage.icons/userpage.svg"}},"mobile.userpage.styles":{targets:["mobile","desktop"],styles:["resources/mobile.userpage.styles/userpage.less"]},"mobile.messageBox":{targets:["mobile","desktop"],dependencies:["mobile.startup","mobile.messageBox.styles"],templates:{"MessageBox.hogan":"resources/mobile.messageBox/MessageBox.hogan"},scripts:["resources/mobile.messageBox/MessageBox.js"]},"mediawiki.template.hogan":{targets:["mobile","desktop"],dependencies:["mediawiki.template"],scripts:["resources/dist/mobile.startup.runtime.js","resources/dist/mediawiki.template.hogan.js"]},"mobile.pagelist.scripts":{targets:["mobile","desktop"],dependencies:["mobile.watchstar","mobile.startup"],scripts:["resources/mobile.pagelist.scripts/WatchstarPageList.js"]},"mobile.watchlist":{targets:["mobile","desktop"],dependencies:["mobile.scrollEndEventEmitter","mobile.startup","mobile.pagelist.scripts"],scripts:["resources/mobile.watchlist/WatchListGateway.js","resources/mobile.watchlist/WatchList.js"]},"mobile.toc":{targets:["mobile","desktop"],dependencies:["mobile.startup","mobile.toggle","mobile.toc.images"],scripts:["resources/mobile.toc/TableOfContents.js"],styles:["resources/mobile.toc/toc.less"],templates:{"toc.hogan":"resources/mobile.toc/toc.hogan","heading.hogan":"resources/mobile.toc/tocHeading.hogan"},messages:["toc"]},"mobile.ajax.styles":{targets:["mobile","desktop"],styles:["resources/mobile.ajax.styles/spinner.less"]},"mobile.startup.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{error:"resources/mobile.startup.images/error.svg",watch:"resources/mobile.startup.images/watch.svg",watched:"resources/mobile.startup.images/watched.svg"}},"mobile.init":{dependencies:["mediawiki.experiments","mobile.references.gateway","mobile.startup"],targets:["mobile","desktop"],messages:["mobile-frontend-panel-betaoptin-msg","mobile-frontend-panel-ok","mobile-frontend-console-recruit","mobile-frontend-panel-cancel"],templates:{"Panel.hogan":"resources/mobile.init/Panel.hogan"},styles:["resources/mobile.init/mobile.less"],scripts:["resources/mobile.init/BetaOptinPanel.js","resources/mobile.init/init.js"]},"mobile.startup":{targets:["mobile","desktop"],dependencies:["mediawiki.template.hogan","mediawiki.ui.button","mediawiki.ui.icon","mobile.pagelist.styles","mobile.pagesummary.styles","mediawiki.notify","mobile.startup.images","mobile.startup.images.variants","mobile.ajax.styles","mediawiki.language","mediawiki.jqueryMsg","mediawiki.user","mediawiki.storage","oojs","mediawiki.util","mediawiki.api","mediawiki.viewport","jquery.throttle-debounce"],templates:{"PageListItem.hogan":"resources/mobile.startup/PageListItem.hogan","PageList.hogan":"resources/mobile.startup/PageList.hogan","Cta.hogan":"resources/mobile.startup/CtaDrawer.hogan","header.hogan":"resources/mobile.startup/OverlayHeader.hogan","Overlay.hogan":"resources/mobile.startup/Overlay.hogan","LoadingOverlay.hogan":"resources/mobile.startup/LoadingOverlay.hogan","anchor.hogan":"resources/mobile.startup/anchor.hogan","icon.hogan":"resources/mobile.startup/icon.hogan","Section.hogan":"resources/mobile.startup/Section.hogan","button.hogan":"resources/mobile.startup/button.hogan"},messages:["mobile-frontend-watchlist-cta-button-signup","mobile-frontend-watchlist-cta-button-login","mobile-frontend-editor-save","mobile-frontend-overlay-close","mobile-frontend-overlay-continue","mobile-frontend-last-modified-with-user-seconds","mobile-frontend-last-modified-with-user-minutes","mobile-frontend-last-modified-with-user-hours","mobile-frontend-last-modified-with-user-days","mobile-frontend-last-modified-with-user-months","mobile-frontend-last-modified-with-user-years","mobile-frontend-last-modified-with-user-just-now","mobile-frontend-joined-just-now","mobile-frontend-joined-seconds","mobile-frontend-joined-minutes","mobile-frontend-joined-hours","mobile-frontend-joined-days","mobile-frontend-joined-months","mobile-frontend-joined-years","mobile-frontend-loading-message","mobile-frontend-editor-licensing","mobile-frontend-editor-licensing-with-terms","mobile-frontend-editor-terms-link"],styles:["resources/mobile.startup/icon.less","resources/mobile.startup/panel.less","resources/mobile.startup/Overlay.less","resources/mobile.startup/LoadingOverlay.less","resources/mobile.startup/drawer.less"],scripts:["resources/dist/mobile.startup.js"]},"mobile.foreignApi":{targets:["mobile","desktop"],dependencies:["mobile.startup","mediawiki.ForeignApi.core"],scripts:["resources/mobile.foreignApi/JSONPForeignApi.js"]},"mobile.editor.api":{targets:["mobile","desktop"],dependencies:["mobile.startup"],scripts:["resources/mobile.editor.api/EditorGateway.js"]},"mobile.editor.common":{targets:["mobile","desktop"],dependencies:["oojs-ui","mobile.editor.api","mobile.startup","mobile.messageBox","mediawiki.util","mediawiki.confirmCloseWindow"],scripts:["resources/mobile.editor.common/schemaEdit.js","resources/mobile.editor.common/AbuseFilterOverlay.js","resources/mobile.editor.common/AbuseFilterPanel.js","resources/mobile.editor.common/EditorOverlayBase.js"],styles:["resources/mobile.editor.common/editor.less"],templates:{"AbuseFilterOverlay.hogan":"resources/mobile.editor.common/AbuseFilterOverlay.hogan","AbuseFilterPanel.hogan":"resources/mobile.editor.common/AbuseFilterPanel.hogan","editHeader.hogan":"resources/mobile.editor.common/editHeader.hogan","previewHeader.hogan":"resources/mobile.editor.common/previewHeader.hogan","saveHeader.hogan":"resources/mobile.editor.common/saveHeader.hogan","EditorOverlayBase.hogan":"resources/mobile.editor.common/EditorOverlayBase.hogan","EditorOverlayAnonWarning.hogan":"resources/mobile.editor.common/EditorOverlayAnonWarning.hogan"},messages:["mobile-frontend-editor-continue","mobile-frontend-editor-cancel","mobile-frontend-editor-keep-editing","mobile-frontend-editor-placeholder","mobile-frontend-editor-placeholder-new-page","mobile-frontend-editor-summary","mobile-frontend-editor-summary-request","mobile-frontend-editor-summary-placeholder","mobile-frontend-editor-cancel-confirm","mobile-frontend-editor-new-page-confirm","mobile-frontend-editor-wait","mobile-frontend-editor-success","mobile-frontend-editor-success-landmark-1","mobile-frontend-editor-success-new-page","mobile-frontend-editor-error","mobile-frontend-editor-error-conflict","mobile-frontend-editor-error-loading","mobile-frontend-editor-error-preview","mobile-frontend-account-create-captcha-placeholder","mobile-frontend-editor-captcha-try-again","mobile-frontend-editor-editing-page","mobile-frontend-editor-previewing-page","mobile-frontend-editor-switch-confirm","mobile-frontend-editor-switch-editor","mobile-frontend-editor-switch-visual-editor","mobile-frontend-editor-anonwarning","mobile-frontend-editor-abusefilter-warning","mobile-frontend-editor-abusefilter-disallow","mobile-frontend-editor-abusefilter-read-more"]},"mobile.editor.overlay":{targets:["mobile","desktop"],dependencies:["mobile.editor.common","mobile.editor.images","oojs-ui.styles.icons-editing-core","mediawiki.util","mediawiki.notification","mediawiki.user","mediawiki.editfont.styles"],scripts:["resources/mobile.editor.overlay/BlockMessage.js","resources/mobile.editor.overlay/EditorOverlay.js"],styles:["resources/mobile.editor.overlay/BlockMessage.less"],templates:{"BlockMessage.hogan":"resources/mobile.editor.overlay/BlockMessage.hogan","content.hogan":"resources/mobile.editor.overlay/content.hogan"},messages:["ok","mobile-frontend-editor-blocked-drawer-title","mobile-frontend-editor-blocked-drawer-reason-header","mobile-frontend-editor-blocked-drawer-creator-header","mobile-frontend-editor-blocked-drawer-expiry-header","mobile-frontend-editor-generic-block-reason","mobile-frontend-editor-viewing-source-page","mobile-frontend-editor-anon","apierror-readonly"]},"mobile.editor.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{profile:"resources/mobile.editor.images/profile.svg","stop-hand":"resources/mobile.editor.images/stop-hand.svg"}},"mobile.search.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{clear:"resources/mobile.search.images/clear.svg","search-content":"resources/mobile.search.images/search-content.svg"}},"mobile.search":{targets:["mobile","desktop"],dependencies:["mobile.pagelist.scripts","mobile.startup","mobile.search.images"],styles:["resources/mobile.search/SearchOverlay.less"],scripts:["resources/mobile.search/schemaMobileWebSearch.js","resources/mobile.search/SearchOverlay.js","resources/mobile.search/MobileWebSearchLogger.js"],templates:{"header.hogan":"resources/mobile.search/header.hogan","content.hogan":"resources/mobile.search/content.hogan"},messages:["mobile-frontend-clear-search","mobile-frontend-search-content","mobile-frontend-search-no-results","mobile-frontend-search-content-no-results","mobile-frontend-search-feedback-prompt","mobile-frontend-search-feedback-link-text"]},"mobile.search.util":{targets:["mobile","desktop"],dependencies:["mobile.startup"],scripts:["resources/mobile.search.util/extendSearchParams.js"]},"mobile.search.api":{targets:["mobile","desktop"],dependencies:["mobile.startup","mediawiki.Title","mobile.search.util"],scripts:["resources/mobile.search.api/SearchGateway.js"]},"mobile.talk.overlays":{targets:["mobile","desktop"],dependencies:["mediawiki.util","mediawiki.ui.anchor","mobile.editor.common"],scripts:["resources/mobile.talk.overlays/TalkOverlayBase.js","resources/mobile.talk.overlays/TalkSectionOverlay.js","resources/mobile.talk.overlays/TalkSectionAddOverlay.js","resources/mobile.talk.overlays/TalkOverlay.js"],styles:["resources/mobile.talk.overlays/TalkOverlay.less"],templates:{"content.hogan":"resources/mobile.talk.overlays/content.hogan","SectionAddOverlay/contentHeader.hogan":"resources/mobile.talk.overlays/talkSectionAddContentHeader.hogan","SectionAddOverlay.hogan":"resources/mobile.talk.overlays/talkSectionAdd.hogan","Section/header.hogan":"resources/mobile.talk.overlays/talkSectionHeader.hogan","Section/content.hogan":"resources/mobile.talk.overlays/talkSectionContent.hogan"},messages:["mobile-frontend-talk-overlay-header","mobile-frontend-talk-fullpage","mobile-frontend-talk-explained","mobile-frontend-talk-explained-empty","mobile-frontend-talk-overlay-lead-header","mobile-frontend-talk-add-overlay-subject-placeholder","mobile-frontend-talk-add-overlay-content-placeholder","mobile-frontend-talk-add-overlay-submit","mobile-frontend-talk-reply-success","mobile-frontend-talk-reply","mobile-frontend-talk-reply-info","mobile-frontend-talk-topic-feedback","mobile-frontend-talk-topic-error","mobile-frontend-talk-topic-error-protected","mobile-frontend-talk-topic-error-permission","mobile-frontend-talk-topic-error-spam","mobile-frontend-talk-topic-error-badtoken","mobile-frontend-talk-topic-wait","mobile-frontend-editor-cancel","mobile-frontend-editor-cancel-confirm","mobile-frontend-editor-error","mobile-frontend-editor-error-conflict","mobile-frontend-editor-save","newsectionsummary"]},"mobile.mediaViewer":{targets:["mobile","desktop"],dependencies:["mobile.startup","mediawiki.router"],styles:["resources/mobile.mediaViewer/mediaViewer.less"],scripts:["resources/mobile.mediaViewer/LoadErrorMessage.js","resources/mobile.mediaViewer/ImageGateway.js","resources/mobile.mediaViewer/ImageOverlay.js"],templates:{"LoadErrorMessage.hogan":"resources/mobile.mediaViewer/LoadErrorMessage.hogan","Overlay.hogan":"resources/mobile.mediaViewer/ImageOverlay.hogan"},messages:["mobile-frontend-media-details","mobile-frontend-media-license-link","mobile-frontend-media-load-fail-message","mobile-frontend-media-load-fail-retry"]},"mobile.categories.overlays":{targets:["mobile","desktop"],dependencies:["mediawiki.Title","mobile.startup","mobile.search.api","mobile.search","mobile.editor.common","mobile.scrollEndEventEmitter","oojs-ui.styles.icons-interactions","oojs-ui"],scripts:["resources/mobile.categories.overlays/CategoryGateway.js","resources/mobile.categories.overlays/CategoryLookupInputWidget.js","resources/mobile.categories.overlays/CategoryOverlay.js","resources/mobile.categories.overlays/CategoryAddOverlay.js"],styles:["resources/mobile.categories.overlays/categories.less"],templates:{"CategoryOverlay.hogan":"resources/mobile.categories.overlays/CategoryOverlay.hogan","CategoryOverlayItem.hogan":"resources/mobile.categories.overlays/CategoryOverlayItem.hogan","CategoryAddOverlay.hogan":"resources/mobile.categories.overlays/CategoryAddOverlay.hogan","CategoryAddOverlayHeader.hogan":"resources/mobile.categories.overlays/CategoryAddOverlayHeader.hogan"},messages:["mobile-frontend-categories-heading","mobile-frontend-categories-subheading","mobile-frontend-categories-nocat","mobile-frontend-categories-add","mobile-frontend-categories-nomatch","mobile-frontend-categories-search","mobile-frontend-categories-nodata","mobile-frontend-categories-summary","mobile-frontend-categories-add-heading","mobile-frontend-categories-add-wait","mobile-frontend-categories-normal","mobile-frontend-categories-hidden"]},"mobile.references":{targets:["mobile","desktop"],dependencies:["mobile.references.gateway","mobile.startup","mobile.editor.api","mobile.references.images"],messages:["mobile-frontend-references-citation-error","mobile-frontend-references-citation"],styles:["resources/mobile.references/references.less"],templates:{"Drawer.hogan":"resources/mobile.references/ReferencesDrawer.hogan"},scripts:["resources/mobile.references/ReferencesDrawer.js"]},"mobile.references.gateway":{targets:["mobile","desktop"],dependencies:["mediawiki.api","mobile.startup"],scripts:["resources/mobile.references.gateway/ReferencesGateway.js","resources/mobile.references.gateway/ReferencesHtmlScraperGateway.js","resources/mobile.references.gateway/ReferencesMobileViewGateway.js"]},"mobile.toggle":{targets:["mobile","desktop"],dependencies:["mobile.startup"],styles:["resources/mobile.toggle/toggle.less"],scripts:["resources/mobile.toggle/toggle.js"]},"mobile.watchstar":{targets:["mobile","desktop"],dependencies:["mobile.startup","mobile.ajax.styles","mobile.search.util"],scripts:["resources/mobile.watchstar/WatchstarGateway.js","resources/mobile.watchstar/Watchstar.js"],styles:["resources/mobile.watchstar/watchstar.less"],messages:["watchthispage","unwatchthispage","mobile-frontend-watchlist-error","mobile-frontend-watchlist-add","mobile-frontend-watchlist-removed","mobile-frontend-watchlist-cta","mobile-frontend-watchlist-please-wait"]},"mobile.languages.structured":{targets:["mobile","desktop"],dependencies:["mediawiki.storage","mobile.startup"],scripts:["resources/mobile.languages.structured/util.js","resources/mobile.languages.structured/LanguageOverlay.js"],styles:["resources/mobile.languages.structured/LanguageOverlay.less"],templates:{"LanguageOverlay.hogan":"resources/mobile.languages.structured/LanguageOverlay.hogan"},messages:["mobile-frontend-language-heading","mobile-frontend-languages-structured-overlay-suggested-languages-header","mobile-frontend-languages-structured-overlay-all-languages-header","mobile-frontend-languages-structured-overlay-search-input-placeholder"]},"mobile.nearby":{targets:["mobile","desktop"],dependencies:["mobile.ajax.styles","mobile.special.nearby.styles","mediawiki.language","mobile.pagelist.scripts","mobile.foreignApi","mobile.messageBox","mobile.search.util","mobile.nearby.images"],messages:["mobile-frontend-nearby-distance","mobile-frontend-nearby-distance-meters","mobile-frontend-nearby-requirements","mobile-frontend-nearby-requirements-guidance","mobile-frontend-nearby-error","mobile-frontend-nearby-error-guidance","mobile-frontend-nearby-loading","mobile-frontend-nearby-noresults","mobile-frontend-nearby-noresults-guidance","mobile-frontend-nearby-location-unavailable","mobile-frontend-nearby-permission-denied"],scripts:["resources/mobile.nearby/LocationProvider.js","resources/mobile.nearby/NearbyGateway.js","resources/mobile.nearby/Nearby.js"],templates:{"Nearby.hogan":"resources/mobile.nearby/nearby.hogan"}},"mobile.nearby.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-mf-nearby-image-{name}:before",images:{info:"resources/mobile.nearby.images/nearby-article-illustration.svg"}},"mobile.gallery":{targets:["mobile","desktop"],dependencies:["mobile.startup","mobile.scrollEndEventEmitter"],templates:{"PhotoItem.hogan":"resources/mobile.gallery/PhotoItem.hogan","PhotoList.hogan":"resources/mobile.gallery/PhotoList.hogan"},messages:["mobile-frontend-donate-image-nouploads"],styles:["resources/mobile.gallery/gallery.less"],scripts:["resources/mobile.gallery/PhotoListGateway.js","resources/mobile.gallery/PhotoItem.js","resources/mobile.gallery/PhotoList.js"]},"mobile.scrollEndEventEmitter":{targets:["mobile","desktop"],dependencies:["mobile.startup"],scripts:["resources/mobile.scrollEndEventEmitter/ScrollEndEventEmitter.js"]},"mobile.mainpage.css":{class:"MobileFrontend\\ResourceLoaderModules\\MobileMainPageStyleModule"},"mobile.site":{class:"MobileFrontend\\ResourceLoaderModules\\MobileSiteModule"},"mobile.site.styles":{class:"MobileFrontend\\ResourceLoaderModules\\MobileSiteStylesModule"},"mobile.special.styles":{targets:"mobile",styles:["resources/mobile.special.styles/common.less","resources/mobile.special.styles/forms.less"]},"mobile.special.user.icons":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{user:"resources/mobile.special.user.icons/userNormal.svg",anonymous:"resources/mobile.special.user.icons/userAnonymous.svg"}},"mobile.special.watchlist.scripts":{targets:"mobile",dependencies:["mobile.startup","mediawiki.api","mobile.watchlist"],scripts:["resources/mobile.special.watchlist.scripts/watchlist.js"]},"mobile.special.mobilecite.styles":{targets:"mobile",styles:["resources/mobile.special.mobilecite.styles/mobilecite.less"]},"mobile.special.mobilemenu.styles":{targets:"mobile"},"mobile.special.mobileoptions.styles":{targets:["mobile","desktop"],styles:["resources/mobile.special.mobileoptions.styles/mobileoptions.less"]},"mobile.special.mobileoptions.scripts":{targets:["mobile","desktop"],dependencies:["mobile.startup"],scripts:["resources/mobile.special.mobileoptions.scripts/mobileoptions.js"],messages:["mobile-frontend-settings-save","mobile-frontend-fontchanger-option-small","mobile-frontend-fontchanger-option-medium","mobile-frontend-fontchanger-option-large","mobile-frontend-fontchanger-option-xlarge","mobile-frontend-expand-sections-description","mobile-frontend-expand-sections-status","mobile-frontend-fontchanger-desc","mobile-frontend-fontchanger-link"]},"mobile.special.nearby.styles":{targets:["mobile","desktop"],styles:["resources/mobile.special.nearby.styles/specialNearby.less"],skinStyles:{vector:"skinStyles/mobile.special.nearby.styles/desktop.less",monobook:"skinStyles/mobile.special.nearby.styles/desktop.less"}},"mobile.special.userlogin.scripts":{targets:["mobile","desktop"],scripts:["resources/mobile.special.userlogin.scripts/userlogin.js"]},"mobile.special.nearby.scripts":{targets:["mobile","desktop"],dependencies:["mobile.nearby","mediawiki.router","mediawiki.Uri"],scripts:["resources/mobile.special.nearby.scripts/nearby.js"]},"mobile.special.history.styles":{targets:"mobile",styles:["resources/mobile.special.history.styles/default.less"]},"mobile.special.uploads.scripts":{targets:["mobile","desktop"],dependencies:["mobile.gallery","mobile.startup"],scripts:["resources/mobile.special.uploads.scripts/uploads.js"]},"mobile.special.uploads.styles":{targets:"mobile",styles:["resources/mobile.special.uploads.styles/default.less"]},"mobile.special.pagefeed.styles":{targets:"mobile",styles:["resources/mobile.special.pagefeed.styles/pagefeed.less"]},"mobile.special.mobilediff.images":{class:"ResourceLoaderImageModule",selector:".mw-ui-icon-mf-{name}:before",images:{bytesadded:"resources/mobile.special.mobilediff.images/bytes-added.svg",bytesneutral:"resources/mobile.special.mobilediff.images/bytes-neutral.svg",bytesremoved:"resources/mobile.special.mobilediff.images/bytes-removed.svg"}},"mobile.special.mobilediff.scripts":{targets:"mobile",dependencies:["mobile.special.mobilediff.images","mobile.startup","mediawiki.util","mediawiki.Title"],messages:["markedaspatrollednotify","markedaspatrollederrornotify","markedaspatrollederror-noautopatrol"],scripts:["resources/mobile.special.mobilediff.scripts/init.js"]},"mobile.special.mobilediff.styles":{targets:"mobile",styles:["resources/mobile.special.mobilediff.styles/mobilediff.less"]}},ResourceFileModulePaths:{localBasePath:"",remoteExtPath:"MobileFrontend"},EventLoggingSchemas:{MobileWebMainMenuClickTracking:11568715,MobileWebSearch:12054448},Hooks:{APIGetAllowedParams:["ApiParseExtender::onAPIGetAllowedParams"],APIAfterExecute:["ApiParseExtender::onAPIAfterExecute"],APIQuerySiteInfoGeneralInfo:["MobileFrontendHooks::onAPIQuerySiteInfoGeneralInfo"],AuthChangeFormFields:["MobileFrontendHooks::onAuthChangeFormFields"],RequestContextCreateSkinMobile:[],RequestContextCreateSkin:["MobileFrontendHooks::onRequestContextCreateSkin"],MediaWikiPerformAction:["MobileFrontendHooks::onMediaWikiPerformAction"],OutputPageBeforeHTML:["MobileFrontendHooks::onOutputPageBeforeHTML"],SkinAfterBottomScripts:["MobileFrontendHooks::onSkinAfterBottomScripts"],SkinTemplateOutputPageBeforeExec:["MobileFrontendHooks::onSkinTemplateOutputPageBeforeExec"],BeforePageRedirect:["MobileFrontendHooks::onBeforePageRedirect"],DiffViewHeader:["MobileFrontendHooks::onDiffViewHeader"],ResourceLoaderTestModules:["MobileFrontendHooks::onResourceLoaderTestModules"],GetCacheVaryCookies:["MobileFrontendHooks::onGetCacheVaryCookies"],ResourceLoaderGetConfigVars:["MobileFrontendHooks::onResourceLoaderGetConfigVars"],SpecialPage_initList:["MobileFrontendHooks::onSpecialPageInitList"],ListDefinedTags:["MobileFrontendHooks::onListDefinedTags"],ChangeTagsListActive:["MobileFrontendHooks::onListDefinedTags"],RecentChange_save:["MobileFrontendHooks::onRecentChangeSave"],"AbuseFilter-generateUserVars":["MobileFrontendHooks::onAbuseFilterGenerateUserVars"],"AbuseFilter-builder":["MobileFrontendHooks::onAbuseFilterBuilder"],SpecialPageBeforeExecute:["MobileFrontendHooks::onSpecialPageBeforeExecute"],UserLoginComplete:["MobileFrontendHooks::onUserLoginComplete"],BeforePageDisplay:["MobileFrontendHooks::onBeforePageDisplay"],GetPreferences:["MobileFrontendHooks::onGetPreferences"],"Gadgets::allowLegacy":["MobileFrontendHooks::onAllowLegacyGadgets"],CentralAuthLoginRedirectData:["MobileFrontendHooks::onCentralAuthLoginRedirectData"],CentralAuthSilentLoginRedirect:["MobileFrontendHooks::onCentralAuthSilentLoginRedirect"],ResourceLoaderRegisterModules:["MobileFrontendHooks::onResourceLoaderRegisterModules"],OutputPageParserOutput:["MobileFrontendHooks::onOutputPageParserOutput"],"HTMLFileCache::useFileCache":["MobileFrontendHooks::onHTMLFileCacheUseFileCache"],LoginFormValidErrorMessages:["MobileFrontendHooks::onLoginFormValidErrorMessages"],ThumbnailBeforeProduceHTML:["MobileFrontendHooks::onThumbnailBeforeProduceHTML"],PageRenderingHash:["MobileFrontendHooks::onPageRenderingHash"],AfterBuildFeedLinks:["MobileFrontendHooks::onAfterBuildFeedLinks"],MakeGlobalVariablesScript:["MobileFrontendHooks::onMakeGlobalVariablesScript"],TitleSquidURLs:["MobileFrontendHooks::onTitleSquidURLs"],UserGetDefaultOptions:["MobileFrontendHooks::onUserGetDefaultOptions"],GetDifferenceEngine:["MobileFrontendHooks::onGetDifferenceEngine"]},config:{MFWatchlistRunsChangesListSpecialPageQuery:!1,MFEnableFontChanger:{base:!0,beta:!0},MFEnableMobilePreferences:!1,MFContentProviderTryLocalContentFirst:!0,MFContentProviderClass:"MobileFrontend\\ContentProviders\\DefaultContentProvider",MFMwApiContentProviderBaseUri:"https://en.wikipedia.org/w/api.php",MFMcsContentProviderBaseUri:"https://en.wikipedia.org/api/rest_v1",MFEnableXAnalyticsLogging:!1,MFAppPackageId:!1,MFAppScheme:"http",MFEditorOptions:{skipPreview:!1},MFExperiments:{betaoptin:{name:"betaoptin",enabled:!1,buckets:{control:.97,A:.03}},_merge_strategy:"array_plus_2d"},MFEnableJSConsoleRecruitment:!1,MFAlwaysUseContentProvider:!1,MFMobileFormatterHeadings:["h1","h2","h3","h4","h5","h6"],MFSpecialCaseMainPage:!1,MFMobileHeader:"X-Subdomain",MFRemovableClasses:{beta:[],base:[".toc",".navbox",".nomobile"]},MFShowFirstParagraphBeforeInfobox:{base:!0,beta:!0},MFLazyLoadImages:{base:!0,beta:!0},MFLazyLoadSkipSmallImages:!1,MFLazyLoadReferences:{base:!1,beta:!0},MFMobileFormatterNamespaceBlacklist:[10,-1],MFNoMobileCategory:!1,MFNoMobilePages:[],MFSpecialPageTaglines:{MobileOptions:"mobile-frontend-settings-tagline"},MFNearbyRange:1e4,MFNearby:!1,MFNearbyEndpoint:"",MFSearchAPIParams:{ppprop:"displaytitle"},MFQueryPropModules:["pageprops"],MFSearchGenerator:{name:"prefixsearch",prefix:"ps"},MFMobileMainPageCss:!1,MFMinCachedPageSize:65536,MFAutodetectMobileView:!0,MFVaryOnUA:!1,MFShowMobileViewToTablets:!0,MobileUrlTemplate:"",MobileFrontendFormatCookieExpiry:null,MFNoindexPages:!0,MFStopRedirectCookieHost:null,MobileFrontendLogo:!1,MFEnableBeta:!1,MFBetaFeedbackLink:!1,MFDefaultSkinClass:"SkinMinerva",MFNamespacesWithoutCollapsibleSections:[6,14,-1,-2],MFCollapseSectionsByDefault:!0,MFPhotoUploadWiki:null,MFPhotoUploadEndpoint:"",MFExpandAllSectionsUserOption:{base:!0,beta:!0},MFUseWikibase:!1,MFEnableWikidataDescriptions:{base:!1,beta:!0},MFDisplayWikibaseDescriptions:{search:!1,nearby:!1,watchlist:!1,tagline:!1},MFRSSFeedLink:!1,MFSchemaSearchSampleRate:.001,MFStripResponsiveImages:!0,MFResponsiveImageWhitelist:["image/svg+xml"],MFEnableManifest:!0,MFManifestThemeColor:"#eaecf0",MFManifestBackgroundColor:"#fff",MFLogWrappedInfoboxes:!0,MFSiteStylesRenderBlocking:!1,MFWatchlistEditCountThreshold:10},ServiceWiringFiles:["includes/ServiceWiring.php"],manifest_version:1}},function(e,t,i){var n=new(0,i(21).MemoryCache);QUnit.module("MobileFrontend cache.js"),QUnit.test("cache set() and get()",function(e){n.set("key","value"),e.strictEqual(n.get("key"),"value")})},function(e,t,i){(function(e){var t,n,o=i(4),s=i(7);QUnit.module("MobileFrontend mfExtend.test.js",{beforeEach:function(){n=o.sandbox.create(),s.setUp(n,e),t=i(1)},afterEach:function(){n.restore()}}),QUnit.test("mfExtend() - extending from constructor",function(e){function i(){}function n(){}t(i,n,{}),e.strictEqual(i.prototype instanceof n,!0)}),QUnit.test("mfExtend() - extending from object",function(e){var i,n=new function(){this.protoMethod=function(){return!0}};function o(){}t(o,n),i=new o,e.strictEqual(i.protoMethod(),!0)}),QUnit.test("mfExtend() - extending from constructor with overrides",function(e){var i;function n(){}t(n,function(){this.protoMethod=function(){return!0}},{protoMethod:function(){return!1}}),i=new n,e.strictEqual(i.protoMethod(),!1)})}).call(this,i(3))},function(e,t){!function(){e.exports=this.oojs}()},function(e,t,i){(function(e){var t,n,o=i(7),s=i(4);QUnit.module("MobileFrontend ModuleLoader",{beforeEach:function(){n=s.sandbox.create(),o.setUp(n,e),t=i(15),this.loader=new t},afterEach:function(){n.restore()}}),QUnit.test("#require",function(e){this.loader.define("foo",1),this.loader.define("bar",5),e.strictEqual(this.loader.require("foo"),1,"Returns appropriate module"),e.strictEqual(this.loader.require("bar"),5,"Returns appropriate module"),e.throws(function(){this.loader.require("undefinedmodule")},"Cannot require an undefined module."),e.throws(function(){this.loader.require("mobile.modules/Foo")},"Cannot require an undefined export on a known module.")}),QUnit.test("#define",function(e){var t=this.loader;t.define("foo",1),t.define("bar",5),e.throws(function(){t.define("bar",50)},"Cannot define two modules with the same name"),e.strictEqual(this.loader.require("bar"),5,"Returns first definition of module.")})}).call(this,i(3))},function(e,t,i){(function(e){var t,n,o,s,a=i(4),r=i(9),l=i(6),c=i(7),d=i(0),u=i(10);QUnit.module("MobileFrontend mobile.startup/OverlayManager",{beforeEach:function(){s=a.sandbox.create(),r.setUp(s,e),c.setUp(s,e),l.setUp(s,e),u.setUp(s,e),s.stub(e.window,"scrollTo"),t=i(22),this.createFakeOverlay=function(e){var t=new OO.EventEmitter;return t.hasLoadError=!1,t.show=s.spy(),t.hide=function(){return this.emit("hide"),!0},s.spy(t,"hide"),d.extend(t,e),t},(n=new OO.EventEmitter).getPath=s.stub().returns(""),n.back=s.spy(),o=new t(n)},afterEach:function(){s.restore()}}),QUnit.test("#add",function(e){var t=this.createFakeOverlay();o.add(/^test$/,function(){return t}),n.emit("route",{path:"test"}),e.strictEqual(t.show.callCount,1,"show registered overlay")}),QUnit.test("#add, with $.Deferred factory",function(e){var t=d.Deferred(),i=this.createFakeOverlay();return t.show=s.spy(),o.add(/^foo$/,function(){return t}),n.emit("route",{path:"foo"}),t.resolve(i),t.then(function(){e.notOk(t.show.called,"don't call show on Deferred"),e.strictEqual(i.show.callCount,1,"show registered overlay")})}),QUnit.test("#add, with current path",function(e){var t=this.createFakeOverlay(),i=d.Deferred();return n.getPath=s.stub().returns("baha"),o.add(/^baha$/,function(){return t}),d.docReady(function(){i.resolve()}),i.then(function(){e.strictEqual(t.show.callCount,1,"show registered overlay")})}),QUnit.test("#replaceCurrent",function(e){var t=this.createFakeOverlay(),i=this.createFakeOverlay();o.add(/^test$/,function(){return t}),n.emit("route",{path:"test"}),o.replaceCurrent(i),e.strictEqual(t.hide.callCount,1,"hide overlay"),e.strictEqual(i.show.callCount,1,"show another overlay"),n.emit("route",{path:""}),e.strictEqual(i.hide.callCount,1,"hide another overlay")}),QUnit.test("route with params",function(e){var t=this.createFakeOverlay(),i=s.stub().returns(t);o.add(/^sam\/(\d+)$/,i),n.emit("route",{path:"sam/123"}),e.ok(i.calledWith("123"),"pass params from the route")}),QUnit.test("hide when route changes",function(e){var t=this.createFakeOverlay(),i=s.stub().returns(t);o.add(/^jon$/,i),n.emit("route",{path:"jon"}),n.emit("route",{path:""}),n.emit("route",{path:"jon"}),n.emit("route",{path:"other"}),e.strictEqual(t.hide.callCount,2,"hide overlay"),e.ok(t.hide.getCall(0).notCalledWith(!0),"don't force hide (first)"),e.ok(t.hide.getCall(1).notCalledWith(!0),"don't force hide (second)")}),QUnit.test("go back (change route) if overlay hidden but not by route change",function(e){var t=this.createFakeOverlay(),i=s.stub().returns(t);o.add(/^joakino$/,i),n.emit("route",{path:"joakino"}),t.hide(),e.strictEqual(n.back.callCount,1,"route back")}),QUnit.test("stacked overlays",function(e){var t=this.createFakeOverlay(),i=s.stub().returns(t),a=this.createFakeOverlay(),r=s.stub().returns(a);o.add(/^parent$/,r),o.add(/^child$/,i),n.emit("route",{path:"parent"}),e.strictEqual(a.show.callCount,1,"show parent"),n.emit("route",{path:"child"}),e.strictEqual(a.hide.callCount,1,"hide parent"),e.ok(a.hide.calledWith(!0),"hide parent forcefully (no confirmation)"),e.strictEqual(t.show.callCount,1,"show child"),n.emit("route",{path:"parent"}),e.strictEqual(t.hide.callCount,1,"hide child"),e.strictEqual(a.show.callCount,2,"show parent again"),e.strictEqual(r.callCount,1,"create parent only once")}),QUnit.test("prevent route change",function(e){var t=this.createFakeOverlay({hide:s.stub().returns(!1)}),i=s.stub().returns(t),a={path:"",preventDefault:s.spy()};o.add(/^rob$/,i),n.emit("route",{path:"rob"}),n.emit("route",a),e.ok(a.preventDefault.calledOnce,"prevent route change")}),QUnit.test("reload failed overlay when navigating to it again from another overlay",function(e){var t,i,a=this.createFakeOverlay(),r=this.createFakeOverlay();a.hasLoadError=!0,(i=s.stub()).onCall(0).returns(a),i.onCall(1).returns(r),t=function(e){return"0"===e?i():r},o.add(/^test\/(\d+)$/,t),n.emit("route",{path:"test/0"}),e.strictEqual(o.stack.length,1,"stack is correct size"),e.ok(o.stack[0].overlay.hasLoadError,"first overlay has load error"),n.emit("route",{path:"test/1"}),e.strictEqual(o.stack.length,2,"stack is correct size"),e.notOk(o.stack[0].overlay.hasLoadError,"second overlay loads successfully"),n.emit("route",{path:"test/0"}),e.strictEqual(o.stack.length,1,"stack decreases when going back to already visited overlay"),e.notOk(o.stack[0].overlay.hasLoadError,"Failed attempt is not cached and new overlay is loaded")}),QUnit.test("replace overlay when route event path is equal to current path",function(e){var t,i=this.createFakeOverlay(),a=this.createFakeOverlay();i.hasLoadError=!0,(t=s.stub()).onCall(0).returns(i),t.onCall(1).returns(a),o.add(/^test\/(\d+)$/,t),n.emit("route",{path:"test/0"}),e.strictEqual(o.stack.length,1,"stack is correct size"),e.ok(o.stack[0].overlay.hasLoadError,"overlay has load error"),n.emit("route",{path:"test/0"}),e.strictEqual(o.stack.length,1,"stack is correct size (did not increase upon reload)"),e.notOk(o.stack[0].overlay.hasLoadError,"overlay retry loads successfully")})}).call(this,i(3))},function(e,t,i){(function(e){var t,n,o,s,a,r,l,c=i(9),d=i(6),u=i(10),p=i(7),m=i(4),h='<div class="mw-parser-output">';QUnit.module("MobileFrontend Page",{beforeEach:function(){var g=function(e){return'<div class="ambox">'+e+"</div>"},f=function(e){return'<h2 class="section-heading">'+e+"</h2>"},b=function(e,t){var i=t||"h3";return"<"+i+">"+e+"</"+i+">"},v=function(e,t){return'<div class="mf-section-'+e+'">'+t+"</div>"};o=m.sandbox.create(),c.setUp(o,e),u.setUp(o,e),e.mw.config.set("wgMFMobileFormatterHeadings",["h1","h2","h3","h4","h5","h6"]),d.setUp(o,e),p.setUp(o,e),t=i(11),n=i(0),s=new t({el:n.parseHTML(h).html("<p>lead</p>"+g("a0"))}),a=new t({el:n.parseHTML(h).html(v(0,g("a0")+'<p>lead</p><div class="toc-mobile view-border-box"><h2></h2><div></div></div>')+f("1")+v(1,g("a1")+b("1.1")+g("a1.1")))}),r=new t({el:n.parseHTML(h).html("<p>lead</p>"+g("a0")+b("1","h2")+g("a1")+b("1.1")+g("a1.1"))}),l=new t({el:n.parseHTML(h).html(v(0,"<p>lead</p>"+g("a0"))+f("1")+v(1,g("a1")+b("1.1")+g("a1.1")+b("1.1.1","h4")+g("a1.1.1")+b("1.1.2","h4")+g("a1.1.2")+b("1.2")+g("a1.1"))+f("2")+v(6,g("a2"))+f("3")+v(7,g("a3"))+f("Section with nested Ambox")+v(8,g("<p>nested-ambox-parent,</p>"+g("nested-ambox-1,")+g("nested-ambox-2")))+f("Sub-section with nested Ambox")+v(9,g("<p>nested-ambox-parent,</p>"+g("nested-ambox-1,")+g("nested-ambox-2"))+b("subsection heading")+b("Another subsection heading")))})},afterEach:function(){d.tearDown(),o.restore()}}),QUnit.test("#findInSectionLead",function(e){[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[3,"","h4","selector does not match",".foo"],[111,"","Non-existent section"]].forEach(function(t,i){var n=t[0],o=t[1],s=t[2],a=t[3]||".ambox";e.strictEqual(r.findChildInSectionLead(n,a).text(),o,"Found correct text in desktop test "+i+" case: "+s)}),[[0,"a0","lead section"],[3,"","h4","selector does not match",".foo"],[111,"","Non-existent section"]].forEach(function(t){e.strictEqual(s.findChildInSectionLead(t[0],t[3]||".ambox").text(),t[1],"Stub: Found correct text in desktop test case:"+t[2])}),[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[3,"a1.1.1","h4"],[3,"","h4","selector does not match",".foo"],[7,"a3","h2 later"],[111,"","Non-existent section"]].forEach(function(t){e.strictEqual(l.findChildInSectionLead(t[0],t[3]||".ambox").text(),t[1],"Mobile: Found correct text in test case:"+t[2])}),[[0,"a0","lead section"],[1,"a1","h2"],[2,"a1.1","h3"],[111,"","Non-existent section"]].forEach(function(t){e.strictEqual(a.findChildInSectionLead(t[0],t[3]||".ambox").text(),t[1],"Mobile with table of contents: Found correct text in test case:"+t[2])}),[[8,".ambox","nested-ambox-parent,nested-ambox-1,nested-ambox-2","Nested elements in section"],[9,".ambox","nested-ambox-parent,nested-ambox-1,nested-ambox-2","Nested elements in subsection"]].forEach(function(t){var i=l.findChildInSectionLead(t[0],t[1]);e.strictEqual(i.not(i.children()).text(),t[2],"Mobile: Found correct text in test case:"+t[3])})}),QUnit.test("#isMainPage",function(e){var i=new t({title:"Main Page",isMainPage:!0}),n=new t({title:"Foo"});e.strictEqual(i.isMainPage(),!0,"check main page flag is updated"),e.strictEqual(n.isMainPage(),!1,"check not marked as main page")}),QUnit.test("#getThumbnails",function(e){var i,o,s,a,r,l,c,d,u,p;i=new t({el:n.parseHTML('<div><a href="/wiki/File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),o=new t({el:n.parseHTML("<div></div>")}),s=new t({el:n.parseHTML('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),a=i.getThumbnails(),r=new t({el:n.parseHTML('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box noviewer"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),l=new t({el:n.parseHTML('<div><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" class="metadata" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),p=new t({el:n.parseHTML('<div class="noviewer"><a href="/wikpa/index.php?title=File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" class="image view-border-box"><img alt="Cyanolimnas cerverai by Allan Brooks cropped.jpg" src="//upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg/300px-Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg" width="300" height="303" data-file-width="454" data-file-height="459"></a></div>')}),c=new t({el:n.parseHTML('<div><a href="/wiki/File:Design_portal_logo.jpg" class="image"><span class="lazy-image-placeholder" style="width: 28px;height: 28px;" data-src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" data-alt="icon" data-width="28" data-height="28" data-class="noviewer">&nbsp;</span></a></div>')}),u=new t({el:n.parseHTML('<div><a href="/wiki/File:Design_portal_logo.jpg" class="image"><span class="lazy-image-placeholder" style="width: 28px;height: 28px;" data-src="//upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Design_portal_logo.jpg/28px-Design_portal_logo.jpg" data-alt="icon" data-width="28" data-height="28" data-class="wot noviewerz bar">&nbsp;</span></a></div>')}),d=new t({el:n.parseHTML('<div><table class="plainlinks metadata ambox ambox-content ambox-Unreferenced" role="presentation"><tr><td class="mbox-image"><div style="width:52px"><a href="/wiki/File:Question_book-new.svg" class="image"><span class="lazy-image-placeholder" style="width: 50px;height: 39px;" data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" data-alt="" data-width="50" data-height="39" data-srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/75px-Question_book-new.svg.png 1.5x, https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Question_book-new.svg/100px-Question_book-new.svg.png 2x"> </span></a></div></td></tr></table>')}),e.strictEqual(a.length,1,"Found expected number of thumbnails."),e.strictEqual(a[0].getFileName(),"File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg","Found expected filename."),a=o.getThumbnails(),e.strictEqual(a.length,0,"This page has no thumbnails."),a=s.getThumbnails(),e.strictEqual(a.length,1,"Found expected number of thumbnails."),e.strictEqual(a[0].getFileName(),"File:Cyanolimnas_cerverai_by_Allan_Brooks_cropped.jpg","Found expected filename."),a=r.getThumbnails(),e.strictEqual(a.length,0,"This page has no thumbnails."),a=l.getThumbnails(),e.strictEqual(a.length,0,"This page has no thumbnails."),a=p.getThumbnails(),e.strictEqual(a.length,0,"Images inside a container with the class are not included. Images inside tables for example."),a=c.getThumbnails(),e.strictEqual(a.length,0,"Consider whether the class is on an image which has not been lazy loaded."),a=d.getThumbnails(),e.strictEqual(a.length,0,"Consider whether the lazy loaded image is inside a .metadata container."),a=u.getThumbnails(),e.strictEqual(a.length,1,"Thumbnail found if there is a typo.")}),QUnit.test("#getNamespaceId",function(e){[["Main Page",0],["San Francisco",0],["San Francisco: Talk:2",0],["San Francisco: The Sequel",0],["Talk:Foo",1],["Project:Bar",4],["User talk:Jon",3],["Special:Nearby",-1]].forEach(function(i){var n=new t({title:i[0]});e.strictEqual(n.getNamespaceId(),i[1],"Check namespace is as expected")})}),QUnit.test("#isTalkPage",function(e){[["Main Page",!1],["San Francisco",!1],["San Francisco: Talk:2",!1],["San Francisco: The Sequel",!1],["Talk:Foo",!0],["Project talk:Bar",!0],["User talk:Jon",!0],["Special:Nearby",!1]].forEach(function(i){var n=new t({title:i[0]});e.strictEqual(n.isTalkPage(),i[1],"Check test is as expected")})}),QUnit.test("#isMissing",function(e){var i,n;i=[new t({title:"Hello",id:0}),new t({title:"Hello",id:5,isMissing:!0}),new t({title:"Hello",isMissing:!0})],n=[new t({title:"Hello",id:4}),new t({title:"Hello",id:4,isMissing:!1}),new t({title:"Hello",isMissing:!1}),new t({title:"Hello",id:0,isMissing:!1})],i.forEach(function(t,i){e.strictEqual(t.isMissing,!0,"page "+i+" is missing")}),n.forEach(function(t,i){e.strictEqual(t.isMissing,!1,"page "+i+" is not missing")})}),QUnit.test("#allowsXSS",function(e){var i=new t({title:'<script>alert("oops, XSS possible!");<\/script>'});e.strictEqual(i.getDisplayTitle(),"&lt;script&gt;alert(&quot;oops, XSS possible!&quot;);&lt;/script&gt;","Check against XSS in Page.js constructor displaytitle (when title set)"),[{thumbnail:!1,title:'<script>alert("oops, XSS possible!");<\/script>',terms:!1,testDesc:"Check against XSS in Page.newFromJSON displaytitle (when title set)"},{thumbnail:!1,pageprops:[],terms:{label:['<script>alert("oops, XSS possible!");<\/script>']},testDesc:"Check against XSS in Page.newFromJSON displaytitle (when Wikibase label set)"}].forEach(function(n){i=t.newFromJSON(n),e.strictEqual(i.getDisplayTitle(),"&lt;script&gt;alert(&quot;oops, XSS possible!&quot;);&lt;/script&gt;",n.testDesc)})})}).call(this,i(3))},function(e,t,i){(function(e){var t,n,o,s,a=i(4),r=i(9),l=i(10),c=i(6),d=i(28),u=d.page,p=d.page2,m=i(48);QUnit.module("MobileFrontend PageGateway",{beforeEach:function(){s=a.sandbox.create(),r.setUp(s,e),c.setUp(s,e),l.setUp(s,e),t=i(0),n=i(23),this.api=new mw.Api,o=new n(this.api)},afterEach:function(){s.restore()}}),QUnit.test("#getPage (h1s)",function(e){return s.stub(this.api,"get").returns($.Deferred().resolve(m.getPageHeadings.input)),o.invalidatePage("Test"),s.stub(mw.util,"getUrl").returns("Test:History"),o.getPage("Test").then(function(t){e.propEqual(t,m.getPageHeadings.output,"return lead and sections test 1")})}),QUnit.test("#getPage",function(e){var t=s.stub(this.api,"get").returns($.Deferred().resolve(m.getPage.input));return s.stub(mw.util,"getUrl").returns("Test:History"),o.invalidatePage("Test"),o.getPage("Test").then(function(t){return e.deepEqual(t,m.getPage.output,"return lead and sections test 2"),o.getPage("Test")}).then(function(){e.strictEqual(t.callCount,1,"cache page")})}),QUnit.test("#getPageLanguages (response)",function(e){return s.stub(this.api,"get").returns($.Deferred().resolve(m.getPageLanguagesResponse.input)),o.getPageLanguages("Test").then(function(t){e.deepEqual(t.languages,m.getPageLanguagesResponse.output.languages,"return augmented language links"),e.deepEqual(t.variants,m.getPageLanguagesResponse.output.variants,"return augmented language variant links")})}),QUnit.test("#getPageLanguages (call)",function(e){var t=s.stub(this.api,"get").returns($.Deferred().reject());s.stub($,"ajax").returns($.Deferred().resolve()),o.getPageLanguages("Title","fr"),e.ok(t.calledWith(m.getPageLanguagesCall.output))}),QUnit.test("#_getAPIResponseFromHTML",function(e){var i=o._getAPIResponseFromHTML(t.parseHTML(u));e.deepEqual(m.getAPIResponseFromHTML.input,i)}),QUnit.test("#getSectionsFromHTML malformed (h2 before h1)",function(e){var i=o.getSectionsFromHTML(t.parseHTML(p));e.propEqual(i,[{line:"A1",level:"2",anchor:"1.0",text:'<h3 id="">A2.1</h3>\n\n',subsections:[{line:"A2.1",level:"3",anchor:"",text:"",subsections:[]}]},{line:"A2.2",level:"2",anchor:"",text:"",subsections:[]},{line:"A2",level:"1",anchor:"",text:'<h2 id="">A2.1</h2>\n\n',subsections:[{line:"A2.1",level:"2",anchor:"",text:"",subsections:[]}]}])}),QUnit.test("#getPage (forwards api errors)",function(e){return s.stub(this.api,"get").returns($.Deferred().reject("missingtitle")),o.getPage("Err").catch(function(t){e.strictEqual(t,"missingtitle")})}),QUnit.test("#getPage (move protected page)",function(e){var t={edit:["*"],move:["sysop"]};return s.stub(this.api,"get").returns($.Deferred().resolve({mobileview:{id:-1,displaytitle:"Test",revId:42,lastmodifiedby:{name:"bob",gender:"unknown"},protection:{move:["sysop"]},lastmodified:"2013-10-28T18:49:56Z",languagecount:10,sections:[{id:0,text:""}]}})),o.invalidatePage("Test"),o.getPage("Test").then(function(i){e.deepEqual(i.protection,t)})})}).call(this,i(3))},function(e,t){e.exports={getPageHeadings:{input:{mobileview:{id:-1,displaytitle:"Test",revId:42,lastmodifiedby:{name:"bob",gender:"unknown"},protection:[],lastmodified:"2013-10-28T18:49:56Z",languagecount:10,sections:[{id:0,text:""},{level:"1",line:"1",anchor:"1",id:1,text:"<p>Text of 1\n</p>"},{level:"2",line:"<i>1.1</i>",anchor:"1.1",id:2,text:"<p>Text of 1.1\n</p>"},{level:"1",line:"2",anchor:"2",id:3,text:"<p>Text of 2\n</p>"},{level:"2",line:"2.1",anchor:"2.1",id:4,text:"<p>Text of 2.1\n</p>"}]}},output:{historyUrl:"Test:History",lastModifiedUserName:"bob",lastModifiedUserGender:"unknown",lastModifiedTimestamp:1382986196,title:"Test",revId:42,displayTitle:"Test",id:-1,protection:{edit:["*"]},isMainPage:!1,languageCount:10,hasVariants:!1,lead:"",sections:[{level:"1",line:"1",anchor:"1",id:1,text:'<p>Text of 1\n</p><h2 id="1.1"><i>1.1</i></h2>\n<p>Text of 1.1\n</p>\n',subsections:[{level:"2",line:"<i>1.1</i>",anchor:"1.1",id:2,text:"<p>Text of 1.1\n</p>",subsections:[]}]},{level:"1",line:"2",anchor:"2",id:3,text:'<p>Text of 2\n</p><h2 id="2.1">2.1</h2>\n<p>Text of 2.1\n</p>\n',subsections:[{level:"2",line:"2.1",anchor:"2.1",id:4,text:"<p>Text of 2.1\n</p>",subsections:[]}]}]}},getPage:{input:{mobileview:{id:-1,protection:{edit:["sysop"]},lastmodifiedby:{name:"Melissa",gender:"female"},revId:42,displaytitle:"Test",lastmodified:"2013-10-28T18:49:56Z",languagecount:10,sections:[{id:0,text:"lead content"},{level:"2",line:"Aaa section",anchor:"Aaa_section",id:1,text:"aaa content"},{level:"3",line:"Subaaa section",anchor:"Subaaa_section",id:2,text:"subaaa content"},{level:"2",line:"Bbb section",anchor:"Bbb_section",id:3,text:"bbb content"},{level:"2",line:"References",references:"",anchor:"References",id:4,text:"references"}]}},output:{historyUrl:"Test:History",lastModifiedUserName:"Melissa",lastModifiedUserGender:"female",lastModifiedTimestamp:1382986196,protection:{edit:["sysop"]},title:"Test",displayTitle:"Test",id:-1,isMainPage:!1,revId:42,languageCount:10,hasVariants:!1,lead:"lead content",sections:[{level:"2",line:"Aaa section",anchor:"Aaa_section",id:1,text:'aaa content<h3 id="Subaaa_section">Subaaa section</h3>\nsubaaa content\n',subsections:[{level:"3",line:"Subaaa section",anchor:"Subaaa_section",id:2,text:"subaaa content",subsections:[]}]},{level:"2",line:"Bbb section",anchor:"Bbb_section",id:3,text:"bbb content",subsections:[]},{level:"2",line:"References",references:"",anchor:"References",id:4,text:"references",subsections:[]}]}},getPageLanguagesResponse:{input:{query:{pages:[{pageid:94,ns:0,title:"San Francisco",langlinks:[{lang:"es",url:"http://es.wikipedia.org/wiki/San_Francisco_(California)",title:"San Francisco (California)",autonym:"español"},{lang:"pl",url:"http://pl.wikipedia.org/wiki/San_Francisco",title:"San Francisco",autonym:"polski"},{lang:"sr",url:"http://sr.wikipedia.org/wiki/%D0%A1%D0%B0%D0%BD_%D0%A4%D1%80%D0%B0%D0%BD%D1%86%D0%B8%D1%81%D0%BA%D0%BE",title:"Сан Франциско",autonym:"српски / srpski"}]}],general:{variants:[{code:"sr",name:"sr"},{code:"sr-ec",name:"Ћирилица"},{code:"sr-el",name:"Latinica"}],variantarticlepath:"/$2/$1"},languages:[{code:"sr",name:"српски / srpski"},{code:"sr-ec",name:"српски (ћирилица)"},{code:"sr-el",name:"srpski (latinica)‎"},{code:"es",name:"español"},{code:"pl",name:"polski"}]},limits:{langlinks:500}},output:{languages:[{lang:"es",url:"http://es.wikipedia.org/wiki/San_Francisco_(California)",title:"San Francisco (California)",autonym:"español"},{lang:"pl",url:"http://pl.wikipedia.org/wiki/San_Francisco",title:"San Francisco",autonym:"polski"},{lang:"sr",url:"http://sr.wikipedia.org/wiki/%D0%A1%D0%B0%D0%BD_%D0%A4%D1%80%D0%B0%D0%BD%D1%86%D0%B8%D1%81%D0%BA%D0%BE",title:"Сан Франциско",autonym:"српски / srpski"}],variants:[{lang:"sr",autonym:"sr",url:"/sr/Test"},{lang:"sr-ec",autonym:"Ћирилица",url:"/sr-ec/Test"},{lang:"sr-el",autonym:"Latinica",url:"/sr-el/Test"}]}},getPageLanguagesCall:{output:{action:"query",meta:"siteinfo",siprop:"general",prop:"langlinks",llprop:"url|autonym|langname",llinlanguagecode:"fr",lllimit:"max",titles:"Title",formatversion:2}},getAPIResponseFromHTML:{input:[{line:"A1",level:"1",anchor:"1.0",text:""},{line:"A2.1",level:"2",anchor:"",text:""},{line:"A2.2",level:"2",anchor:"",text:""},{line:"A2",level:"1",anchor:"",text:""},{line:"A2.1",level:"2",anchor:"",text:""}]}}},function(e,t,i){(function(e){var t,n,o=i(28),s=i(6),a=i(9),r=i(10),l=i(7),c=i(4),d=i(0);QUnit.module("MobileFrontend Skin.js",{beforeEach:function(){var o,u={getReferencesLists:function(){},getReferencesList:function(){}};t=c.sandbox.create(),a.setUp(t,e),s.setUp(t,e),l.setUp(t,e),r.setUp(t,e),n=i(24),o=new(i(11))({title:"Foo"}),t.stub(mw.loader,"using").returns(d.Deferred().resolve()),t.stub(u,"getReferencesLists").returns(d.Deferred().resolve({})),t.stub(u,"getReferencesList").withArgs(o,"Notes_and_references").returns(d.Deferred().resolve(d.parseHTML("<p>").text("P"))).withArgs(o,"Notes").returns(d.Deferred().resolve(d.parseHTML("<p>").text("A"))).withArgs(o,"Refs").returns(d.Deferred().resolve(d.parseHTML("<p>").text("B"))).withArgs(o,"More_refs").returns(d.Deferred().resolve(d.parseHTML("<p>").html("<p>E</p><p>F</p>").children())),this.skin=new n({referencesGateway:u,page:o})},afterEach:function(){t.restore()}}),QUnit.test("#loadImagesList (success)",function(e){var i=t.stub(this.skin,"loadImage").returns(d.Deferred().resolve());return this.skin.loadImagesList([d.parseHTML("<div>"),d.parseHTML("<div>")]).then(function(){e.strictEqual(i.callCount,2,"Stub was called twice and resolves successfully.")})}),QUnit.test("#loadImagesList (one image fails)",function(e){var i=t.stub(this.skin,"loadImage");return i.onCall(0).returns(d.Deferred().resolve()),i.onCall(1).returns(d.Deferred().reject()),this.skin.loadImagesList([d.parseHTML("<div>"),d.parseHTML("<div>")]).catch(function(){e.strictEqual(i.callCount,2,"Stub was called twice and overall result was failure.")})}),QUnit.test("#loadImagesList (empty list)",function(e){return this.skin.loadImagesList([]).then(function(){e.ok(!0,"An empty list always resolves successfully")})}),QUnit.test("#lazyLoadReferences",function(e){var t=d.parseHTML("<div>").append(o.skinPage);return this.skin.lazyLoadReferences({wasExpanded:!1,page:this.skin.page,isReferenceSection:!0,$heading:t.find("#Notes_and_references").parent()}).then(function(){e.strictEqual(t.find(".mf-section-2").text().replace(/[\t\n]/g,""),"TextPNotesARefsBno forgetMore refs1E2F3","Check all the references section is populated correctly.")})}),QUnit.test("#getSectionId",function(e){var t=d.parseHTML(["<div>",'<h2><span class="mw-headline" id="heading">H</span></h2>',"<div>",'<h3><span class="mw-headline" id="subheading">Subh</span></h3>','<a class="element"></a>',"</div>","</div>"].join("")),i=d.parseHTML(["<div>",'<h2><span class="mw-headline" id="Notes_and_references">Notes and references</span></h2>',"<div>",'<h3 class="in-block"><span class="mw-headline" id="Notes">Notes</span></h3>','<div class="reflist"><a class="element"></a></div>',"</div>","</div>"].join("")),o=d.parseHTML(['<div id="mw-content-text">','<h2><span class="mw-headline" id="heading">Heading</span></h2>','<div><a class="element"></a></div>',"</div>"].join("")),s=d.parseHTML(['<div id="mw-content-text">','<div><a class="element"></a></div>'].join("")),a=d.parseHTML(['<div id="mw-content-text">','<h2><span class="mw-headline" id="Foo">Foo</span></h2>',"<div>","<p>Foo content.</p>","</div>",'<h2><span class="mw-headline" id="Bar">Bar</span></h2>','<div class="reflist"><a class="element"></a></div>',"</div>","</div>"].join(""));e.strictEqual(n.getSectionId(t.find(".element")),"subheading"),e.strictEqual(n.getSectionId(i.find(".element")),"Notes","https://phabricator.wikimedia.org/T146394"),e.strictEqual(n.getSectionId(o.find(".element")),"heading"),e.strictEqual(n.getSectionId(s.find(".element")),null),e.strictEqual(n.getSectionId(a.find(".element")),"Bar")})}).call(this,i(3))},function(e,t,i){var n=i(13);QUnit.module("MobileFrontend time.js"),QUnit.test("timeAgo()",function(e){e.deepEqual(n.timeAgo(40),{value:40,unit:"seconds"}),e.deepEqual(n.timeAgo(149),{value:2,unit:"minutes"}),e.deepEqual(n.timeAgo(150),{value:3,unit:"minutes"}),e.deepEqual(n.timeAgo(7500),{value:2,unit:"hours"}),e.deepEqual(n.timeAgo(9e4),{value:1,unit:"days"}),e.deepEqual(n.timeAgo(9e6),{value:3,unit:"months"}),e.deepEqual(n.timeAgo(32e6),{value:1,unit:"years"}),e.deepEqual(n.timeAgo(102e6),{value:3,unit:"years"})})},function(e,t,i){(function(e){var t,n,o=i(9),s=i(10),a=i(6),r=i(7),l=i(4);QUnit.module("MobileFrontend util.js",{beforeEach:function(){n=l.sandbox.create(),o.setUp(n,e),s.setUp(n,e),a.setUp(n,e),r.setUp(n,e),t=i(0)},afterEach:function(){a.tearDown(),n.restore()}}),QUnit.test("escapeSelector()",function(e){e.strictEqual(t.escapeSelector("#selector-starts-with-hash"),"\\#selector-starts-with-hash")}),QUnit.test("grep()",function(e){e.deepEqual(t.grep([1,2],function(e){return e>1}),[2])}),QUnit.test("docReady()",function(e){var i=t.docReady();e.strictEqual(i instanceof $,!0)}),QUnit.test("when()",function(e){return t.when({resolved:!0}).then(function(t){e.strictEqual(t.resolved,!0)})}),QUnit.test("Deferred() - resolve",function(e){var i=new t.Deferred;return i.resolve("response"),i.then(function(t){e.strictEqual(t,"response")})}),QUnit.test("Deferred() - reject",function(e){var i=new t.Deferred;return i.reject("response"),i.catch(function(t){e.strictEqual(t,"response")})}),QUnit.test("getDocument()",function(e){e.strictEqual(t.getDocument().length,1)}),QUnit.test("getWindow()",function(e){e.strictEqual(t.getWindow().length,1)}),QUnit.test("parseHTML()",function(e){var i=t.parseHTML("<p>element content</p>",document);e.strictEqual("object"==typeof i,!0),e.strictEqual(i[0].innerHTML,"element content")}),QUnit.test("isNumeric()",function(e){e.strictEqual(t.isNumeric(123),!0),e.strictEqual(t.isNumeric("123"),!0),e.strictEqual(t.isNumeric("The string 123 is true? I don't like it."),!1),e.strictEqual(t.isNumeric(NaN),!1)}),QUnit.test("extend()",function(e){var i={a:"apple"};t.extend(i,{b:"banana"}),e.strictEqual(JSON.stringify(i),'{"a":"apple","b":"banana"}')}),QUnit.test("escapeHash()",function(e){e.strictEqual(t.escapeHash("#escape:...hash"),"#escape\\:\\.\\.\\.hash")}),QUnit.test("isModifiedEvent() - true",function(e){var i=document.createElement("div");i.addEventListener("click",function(i){e.strictEqual(t.isModifiedEvent(i),!0)}),i.dispatchEvent(new window.MouseEvent("click",{ctrlKey:!0}))}),QUnit.test("isModifiedEvent() - false",function(e){var i=document.createElement("div");i.addEventListener("click",function(i){e.strictEqual(t.isModifiedEvent(i),!1)}),i.dispatchEvent(new window.MouseEvent("click"))}),QUnit.test("repeatEvent",function(e){var i=new OO.EventEmitter,n=new OO.EventEmitter;t.repeatEvent(n,i,"test"),i.on("test",function(t){e.strictEqual(t,"test data","proxy responds to source events correctly")}),n.emit("test","test data")})}).call(this,i(3))},function(e,t,i){(function(e){var t,n,o=i(14),s=i(6),a=i(1),r=i(7),l=i(4);QUnit.module("MobileFrontend mobile.startup/View",{beforeEach:function(){n=l.sandbox.create(),s.setUp(n,e),r.setUp(n,e),t=i(2)},afterEach:function(){n.restore()}}),QUnit.test("View",function(e){var i=new t({el:"body"});e.ok(i.$el instanceof $,"assign jQuery object to $el"),e.strictEqual(i.$el[0].tagName.toUpperCase(),"BODY","assign proper jQuery object to $el")}),QUnit.test("View, jQuery proxy functions",function(e){var i=new t({el:"body"});["append","prepend","appendTo","prependTo","after","before","insertAfter","insertBefore","remove","detach"].forEach(function(t){var o=n.stub(i.$el,t);i[t]("test",1),e.ok(o.calledWith("test",1)),o.restore()})}),QUnit.test("View#preRender",function(e){var i;function n(){t.apply(this,arguments)}a(n,t,{template:o.compile("<p>{{text}}</p>"),preRender:function(){this.options.text="hello"}}),i=new n,e.strictEqual(i.$el.html(),"<p>hello</p>","manipulate template data")}),QUnit.test("View#postRender",function(e){var i=n.spy();function o(){t.apply(this,arguments)}a(o,t,{postRender:function(){i()}}),new o,e.strictEqual(i.callCount,1,"invoke postRender")}),QUnit.test("View#delegateEvents",function(e){var i;function n(){t.apply(this,arguments)}a(n,t,{template:o.compile("<p><span>test</span></p>"),events:{"click p span":function(t){t.preventDefault(),e.ok(!0,"Span was clicked and handled")},"click p":"onParagraphClick",click:"onClick"},onParagraphClick:function(t){t.preventDefault(),e.ok(!0,"Paragraph was clicked and handled")},onClick:function(t){t.preventDefault(),e.ok(!0,"View was clicked and handled")}}),(i=new n).appendTo("body"),i.$el.find("span").trigger("click"),i.$el.find("p").trigger("click"),i.$el.trigger("click"),i.undelegateEvents(),i.$el.find("span").trigger("click"),i.$el.find("p").trigger("click"),i.$el.trigger("click")}),QUnit.test("View#render (with isTemplateMode)",function(e){var i,n;function s(){t.apply(this,arguments)}function r(){t.apply(this,arguments)}a(s,t,{template:o.compile('<p class="foo"><span>test</span></p>'),isTemplateMode:!0}),a(r,t,{className:"bar",template:o.compile('<p class="foo"><span>test</span></p>')}),i=new s,n=new r,i.render(),n.render(),e.ok(i.$el.hasClass("foo")),e.ok(n.$el.hasClass("bar"))}),QUnit.test("View#render events (with isTemplateMode)",function(e){var i;function n(){t.apply(this,arguments)}a(n,t,{events:{"click span":"onClick"},onClick:function(){this.$el.empty().text("hello world")},template:o.compile('<p class="foo"><span>test</span></p>'),isTemplateMode:!0}),(i=new n).$("span").trigger("click"),e.strictEqual(i.$el.text(),"hello world","event was called"),e.strictEqual(i.$("span").length,0,"span disappeared"),(i=new n).render(),i.$("span").trigger("click"),e.strictEqual(i.$el.text(),"hello world","event was called"),e.strictEqual(i.$("span").length,0,"span disappeared")})}).call(this,i(3))}],[[33,0]]]);
//# sourceMappingURL=tests.mobilefrontend.js.map.json