this.mfModules=this.mfModules||{},this.mfModules["mobile.notifications.overlay"]=(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./src/mobile.notifications.overlay/NotificationsFilterOverlay.js":function(e,i,o){var t,n=o("./src/mobile.startup/Overlay.js"),a=o("./src/mobile.startup/util.js");o("./src/mobile.startup/mfExtend.js")(t=function(e){var i=this;n.call(this,a.extend({className:"overlay notifications-filter-overlay notifications-overlay navigation-drawer"},e)),this.on("hide",function(){e.mainMenu.closeNavigationDrawers()}),e.$crossWikiUnreadFilter.on("click",function(){i.hide()}),e.$notifReadState.find(".oo-ui-buttonElement").on("click",function(){i.hide()}),this.$el.find(".overlay-content").append(this.parseHTML("<div>").addClass("notifications-filter-overlay-read-state").append(e.$notifReadState),e.$crossWikiUnreadFilter)},n,{defaults:a.extend({},n.prototype.defaults,{heading:mw.msg("mobile-frontend-notifications-filter-title")}),preRender:function(){this.options.heading="<strong>"+mw.message("mobile-frontend-notifications-filter-title").escaped()+"</strong>"}}),e.exports=t},"./src/mobile.notifications.overlay/NotificationsOverlay.js":function(e,i,o){var t,n=o("./src/mobile.startup/Overlay.js"),a=o("./src/mobile.startup/util.js"),s=o("./src/mobile.startup/View.js"),r=o("./src/mobile.startup/promisedView.js"),l=o("./src/mobile.startup/mfExtend.js"),c=o("./src/mobile.startup/Anchor.js");l(t=function(e){var i,o=mw.config.get("wgEchoMaxNotificationCount"),t=new mw.echo.api.EchoApi,l=new mw.echo.dm.UnreadNotificationCounter(t,"all",o),f=new OO.ui.ButtonWidget({icon:"checkAll",title:mw.msg("echo-mark-all-as-read")}),m=new mw.echo.dm.ModelManager(l,{type:["message","alert"]}),d=new mw.echo.Controller(t,m,{type:["message","alert"]}),u=function(){f.toggle(d.manager.hasLocalUnread())},p=a.parseHTML("<div>").addClass("notifications-overlay-overlay position-fixed"),v=a.extend({},{heading:"<strong>"+mw.message("notifications").escaped()+"</strong>",footerAnchor:new c({href:mw.util.getUrl("Special:Notifications"),progressive:!0,additionalClassNames:"footer-link notifications-archive-link",label:mw.msg("echo-overlay-link")}).options,headerActions:[s.make({class:"notifications-overlay-header-markAllRead"},[f.$element])],isBorderBox:!1,className:"overlay notifications-overlay navigation-drawer"},e),g=v.badge;n.call(this,v),v.error?v.onError():(mw.echo.config.maxPrioritizedActions=1,i=new mw.echo.ui.NotificationsWrapper(d,m,{$overlay:p}),f.toggle(!1),l.on("countChange",function(e){!function(e){g.setCount(e)}(d.manager.getUnreadCounter().getCappedNotificationCount(e)),u()}),f.on("click",function(){var e=d.manager.getLocalUnread().length;d.markLocalNotificationsRead().then(function(){mw.notify(mw.msg("echo-mark-all-as-read-confirmation",e)),f.toggle(!1)},function(){f.toggle(!1)})}),this.$el.find(".overlay-content").append(r(i.populate().then(function(){return d.updateSeenTime(),g.markAsSeen(),u(),m.on("update",u),s.make({},[i.$element,p])})).$el))},n,{}),e.exports=t},"./src/mobile.notifications.overlay/mobile.notifications.overlay.js":function(e,i,o){var t=o("./src/mobile.startup/moduleLoaderSingleton.js"),n=o("./src/mobile.notifications.overlay/NotificationsOverlay.js"),a=o("./src/mobile.notifications.overlay/NotificationsFilterOverlay.js");t.define("mobile.notifications.overlay/NotificationsFilterOverlay",a),t.define("mobile.notifications.overlay/NotificationsOverlay",n)}},[["./src/mobile.notifications.overlay/mobile.notifications.overlay.js",0,1]]]);
//# sourceMappingURL=mobile.notifications.overlay.js.map.json